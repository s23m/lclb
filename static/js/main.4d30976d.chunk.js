(this.webpackJsonps23mgrapheditor=this.webpackJsonps23mgrapheditor||[]).push([[0],{140:function(e,t,a){},179:function(e,t,a){e.exports=a.p+"static/media/vertex.4937cefd.svg"},180:function(e,t,a){e.exports=a.p+"static/media/edge.09e9d9dc.svg"},181:function(e,t,a){e.exports=a.p+"static/media/select.8b3cad47.svg"},182:function(e,t,a){e.exports=a.p+"static/media/artifact.91473c28.svg"},183:function(e,t,a){e.exports=a.p+"static/media/container.ddecd459.svg"},203:function(e,t,a){e.exports=a.p+"static/media/redo.a80ea341.svg"},204:function(e,t,a){e.exports=a.p+"static/media/undo.5858a028.svg"},227:function(e,t,a){e.exports=a(419)},232:function(e,t,a){},403:function(e,t,a){e.exports=a.p+"static/media/specialisation.3320bc80.svg"},404:function(e,t,a){e.exports=a.p+"static/media/visibility.5452d398.svg"},412:function(e,t,a){e.exports=a.p+"static/media/create_folder.5ddfbbc9.svg"},413:function(e,t,a){e.exports=a.p+"static/media/delete_folder.ccd4d6e6.svg"},414:function(e,t,a){e.exports=a.p+"static/media/changeFolderName.d6c49e9c.svg"},415:function(e,t,a){e.exports=a.p+"static/media/NewModel.5f359781.svg"},416:function(e,t,a){e.exports=a.p+"static/media/DeleteModel.8ff04828.svg"},417:function(e,t,a){e.exports=a.p+"static/media/editModel.0c58ce6e.svg"},418:function(e,t,a){e.exports=a.p+"static/media/createVertex.97bc72a7.svg"},419:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),r=a(13),l=a.n(r);a(232),a(140);var s=function(){return i.a.createElement("div",{className:"App"},i.a.createElement("div",{id:"program"}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var o=a(21),c=a.n(o),d=a(34),u=a(18),h=a(20),f=a(41),m=a(38),v=a(37),y=a(7),g=a(24),p=a(177),b=a.n(p),x=a(67);var E=function e(t,a,n,i,r,l){Object(u.a)(this,e),this.typeName="SemanticIdentity",this.UUID=void 0!==r?r:([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,(function(e){return(e^crypto.getRandomValues(new Uint8Array(1))[0]&15>>e/4).toString(16)})),this.name=t,this.description=a,this.abbreviation=n,this.shortAbbreviation=i,this.translations=void 0!==l?l:[]},w=function(){function e(t){Object(u.a)(this,e),this.vertex=t,this.children=new Set,this.typeName="VertexNode",this.cleanObjectPath=(ja(),"Vertices"),this.vertexObjectPath=(ja(),"Vertices")}return Object(h.a)(e,[{key:"add",value:function(e){this.children.add(e)}},{key:"remove",value:function(e,t){var a=!1;e.add(this),a=this.children.has(t),this.children.delete(t);var n,i=Object(y.a)(this.children);try{for(i.s();!(n=i.n()).done;){var r=n.value;e.has(r)||(e.add(r),a=r.remove(e,t))}}catch(l){i.e(l)}finally{i.f()}return a}},{key:"getVertexNode",value:function(e,t){var a,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=Object(y.a)(this.children);try{for(i.s();!(a=i.n()).done;){var r=a.value;if(!e.has(r)){if(e.add(r),r.vertex.semanticIdentity.UUID===t.semanticIdentity.UUID)return r;if(n){var l=r.getVertexNode(e,t);if(null!==l)return l}}}}catch(s){i.e(s)}finally{i.f()}return null}},{key:"removeFromChildren",value:function(e){return!!this.children.has(e)&&(this.children.delete(e),!0)}},{key:"flatten",value:function(e){var t,a=[],n=Object(y.a)(this.children);try{for(n.s();!(t=n.n()).done;){var i=t.value;e.has(i)||(e.add(i),a.push(i.vertex),null!==i&&a.push.apply(a,Object(x.a)(i.flatten(e))))}}catch(r){n.e(r)}finally{n.f()}return a}},{key:"flattenVertexNodes",value:function(e){var t,a=[],n=Object(y.a)(this.children);try{for(n.s();!(t=n.n()).done;){var i=t.value;e.has(i)||(e.add(i),a.push(i),null!==i&&a.push.apply(a,Object(x.a)(i.flattenVertexNodes(e))))}}catch(r){n.e(r)}finally{n.f()}return a}},{key:"has",value:function(e,t){if(this.children.has(t))return!0;var a,n=Object(y.a)(this.children);try{for(n.s();!(a=n.n()).done;){var i=a.value;if(!e.has(i)&&(e.add(i),i.has(e,t)))return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"toTreeViewElement",value:function(e,t){var a=[],n=[];if("Vertex Folder"===e){for(var i=0;i<la.flatten().length;i++)if("Vertex"===la.flatten()[i].typeName&&la.flatten()[i].getRenderKey()===t){""===la.flatten()[i].title?this.setVertexTreePath("Unnamed Vertex"):this.setVertexTreePath(la.flatten()[i].title);var r={text:la.flatten()[i].title,children:[],data:la.flatten()[i],renderkey:la.flatten()[i].getRenderKey(),modelkey:la.flatten()[i].getModelKey(),state:{opened:!1}};""===r.text&&(r.text="Unnamed Vertex"),n.push(r)}return{text:"Vertices &#128193",children:n,data:null,state:{opened:!0},type:"Vertex Folder"}}if("Arrow Folder"===e){for(var l=0;l<la.flatten().length;l++)if("Vertex"!==la.flatten()[l].typeName&&la.flatten()[l].getRenderKey()===t){for(var s=la.flatten()[l].pathData[1][1],o=la.flatten()[l].pathData[0][1],c="N/A",d="N/A",u=0;u<la.flatten().length;u++){var h=la.flatten()[u];"Vertex"===h.typeName&&(s===h.semanticIdentity.UUID?d=h.title:o===h.semanticIdentity.UUID&&(c=h.title))}var f=[!1,!1,!1,!1];f[0]=la.flatten()[l].getNavigable(0),f[1]=la.flatten()[l].getNavigable(1),f[2]=la.flatten()[l].getAggregation(0),f[3]=la.flatten()[l].getAggregation(1);var m="";!0===f[2]?m="&#9670":!0===f[0]&&(m="&#10229"),m+="&#8213",!0===f[3]?m+="&#9670":!0===f[1]&&(m+="&#10230");var v={text:c+" "+m+" "+d,children:[],data:la.flatten()[l],renderkey:la.flatten()[l].getRenderKey(),modelkey:la.flatten()[l].getModelKey(),state:{opened:!1}};a.push(v)}return 0===a.length?void 0:{text:"Relations \u2b72",children:a,data:null,state:{opened:!0},type:"Arrow Folder"}}}},{key:"setTreeViewElement",value:function(e){return{text:e,children:[],state:{opened:!0}}}},{key:"setVertexTreePath",value:function(e){this.vertexObjectPath=this.cleanObjectPath+"/"+e}},{key:"returnVertexTreePath",value:function(){return this.vertexObjectPath}}]),e}(),N=function(){function e(t,a){Object(u.a)(this,e),this.arrow=a,this.updateVertices(t)}return Object(h.a)(e,[{key:"updateVertices",value:function(e){if(this.sourceVertexNodeObject=null,this.destVertexNodeObject=null,null!==this.arrow){var t,a=null===this.arrow.sourceVertexUUID,n=null===this.arrow.destVertexUUID,i=Object(y.a)(e);try{for(i.s();!(t=i.n()).done;){var r=t.value;if(a&&n)break;null!==r&&(r.vertex.semanticIdentity.UUID===this.arrow.sourceVertexUUID?(this.sourceVertexNodeObject=r,a=!0):r.vertex.semanticIdentity.UUID===this.arrow.destVertexUUID&&(this.destVertexNodeObject=r,n=!0))}}catch(l){i.e(l)}finally{i.f()}}}},{key:"sourceVertexNode",set:function(e){this.sourceVertexNodeObject=e,this.arrow.sourceVertexUUID=null!==e?e.vertex.semanticIdentity.UUID:null},get:function(){return this.sourceVertexNodeObject}},{key:"sourceVertex",get:function(){return null!==this.sourceVertexNodeObject?this.sourceVertexNodeObject.vertex:null}},{key:"destVertexNode",set:function(e){this.destVertexNodeObject=e,this.arrow.destVertexUUID=null!==e?e.vertex.semanticIdentity.UUID:null},get:function(){return this.destVertexNodeObject}},{key:"destVertex",get:function(){return null!==this.destVertexNodeObject?this.destVertexNodeObject.vertex:null}}]),e}(),I=function(){function e(t,a){Object(u.a)(this,e),this.rootVertices=new Set,void 0!==t&&this.add(t),this.arrows=new Set,void 0!==a&&this.add(a)}return Object(h.a)(e,[{key:"add",value:function(e){Array.isArray(e)||(e=[e]);var t,a=Object(y.a)(e);try{for(a.s();!(t=a.n()).done;){var n=t.value;switch(n.typeName){case"Vertex":this.addVertex(n);break;case"Arrow":this.addArrow(n);break;case"VertexNode":this.rootVertices.add(n);break;case"ArrowEdge":this.arrows.add(n)}}}catch(i){a.e(i)}finally{a.f()}}},{key:"addVertex",value:function(e){if(null===this.getVertexNode(e))e.originalUUID=e.semanticIdentity.UUID,e=new w(e),this.rootVertices.add(e);else{var t=":: "+e.title;e.title=t,e.originalVertex=!1,e.originalUUID=e.semanticIdentity.UUID;var a=new E(e.title,"","","",void 0,[]);e.semanticIdentity=a,e=new w(e),this.rootVertices.add(e),console.log(e)}}},{key:"addArrow",value:function(e){if(null===this.getArrowEdge(e)){if(e=new N(this.flattenVertexNodes(),e),this.arrows.add(e),null!==e.destVertexNode&&null!==e.sourceVertexNode&&(e.destVertexNode.add(e.sourceVertexNode),this.rootVertices.has(e.sourceVertexNode))){var t,a=!1,n=Object(y.a)(this.rootVertices);try{for(n.s();!(t=n.n()).done;){var i=t.value;i.vertex.semanticIdentity.UUID!==e.sourceVertex.semanticIdentity.UUID&&(i.has(new Set,e.sourceVertexNode)&&(a=!0))}}catch(r){n.e(r)}finally{n.f()}a&&this.rootVertices.delete(e.sourceVertexNode)}}else console.error("Attempted to add duplicate arrow")}},{key:"ArrowUUIDSource",value:function(e){e=this.getVertexNode(e);var t,a=[],n=0,i=Object(y.a)(this.arrows);try{for(i.s();!(t=i.n()).done;){var r=t.value;null!==r.sourceVertexNode&&r.sourceVertex.semanticIdentity.UUID===e.vertex.semanticIdentity.UUID&&(a[n]=r,n+=1)}}catch(l){i.e(l)}finally{i.f()}return a}},{key:"ArrowUUIDDest",value:function(e){e=this.getVertexNode(e);var t,a=[],n=0,i=Object(y.a)(this.arrows);try{for(i.s();!(t=i.n()).done;){var r=t.value;null!==r.destVertexNode&&r.destVertex.semanticIdentity.UUID===e.vertex.semanticIdentity.UUID&&(a[n]=r,n+=1)}}catch(l){i.e(l)}finally{i.f()}return a}},{key:"remove",value:function(e){if(console.log("remove 2 is called"),console.log(this.rootVertices),"Vertex"===e.typeName){var t=this.getVertexNode(e),a=this.rootVertices.has(t);console.log(a),this.rootVertices.delete(t);var n,i=Object(y.a)(t.children);try{for(i.s();!(n=i.n()).done;){var r=n.value;this.rootVertices.add(r)}}catch(w){i.e(w)}finally{i.f()}var l,s=new Set,o=Object(y.a)(this.rootVertices);try{for(o.s();!(l=o.n()).done;){var c=l.value;s.has(c)||(s.add(c),c.remove(s,t),console.log(a))}}catch(w){o.e(w)}finally{o.f()}if(a){var d,u=Object(y.a)(this.arrows);try{for(u.s();!(d=u.n()).done;){var h=d.value;null!==h.sourceVertexNode&&h.sourceVertex.semanticIdentity.UUID===t.vertex.semanticIdentity.UUID&&(h.sourceVertexNode=null),null!==h.destVertexNode&&h.destVertex.semanticIdentity.UUID===t.vertex.semanticIdentity.UUID&&(h.destVertexNode=null)}}catch(w){u.e(w)}finally{u.f()}}return a}if("Arrow"===e.typeName){var f=this.getArrowEdge(e);if(null!==f){if(this.arrows.delete(f),null!==f.sourceVertexNode&&null!==f.destVertexNode){var m,v=!1,g=!1,p=Object(y.a)(this.arrows);try{for(p.s();!(m=p.n()).done;){var b=m.value,x=null!==b.sourceVertexNode&&b.sourceVertex.semanticIdentity.UUID===f.sourceVertex.semanticIdentity.UUID,E=null!==b.destVertexNode&&b.destVertex.semanticIdentity.UUID===f.destVertex.semanticIdentity.UUID;x&&E&&(v=!0),x&&null!==b.destVertexNode&&(g=!0)}}catch(w){p.e(w)}finally{p.f()}v||f.destVertexNode.removeFromChildren(f.sourceVertexNode),g||this.add(f.sourceVertexNode),f.sourceVertexNode.has(new Set,f.destVertexNode)&&this.rootVertices.delete(f.destVertexNode)}return!0}}else null!==e?console.error("Attempted to remove object of invalid type %s to Graph",e.typeName):console.error("Attempted to remove null from Graph");return!1}},{key:"has",value:function(e){if(this.rootVertices.has(e))return!0;var t,a=new Set,n=Object(y.a)(this.rootVertices);try{for(n.s();!(t=n.n()).done;){var i=t.value;if(!a.has(i)&&(a.add(i),i.has(a,e)))return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"getVertexNode",value:function(e){var t,a=new Set,n=Object(y.a)(this.rootVertices);try{for(n.s();!(t=n.n()).done;){var i=t.value;if(!a.has(i)){if(a.add(i),i.vertex.semanticIdentity.UUID===e.semanticIdentity.UUID)return i;var r=i.getVertexNode(a,e);if(null!==r)return r}}}catch(l){n.e(l)}finally{n.f()}return null}},{key:"getArrowEdge",value:function(e){var t,a=Object(y.a)(this.arrows);try{for(a.s();!(t=a.n()).done;){var n=t.value;if(n.arrow.semanticIdentity.UUID===e.semanticIdentity.UUID)return n}}catch(i){a.e(i)}finally{a.f()}return null}},{key:"flatten",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=new Set,n=new Set,i=new Set;if(e){var r,l=Object(y.a)(this.rootVertices);try{for(l.s();!(r=l.n()).done;){var s=r.value;if(!i.has(s)&&(i.add(s),a.add(s.vertex),null!==s)){var o,c=Object(y.a)(s.flatten(i));try{for(c.s();!(o=c.n()).done;){var d=o.value;a.add(d)}}catch(v){c.e(v)}finally{c.f()}}}}catch(v){l.e(v)}finally{l.f()}}if(t){var u,h=Object(y.a)(this.arrows);try{for(h.s();!(u=h.n()).done;){var f=u.value;n.add(f.arrow)}}catch(v){h.e(v)}finally{h.f()}}var m=Array.from(a);return m.concat(Array.from(n))}},{key:"flattenVertexNodes",value:function(){var e,t=new Set,a=new Set,n=Object(y.a)(this.rootVertices);try{for(n.s();!(e=n.n()).done;){var i=e.value;if(!a.has(i)&&(a.add(i),t.add(i),null!==i)){var r,l=Object(y.a)(i.flattenVertexNodes(a));try{for(l.s();!(r=l.n()).done;){var s=r.value;t.add(s)}}catch(o){l.e(o)}finally{l.f()}}}}catch(o){n.e(o)}finally{n.f()}return Array.from(t)}}]),e}(),C="None",k="Arrow",M="Triangle",S="Filled Triangle",V="Diamond",O="Filled Diamond",U={};U[C]="None",U[k]="Arrow",U[M]="Triangle",U[S]="FilledTriangle",U[V]="Diamond",U[O]="FilledDiamond";var D={};D.None=C,D.Arrow=k,D.Triangle=M,D.FilledTriangle=S,D.Diamond=V,D.FilledDiamond=O;var L="#000000",j="#FF0000",T="#0000FF",A="#00FF00",K={};K[L]="Black",K[j]="Red",K[T]="Blue",K[A]="Green";var B={};B.Black=L,B.Red=j,B.Blue=T,B.Green=A;var F=1,P=2,R={};R[F]="Solid",R[P]="Dashed";var H={};H.Solid=F,H.Dashed=P;var Y=a(178),z=a(179),G=a.n(z),X=a(180),W=a.n(X),J=(a(403),a(404),a(181)),_=a.n(J),q=a(182),Z=a.n(q),$=a(183),Q=a.n($),ee=a(135),te=(a(405),{TreeView:"TreeView",Vertex:"Vertex",Arrow:"Arrow",Artifact:"Artifact",Container:"Container"}),ae={};ae[te.TreeView]="TreeView",ae[te.Vertex]="Vertex",ae[te.Arrow]="Arrow",ae[te.Arrow]="Artifact",ae[te.Arrow]="Container";var ne={};ae.TreeView=te.TreeView,ae.Vertex=te.Vertex,ae.Arrow=te.Arrow,ae.Artifact=te.Artifact,ae.Container=te.Container;var ie,re={Select:"Select",Vertex:"Vertex",Visibility:"Visibility",Edge:"Edge",Specialisation:"Specialisation",Artifact:"Artifact",Container:"Container"},le=function(e){Object(m.a)(a,e);var t=Object(v.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).testUpdateLabel=function(){n.setPath("fffffffff")},n.getVertexColour=function(){return n.state.selectedObject.getColour()},n.setVertexColour=function(e){n.state.selectedObject.setColour(e.hex),mn(n.state.selectedObject),Aa()},n.deleteTitle=function(){n.setState({title:""})},n.getMenu=function(){var e,t=i.a.createElement("div",{id:"Toolbar",className:"Toolbar"},i.a.createElement("div",{id:"Select",className:"ToolbarItem",onClick:function(){return n.props.setMode(re.Select)}},i.a.createElement("img",{src:_.a,alt:"Select"})),i.a.createElement("div",{id:"Vertex",className:"ToolbarItem",onClick:function(){n.props.setMode(re.Vertex)},onKeyDown:function(){return n.onKeyPressed()}},i.a.createElement("img",{src:G.a,alt:"Vertex"})),i.a.createElement("div",{id:"Artifact",className:"ToolbarItem",onClick:function(){return n.props.setMode(re.Artifact)},onKeyDown:function(){return n.onKeyPressed()}},i.a.createElement("img",{src:Z.a,alt:"Artifact"})),i.a.createElement("div",{id:"Container",className:"ToolbarItem",onClick:function(){return n.props.setMode(re.Container)},onKeyDown:function(){return n.onKeyPressed()}},i.a.createElement("img",{src:Q.a,alt:"Container"})),i.a.createElement("div",{id:"Edge",className:"ToolbarItem",onClick:function(){return n.props.setMode(re.Edge)}},i.a.createElement("img",{src:W.a,alt:"Edge"})));return n.state.menu===te.TreeView?e=i.a.createElement(Rt,{setLeftMenu:n.props.setLeftMenu}):n.state.menu===te.Vertex?(Aa(),e=i.a.createElement("form",{id:"VertexMenu"},i.a.createElement("div",{className:"LeftHeader"},"Vertex Properties"),i.a.createElement("label",{className:"LeftLabel"},"Title"),i.a.createElement("input",{id:"LeftTitle",className:"LeftTitle",value:n.state.selectedObject.title,onInput:n.handleChange}),i.a.createElement("label",{className:"LeftSpacer"},"\xa0"),i.a.createElement("label",{className:"LeftLabel"},"Content"),i.a.createElement("textarea",{id:"LeftContent",className:"LeftContent",value:n.state.selectedObject.getContentAsString(),onInput:n.handleChange}),i.a.createElement("label",{className:"LeftSpacer"},"\xa0"),n.getS23MIconsSelector(),i.a.createElement("label",{className:"LeftSpacer"},"\xa0"),n.getColourPicker(),i.a.createElement("label",{className:"LeftSpacer"},"\xa0"),i.a.createElement("label",{className:"LeftLabel"},"Is Abstract?"),i.a.createElement("input",{type:"checkbox",id:"IsAbstract",className:"LeftCheckbox",defaultChecked:n.state.selectedObject.getAbstract(),onClick:function(){return n.toggleAbstract()}}),i.a.createElement("label",{className:"LeftSpacer"},"\xa0"),i.a.createElement("button",{className:"LeftMenuButton",onClick:function(){return n.deselectElement()}},"Deselect"),i.a.createElement("label",{className:"LeftSpacer"},"\xa0"),i.a.createElement("button",{className:"LeftMenuButton",onClick:function(){Ba(n.state.selectedObject),n.setState({menu:"TreeView"})},placeholder:"NoTabIndex"},"Remove"),i.a.createElement("label",{className:"LeftSpacer"},"\xa0"),i.a.createElement("input",{id:"VertPath",className:"vertexPath",defaultValue:n.state.selectedObject.vertexPath}))):n.state.menu===te.Artifact?(Aa(),e=i.a.createElement("form",{id:"VertexMenu"},i.a.createElement("div",{className:"LeftHeader"},"Vertex Properties"),i.a.createElement("label",{className:"LeftLabel"},"Title"),i.a.createElement("input",{id:"LeftTitle",className:"LeftTitle",defaultValue:n.state.selectedObject.title,onKeyUp:function(){return n.setTitle()}}),i.a.createElement("label",{className:"LeftSpacer"},"\xa0"),i.a.createElement("label",{className:"LeftLabel"},"Content"),i.a.createElement("textarea",{id:"LeftContent",className:"LeftContent",defaultValue:n.state.selectedObject.getContentAsString(),onKeyUp:function(){return n.setContent()}}),i.a.createElement("label",{className:"LeftSpacer"},"\xa0"),n.getS23MIconsSelector(),i.a.createElement("label",{className:"LeftSpacer"},"\xa0"),n.getColourPicker(),i.a.createElement("label",{className:"LeftSpacer"},"\xa0"),i.a.createElement("label",{className:"LeftLabel"},"Is Abstract?"),i.a.createElement("input",{type:"checkbox",id:"IsAbstract",className:"LeftCheckbox",defaultChecked:n.state.selectedObject.getAbstract(),onClick:function(){return n.toggleAbstract()}}),i.a.createElement("label",{className:"LeftSpacer"},"\xa0"),i.a.createElement("button",{className:"LeftMenuButton",onClick:function(){return n.deselectElement()}},"Deselect"),i.a.createElement("label",{className:"LeftSpacer"},"\xa0"),i.a.createElement("button",{className:"LeftMenuButton",onClick:function(){Ka(n.state.selectedObject),n.setState({menu:"TreeView"})},placeholder:"NoTabIndex"},"Remove"))):n.state.menu===te.Container?(Aa(),e=i.a.createElement("form",{id:"VertexMenu"},i.a.createElement("div",{className:"LeftHeader"},"Vertex Properties"),i.a.createElement("label",{className:"LeftLabel"},"Title"),i.a.createElement("input",{id:"LeftTitle",className:"LeftTitle",defaultValue:n.state.selectedObject.title,onKeyUp:function(){return n.setTitle()}}),i.a.createElement("label",{className:"LeftSpacer"},"\xa0"),i.a.createElement("label",{className:"LeftLabel"},"Content"),i.a.createElement("textarea",{id:"LeftContent",className:"LeftContent",defaultValue:n.state.selectedObject.getContentAsString(),onKeyUp:function(){return n.setContent()}}),i.a.createElement("label",{className:"LeftSpacer"},"\xa0"),n.getS23MIconsSelector(),i.a.createElement("label",{className:"LeftSpacer"},"\xa0"),i.a.createElement("label",{className:"LeftLabel"},"Is Abstract?"),i.a.createElement("input",{type:"checkbox",id:"IsAbstract",className:"LeftCheckbox",defaultChecked:n.state.selectedObject.getAbstract(),onClick:function(){return n.toggleAbstract()}}),i.a.createElement("label",{className:"LeftSpacer"},"\xa0"),i.a.createElement("button",{className:"LeftMenuButton",onClick:function(){return n.deselectElement()}},"Deselect"),i.a.createElement("label",{className:"LeftSpacer"},"\xa0"),i.a.createElement("button",{className:"LeftMenuButton",onClick:function(){Ka(n.state.selectedObject),n.setState({menu:"TreeView"})},placeholder:"NoTabIndex"},"Remove"))):n.state.menu===te.Arrow&&(console.log("Arrow Selected"),console.log(n.state.selectedObject),e=n.state.selectedObject.edgeType===re.Edge?i.a.createElement("form",{id:"ArrowMenu"},i.a.createElement("div",{className:"LeftHeader"},"Edge Properties"),i.a.createElement("label",{className:"LeftLabel"},"Source Is Navigable?"),i.a.createElement("input",{type:"checkbox",id:"SourceIsNavigable",className:"LeftCheckbox",defaultChecked:n.state.selectedObject.getNavigable(0),onClick:function(){return n.setNavigable(0)}}),i.a.createElement("label",{className:"LeftLabel"},"Destination Is Navigable?"),i.a.createElement("input",{type:"checkbox",id:"DestIsNavigable",className:"LeftCheckbox",defaultChecked:n.state.selectedObject.getNavigable(1),onClick:function(){return n.setNavigable(1)}}),i.a.createElement("label",{className:"LeftLabel"},"Source Is Aggregation?"),i.a.createElement("input",{type:"checkbox",id:"SourceIsAggregation",className:"LeftCheckbox",defaultChecked:n.state.selectedObject.getAggregation(0),onClick:function(){return n.setAggregation(0)}}),i.a.createElement("label",{className:"LeftLabel"},"Destination Is Aggregation?"),i.a.createElement("input",{type:"checkbox",id:"DestIsAggregation",className:"LeftCheckbox",defaultChecked:n.state.selectedObject.getAggregation(1),onClick:function(){return n.setAggregation(1)}}),i.a.createElement("label",{className:"LeftLabel"},"Line Colour"),i.a.createElement("select",{name:"LineColour",id:"LineColour",className:"LeftSelector",defaultValue:K[n.state.selectedObject.lineColour],onChange:function(){return n.setColour()}},i.a.createElement("option",{value:"Black"},"Black"),i.a.createElement("option",{value:"Red"},"Red"),i.a.createElement("option",{value:"Blue"},"Blue"),i.a.createElement("option",{value:"Green"},"Green")),i.a.createElement("label",{className:"LeftSpacer"},"\xa0"),i.a.createElement("label",{className:"LeftLabel"},"Source Cardinality"),i.a.createElement("div",{className:"CardinalityArea"}," ",i.a.createElement("div",{className:"LeftCheckboxLabel"}," Visible: ")," ",i.a.createElement("input",{type:"checkbox",id:"sourceCardinalityShown",className:"LeftCheckbox",defaultChecked:n.state.selectedObject.getSourceCardinalityVisibility(),onChange:function(){n.toggleSourceCardinalityVisibility(),Aa()}}),i.a.createElement("input",{type:"number",id:"sourceFromCardindality",className:"CardinalityBox",defaultValue:n.state.selectedObject.getSourceCardinalityLowerBound(),min:"0",max:"25",onChange:function(){return n.updateCardinality()}}),i.a.createElement("label",null,".."),i.a.createElement("input",{type:"number",id:"sourceToCardindality",className:"CardinalityBox",defaultValue:n.state.selectedObject.getSourceCardinalityUpperBound(),min:"-1",max:"25",onChange:function(){return n.updateCardinality()}})),i.a.createElement("label",{className:"LeftLabel"},"Destination Cardinality"),i.a.createElement("div",{className:"CardinalityArea"}," ",i.a.createElement("div",{className:"LeftCheckboxLabel"},"Visible:")," ",i.a.createElement("input",{type:"checkbox",id:"destCardinalityShown",className:"LeftCheckbox",defaultChecked:n.state.selectedObject.getDestCardinalityVisibility(),onChange:function(){n.toggleDestCardinalityVisibility(),Aa()}}),i.a.createElement("input",{type:"number",id:"destFromCardindality",className:"CardinalityBox",defaultValue:n.state.selectedObject.getDestCardinalityLowerBound(),min:"0",max:"25",onChange:function(){return n.updateCardinality()}}),i.a.createElement("label",null,".."),i.a.createElement("input",{type:"number",id:"destToCardindality",className:"CardinalityBox",defaultValue:n.state.selectedObject.getDestCardinalityUpperBound(),min:"-1",max:"25",onChange:function(){return n.updateCardinality()}})),i.a.createElement("label",{className:"LeftLabel"},"Source Label"),i.a.createElement("input",{id:"SourceLabel",className:"LeftTitle",defaultValue:n.state.selectedObject.sourceEdgeEnd.label,onKeyUp:function(){return n.setStartLabel()}}),i.a.createElement("label",{className:"LeftSpacer"},"\xa0"),i.a.createElement("label",{className:"LeftLabel"},"Destination Label"),i.a.createElement("input",{id:"DestLabel",className:"LeftTitle",defaultValue:n.state.selectedObject.destEdgeEnd.label,onKeyUp:function(){return n.setEndLabel()}}),i.a.createElement("label",{className:"LeftSpacer"},"\xa0"),i.a.createElement("button",{className:"LeftMenuButton",onClick:function(){Ka(n.state.selectedObject),n.setState({menu:te.TreeView,selectedObject:null})}},"Remove"),i.a.createElement("label",{className:"LeftSpacer"},"\xa0"),i.a.createElement("button",{className:"LeftMenuButton",onClick:function(e){return n.stripElement(e)}},"Make Straight"),i.a.createElement("label",{className:"LeftSpacer"},"\xa0"),i.a.createElement("button",{className:"LeftMenuButton",onClick:function(){return n.deselectElement()}},"Deselect"),i.a.createElement("label",{className:"LeftSpacer"},"\xa0"),i.a.createElement("button",{className:"LeftMenuButton",onClick:function(){Ka(n.state.selectedObject),n.setState({menu:te.TreeView,selectedObject:null})}},"Remove")):i.a.createElement("form",{id:"ArrowMenu"},i.a.createElement("div",{className:"LeftHeader"},"Selected Edge"),i.a.createElement("button",{className:"LeftMenuButton",onClick:function(){return n.deselectElement()}},"Deselect"),i.a.createElement("label",{className:"LeftSpacer"},"\xa0"),i.a.createElement("button",{className:"LeftMenuButton",onClick:function(){Ka(n.state.selectedObject),n.setState({menu:te.TreeView,selectedObject:null})}},"Remove"))),i.a.createElement("div",null,t,i.a.createElement("form",{ref:n.setFormRef,className:n.props.className},e))},n.state={menu:te.TreeView,selectedObject:null,fileNames:[],title:"",content:[]},n.setTitle=n.setTitle.bind(Object(f.a)(n)),n.setContent=n.setContent.bind(Object(f.a)(n)),n.handleChange=n.handleChange.bind(Object(f.a)(n)),n.formRef=null,n.setFormRef=function(e){n.formRef=e},n.setIcons(),n}return Object(h.a)(a,[{key:"handleChange",value:function(e){this.setState({title:e.target.value}),this.setState({title:""}),this.setTitle(),this.setContent()}},{key:"componentDidMount",value:function(){this.menu=this.props.mainState.menu,this.selectedItem=this.props.mainState.drawMode,this.props.setMode(this.selectedItem),document.addEventListener("keydown",this.onKeyPressed.bind(this))}},{key:"onKeyPressed",value:function(e){46===e.keyCode&&(console.log(this.state.selectedObject),"Vertex"===this.state.selectedObject.typeName?Ba(this.state.selectedObject):Ka(this.state.selectedObject),this.setState({menu:"TreeView"}),Aa())}},{key:"componentWillReceiveProps",value:function(e,t){this.setState({menu:e.mainState.menu,selectedObject:e.mainState.selectedObject})}},{key:"componentDidUpdate",value:function(e,t,a){var n=document.getElementById("VertexMenu");null===n&&(n=document.getElementById("ArrowMenu")),null!==n&&n.addEventListener("keypress",(function(e){"Enter"===e.key&&e.preventDefault()}))}},{key:"setIcons",value:function(){var e=this;fetch(Un+"/icons/list",{method:"GET",headers:{Accept:"*/*"}}).then((function(e){return e.json()})).then((function(t){var a=[];t.icons.forEach((function(e){a.push(e)})),e.setState({fileNames:a})}))}},{key:"setTitle",value:function(){var e=document.getElementById("LeftTitle").value;this.state.selectedObject.setTitle(e),mn(this.state.selectedObject),Aa()}},{key:"setContent",value:function(){var e=document.getElementById("LeftContent").value;e=e.split("\n"),this.state.selectedObject.setContent(e),mn(this.state.selectedObject),Aa()}},{key:"setLineType",value:function(){var e=document.getElementById("LineType").value;this.state.selectedObject.setLineType(e),Aa()}},{key:"setColour",value:function(){var e=document.getElementById("LineColour").value;this.state.selectedObject.setLineColour(e),Aa()}},{key:"setStartLabel",value:function(){var e=document.getElementById("SourceLabel").value;this.state.selectedObject.setStartLabel(e),Aa()}},{key:"setEndLabel",value:function(){var e=document.getElementById("DestLabel").value;this.state.selectedObject.setEndLabel(e),Aa()}},{key:"updateCardinality",value:function(){var e=document.getElementById("sourceFromCardindality").value,t=document.getElementById("sourceToCardindality").value,a=this.state.selectedObject.getSourceCardinalityVisibility(),n=document.getElementById("destFromCardindality").value,i=document.getElementById("destToCardindality").value,r=this.state.selectedObject.getDestCardinalityVisibility();this.state.selectedObject.updateSourceCardinality(e,t,a),this.state.selectedObject.updateDestCardinality(n,i,r),Aa()}},{key:"toggleSourceCardinalityVisibility",value:function(){this.state.selectedObject.toggleSourceCardinalityVisibility(),Aa()}},{key:"toggleDestCardinalityVisibility",value:function(){this.state.selectedObject.toggleDestCardinalityVisibility(),Aa()}},{key:"toggleAbstract",value:function(){this.state.selectedObject.toggleAbstract(),Aa()}},{key:"getS23MIconsSelector",value:function(){var e=this,t=[i.a.createElement("div",{className:"DropdownItem"},i.a.createElement("div",{className:"dropdownLabel"},"Name"),i.a.createElement("div",{className:"checkBoxContainer"},"Text"),i.a.createElement("div",{className:"checkBoxContainer"},"Icon"))],a="";return this.state.fileNames.forEach((function(n){"_n"===n.slice(-6,-4)?(a=n.slice(0,-6),t.push(i.a.createElement("div",{className:"DropdownItem",ref:n}," ",i.a.createElement("div",{className:"dropdownLabel"},a)," ",i.a.createElement("div",{className:"checkBoxContainer"},i.a.createElement("input",{type:"checkbox",disabled:"disabled"})," "),"  ",i.a.createElement("div",{className:"checkBoxContainer"},i.a.createElement("input",{type:"checkbox",defaultChecked:e.shouldIconBeSelected(n),onClick:function(){e.setIcon(n)}}))," "))):(a=n.slice(0,-4),t.push(i.a.createElement("div",{className:"DropdownItem",ref:n}," ",i.a.createElement("div",{className:"dropdownLabel"},a)," ",i.a.createElement("div",{className:"checkBoxContainer"},i.a.createElement("input",{type:"checkbox",defaultChecked:e.shouldTextBeSelected(n),onClick:function(){e.setText(n)}})," "),"  ",i.a.createElement("div",{className:"checkBoxContainer"},i.a.createElement("input",{type:"checkbox",defaultChecked:e.shouldIconBeSelected(n),onClick:function(){e.setIcon(n)}}))," ")))})),i.a.createElement(ee.a,{title:"Category Selector",name:"Icons",id:"IconSelector",className:"IconSelector"},t)}},{key:"getColourPicker",value:function(){return i.a.createElement(ee.a,{title:"Colour Selector",id:"ColourSelector"},i.a.createElement(Y.SketchPicker,{color:this.getVertexColour,onChangeComplete:this.setVertexColour,presetColors:["#FFD5A9","#F5B942","#FFFFFF"]}))}},{key:"shouldTextBeSelected",value:function(e){return this.state.selectedObject.isTextSet(e)}},{key:"shouldIconBeSelected",value:function(e){return this.state.selectedObject.isIconSet(e)}},{key:"setText",value:function(e){this.state.selectedObject.setText(e),Aa()}},{key:"setIcon",value:function(e){this.state.selectedObject.setIcon(e),Aa()}},{key:"setNavigable",value:function(e){this.state.selectedObject.toggleNavigable(e),document.getElementById("SourceIsNavigable").checked=this.state.selectedObject.getNavigable(0),document.getElementById("DestIsNavigable").checked=this.state.selectedObject.getNavigable(1),Aa()}},{key:"setAggregation",value:function(e){this.state.selectedObject.getNavigable(e)||this.state.selectedObject.toggleNavigable(e),this.state.selectedObject.toggleAggregation(e);var t=this.state.selectedObject.getAggregation(0),a=this.state.selectedObject.getAggregation(1);t&&(document.getElementById("SourceIsNavigable").checked=!0),a&&(document.getElementById("DestIsNavigable").checked=!0),document.getElementById("SourceIsAggregation").checked=t,document.getElementById("DestIsAggregation").checked=a,Aa()}},{key:"deselectElement",value:function(){this.props.setLeftMenu(null),Aa()}},{key:"showTreeView",value:function(){this.state.selectedObject(null),Aa()}},{key:"stripElement",value:function(e){e.preventDefault(),this.state.selectedObject.trimPath(),Aa()}},{key:"render",value:function(){var e=this.getMenu();return null!==this.formRef&&this.formRef.reset(),e}}]),a}(i.a.Component),se=a(112),oe=a(209),ce=a(468),de=a(479),ue=a(476),he=a(472),fe=a(420),me=a(473),ve=a(477),ye=a(474),ge=a(8),pe=a(9),be=a(190),xe=a.n(be),Ee=a(137),we=a(207),Ne=a(76),Ie=a(191),Ce=a(54),ke=a(1),Me=null,Se=null,Ve=i.a.createRef(),Oe=[],Ue=function(e){e.xlsx.writeBuffer().then((function(e){xe()(new Blob([e],{type:"application/octet-stream"}),"DataGrid.xlsx")}))},De=function(e){return e.id},Le=function(){return{input:{fontSize:"14px",width:"90px"},label:{fontSize:"14px"},container:{maxWidth:"18em"},selector:{height:"32px"}}},je=Object(ge.a)(Le,{name:"StartEditActionSelector"})((function(e){var t=e.defaultAction,a=e.changeAction,n=e.classes;return i.a.createElement(me.a,{container:!0,alignItems:"center",className:n.container},i.a.createElement(fe.a,{className:n.label},"Start Edit Action: \xa0"),i.a.createElement(ue.a,{onChange:function(e){return a(e.target.value)},value:t,className:n.selector,input:i.a.createElement(de.a,{classes:{input:n.input},labelWidth:0,margin:"dense"})},i.a.createElement(he.a,{value:"click"},"Click"),i.a.createElement(he.a,{value:"doubleClick"},"Double Click")))})),Te=Object(ge.a)(Le,{name:"SelectTextChecker"})((function(e){var t=e.isSelectText,a=e.changeSelectText,n=e.classes;return i.a.createElement(ye.a,{control:i.a.createElement(ve.a,{checked:t,onChange:function(e){return a(e.target.checked)},color:"primary"}),classes:{label:n.label},label:"Select Text On Focus"})})),Ae=function(e){return i.a.createElement(ke.g,{name:"EditPropsPanel"},i.a.createElement(ke.k,{name:"toolbarContent"},i.a.createElement(Te,e),i.a.createElement(ke.m,null),i.a.createElement(je,e)))},Ke=function(e){var t=e.onClick,a=Object(oe.a)(e,["onClick"]);return i.a.createElement(Ce.c.Cell,Object.assign({},a,{tabIndex:0,onFocus:t}))},Be=function(){var e=Object(n.useState)(Re()),t=Object(g.a)(e,2),a=t[0],r=t[1];Se=r;var l=Object(n.useState)([{columnName:"UUID",editingEnabled:!1},{columnName:"type",editingEnabled:!1}]),s=Object(g.a)(l,1)[0],o=Object(n.useState)([]),c=Object(g.a)(o,2),d=c[0],u=c[1];ie=d,Me=u;var h=Object(n.useState)([{columnName:"UUID",wordWrapEnabled:!0},{columnName:"type",wordWrapEnabled:!0},{columnName:"name",wordWrapEnabled:!0},{columnName:"description",wordWrapEnabled:!0},{columnName:"abbreviation",wordWrapEnabled:!0},{columnName:"shortAbbreviation",wordWrapEnabled:!0}]),f=Object(g.a)(h,1)[0],m=Object(n.useState)("click"),v=Object(g.a)(m,2),p=v[0],b=v[1],E=Object(n.useState)(!0),w=Object(g.a)(E,2),N=w[0],I=w[1],C=Object(n.useRef)(null),k=Object(n.useCallback)((function(){C.current.exportGrid()}),[C]);return i.a.createElement(ce.a,null,i.a.createElement(Ee.a,null,i.a.createElement(we.a,{ref:Ve,placeholder:"Column name","aria-label":"Column name","aria-describedby":"basic-addon2"}),i.a.createElement(Ee.a.Append,null,i.a.createElement(Ne.a,{variant:"outline-secondary",onClick:function(){return function(){var e=Ve.current.value;if(Ve.current.value="",""===e||null===e||void 0===e)return;Oe.push(e),Fe()}()}},"Add"),i.a.createElement(Ne.a,{variant:"outline-secondary",onClick:function(){return function(){var e=Ve.current.value;Ve.current.value="";var t,a=Object(y.a)(la.flatten());try{for(a.s();!(t=a.n()).done;){t.value.semanticIdentity.translations.delete(e)}}catch(n){a.e(n)}finally{a.f()}Oe.splice(Oe.indexOf(e),1),Fe()}()}},"Remove"))),i.a.createElement(Ce.b,{rows:ie,columns:a,getRowId:De},i.a.createElement(pe.c,{onCommitChanges:function(e){var t,a=e.added,n=e.changed,i=e.deleted;if(a){var r=ie.length>0?ie[ie.length-1].id+1:0;t=[].concat(Object(x.a)(ie),Object(x.a)(a.map((function(e,t){return Object(se.a)({id:r+t},e)}))))}if(n&&function(e){for(var t=la.flatten(),a=it,n=0;n<e.length;n++){for(var i=0;i<a.length;i++)e[n]=He(a[i],e[n]),console.log(a[i]);for(var r=0;r<t.length;r++)e[n]=He(t[r],e[n]),"Arrow"===t[r].typeName&&(e[n]=He(t[r].sourceEdgeEnd,e[n]),e[n]=He(t[r].destEdgeEnd,e[n]))}}(t=ie.map((function(e){return n[e.id]?Object(se.a)(Object(se.a)({},e),n[e.id]):e}))),i){var l=new Set(i);t=ie.filter((function(e){return!l.has(e.id)}))}Me(t)},columnExtensions:s}),i.a.createElement(Ce.c,{cellComponent:Ke,columnExtensions:f}),i.a.createElement(Ce.d,null),i.a.createElement(Ce.f,null),i.a.createElement(Ae,{defaultAction:p,changeAction:b,isSelectText:N,changeSelectText:I}),i.a.createElement(Ce.a,{startExport:k}),i.a.createElement(Ce.e,{startEditAction:p,selectTextOnEditStart:N})),i.a.createElement(Ie.a,{ref:C,rows:ie,columns:a,onSave:Ue}))};function Fe(){Se(Re())}function Pe(e){var t={};t.id=e.semanticIdentity.UUID,t.UUID=e.semanticIdentity.UUID,t.type=e.typeName,t.name=e.semanticIdentity.name,t.description=e.semanticIdentity.description,t.abbreviation=e.semanticIdentity.abbreviation,t.shortAbbreviation=e.semanticIdentity.shortAbbreviation;for(var a=0;a<e.semanticIdentity.translations.length;a++){var n=e.semanticIdentity.translations[a];t[n[0]]=n[1]}return t}function Re(){var e,t=[{name:"UUID",title:"UUID"},{name:"type",title:"Type"},{name:"name",title:"Name"},{name:"description",title:"Description"},{name:"abbreviation",title:"Abbreviation"},{name:"shortAbbreviation",title:"Short Abbreviation"}],a=Object(y.a)(Oe);try{for(a.s();!(e=a.n()).done;){var n=e.value;t.push({name:n,title:n})}}catch(i){a.e(i)}finally{a.f()}return t}function He(e,t){if(e.semanticIdentity.UUID===t.UUID){e.semanticIdentity.abbreviation=t.abbreviation,e.semanticIdentity.shortAbbreviation=t.shortAbbreviation,e.semanticIdentity.name=t.name,e.title=t.name,e.semanticIdentity.description=t.description,e.text=t.name+" \ud83d\udfe7";var a,n=Object(y.a)(Oe);try{for(n.s();!(a=n.n()).done;){for(var i=a.value,r=!1,l=0;l<e.semanticIdentity.translations.length;l++)if(e.semanticIdentity.translations[l][0]===i){e.semanticIdentity.translations[l][1]=t[i],r=!0;break}r||e.semanticIdentity.translations.push([i,t[i]])}}catch(s){n.e(s)}finally{n.f()}}return t}function Ye(e){Oe=e,Fe()}var ze=function(){function e(t,a,n){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=arguments.length>4?arguments[4]:void 0;Object(u.a)(this,e),this.typeName="Cardinality",this.numLowerBound=t,this.numUpperBound=a,this.attachedToUUID=n,this.isVisible=i,this.semanticIdentity=void 0!==r?r:new E(this.toString(),this.getDescription())}return Object(h.a)(e,[{key:"toggleVisibility",value:function(){this.isVisible=!this.isVisible}},{key:"toString",value:function(){var e,t;return(e="-1"===this.lowerBound?"n":this.lowerBound)===(t="-1"===this.upperBound?"n":this.upperBound)?e:e+" .. "+t}},{key:"getDescription",value:function(){return"Cardinality of Edge End ".concat(this.attachedToUUID)}},{key:"lowerBound",set:function(e){this.numLowerBound=e,this.semanticIdentity.name=this.toString()},get:function(){return this.numLowerBound}},{key:"upperBound",set:function(e){this.numUpperBound=e,this.semanticIdentity.name=this.toString()},get:function(){return this.numUpperBound}}]),e}(),Ge=function(){function e(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:C,n=arguments.length>2?arguments[2]:void 0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",r=arguments.length>4?arguments[4]:void 0;Object(u.a)(this,e),this.attachedToUUID=t,this.typeName="EdgeEnd",this.semanticIdentity=void 0!==r?r:new E(this.toString(),this.getDescription()),this.headType=a,this.cardinality=void 0!==n?n:new ze(1,1,this.semanticIdentity.UUID),this.label=i,this.edgeEndRenderKey=ma(),this.edgeEndModelKey=ba()}return Object(h.a)(e,[{key:"setModelKey",value:function(e){this.edgeEndModelKey=e}},{key:"getModelKey",value:function(){return this.edgeEndModelKey}},{key:"setRenderKey",value:function(e){this.edgeEndRenderKey=e}},{key:"getRenderKey",value:function(e){return this.edgeEndRenderKey}},{key:"toString",value:function(){return"".concat(this.type," type Edge End")}},{key:"getDescription",value:function(){return"Edge end of ".concat(this.attachedToUUID)}},{key:"updateCardinality",value:function(e,t,a){this.cardinality.lowerBound=e,this.cardinality.upperBound=t,this.cardinality.visibility=a}},{key:"drawLines",value:function(e,t,a,n){e.strokeStyle=a,void 0!==n&&(e.fillStyle=n),e.beginPath(),e.moveTo(t[0].X,t[0].Y);for(var i=1;i<t.length;i++)e.lineTo(t[i].X,t[i].Y);void 0!==n&&(e.closePath(),e.fill()),e.stroke(),e.fillStyle="#000",e.strokeStyle="#000"}},{key:"drawArrowEnd",value:function(e,t,a,n,i){var r=Math.PI/6,l=n+Math.PI,s=[];s.push({X:t+7*Math.cos(l-r),Y:a+7*Math.sin(l-r)}),s.push({X:t,Y:a}),s.push({X:t+7*Math.cos(l+r),Y:a+7*Math.sin(l+r)}),this.drawLines(e,s,i)}},{key:"drawTriangleEnd",value:function(e,t,a,n,i){var r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"#FFF",l=7,s=Math.PI/6,o=n+Math.PI,c=[];c.push({X:t,Y:a}),c.push({X:t+l*Math.cos(o-s),Y:a+l*Math.sin(o-s)}),c.push({X:t+l*Math.cos(o+s),Y:a+l*Math.sin(o+s)}),c.push({X:t,Y:a}),this.drawLines(e,c,i,r)}},{key:"drawDiamondEnd",value:function(e,t,a,n,i){var r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"#FFF",l=7,s=Math.PI/9,o=n+Math.PI,c=[];c.push({X:t,Y:a}),c.push({X:t+l*Math.cos(o-s),Y:a+l*Math.sin(o-s)}),c.push({X:t+2*l*Math.cos(o),Y:a+2*l*Math.sin(o)}),c.push({X:t+l*Math.cos(o+s),Y:a+l*Math.sin(o+s)}),c.push({X:t,Y:a}),this.drawLines(e,c,i,r)}},{key:"draw",value:function(e,t,a,n,i){switch(this.type){case C:break;case k:this.drawArrowEnd(e,t,a,n,i);break;case M:this.drawTriangleEnd(e,t,a,n,i);break;case S:this.drawTriangleEnd(e,t,a,n,i,i);break;case V:this.drawDiamondEnd(e,t,a,n,i);break;case O:this.drawDiamondEnd(e,t,a,n,i,i);break;default:console.log("EdgeEnd had unexpected type: %s",this.type)}}},{key:"type",set:function(e){this.headType=e,this.semanticIdentity.name=this.toString()},get:function(){return this.headType}}]),e}(),Xe=function(){function e(t,a,n,i){Object(u.a)(this,e),this.typeName="Arrow",void 0!==i||null===t?this.semanticIdentity=i:t.length>1?this.semanticIdentity=new E("Arrow from "+t[0].semanticIdentity.UUID+" to "+t[1].semanticIdentity.UUID,"","","",void 0,[]):1===t.length?this.semanticIdentity=new E("Arrow connecting "+t[0].semanticIdentity.UUID,"","","",void 0,[]):this.semanticIdentity=new E("Arrow connecting 1 or less vertices","","","",void 0,[]),this.sourceEdgeEnd=new Ge(this.semanticIdentity.UUID),this.destEdgeEnd=new Ge(this.semanticIdentity.UUID),1===a.length&&a.push(a[0]),this.pathData=a,this.sourceVertexUUID=null,this.destVertexUUID=null,this.updateAttachedVertices(),this.rebuildPath(),this.lineColour=L,this.lineType=F,n===re.Edge||n===re.Specialisation||n===re.Visibility||console.log("Failed to find correct tool"),this.sourceEdgeEnd.type=C,n===re.Edge?(this.destEdgeEnd.type=C,this.typeName="Arrow"):n===re.Specialisation?(this.destEdgeEnd.type=M,this.typeName="Specialisation"):n===re.Visibility?(this.destEdgeEnd.type=k,this.lineType=P,this.typeName="Visibility"):(console.log("Failed to find correct tool"),this.destEdgeEnd.type=C),this.edgeType=n,this.selected=!1,this.sourceIsNavigable=!1,this.destIsNavigable=!1,this.sourceIsAggregation=!1,this.destIsAggregation=!1,this.arrowModelKey=ba(),this.arrowRenderKey=At(this.arrowModelKey)}return Object(h.a)(e,[{key:"setModelKey",value:function(e){this.arrowModelKey=e}},{key:"getModelKey",value:function(){return this.arrowModelKey}},{key:"setRenderKey",value:function(e){this.arrowRenderKey=e}},{key:"getRenderKey",value:function(){return this.arrowRenderKey}},{key:"toggleNavigable",value:function(e){0===e?this.sourceIsNavigable=!this.sourceIsNavigable:1===e&&(this.destIsNavigable=!this.destIsNavigable),this.sourceIsAggregation&&(this.sourceIsNavigable=!0),this.destIsAggregation&&(this.destIsNavigable=!0),this.sourceIsNavigable&&this.destIsNavigable?this.sourceIsAggregation?(this.sourceEdgeEnd.type=O,this.destEdgeEnd.type=k):this.destIsAggregation?(this.sourceEdgeEnd.type=k,this.destEdgeEnd.type=O):(this.sourceEdgeEnd.type=k,this.destEdgeEnd.type=k):this.sourceIsNavigable?this.sourceIsAggregation?(this.sourceEdgeEnd.type=O,this.destEdgeEnd.type=C):(this.sourceEdgeEnd.type=k,this.destEdgeEnd.type=C):this.destIsNavigable?this.destIsAggregation?(this.destEdgeEnd.type=O,this.sourceEdgeEnd.type=C):(this.destEdgeEnd.type=k,this.sourceEdgeEnd.type=C):(this.sourceEdgeEnd.type=C,this.destEdgeEnd.type=C)}},{key:"toggleAggregation",value:function(e){0===e?(this.sourceIsAggregation=!this.sourceIsAggregation,this.destIsAggregation&&this.sourceIsAggregation&&(this.destIsAggregation=!1)):(this.destIsAggregation=!this.destIsAggregation,this.destIsAggregation&&this.sourceIsAggregation&&(this.sourceIsAggregation=!1)),this.sourceIsAggregation?(this.sourceEdgeEnd.type=O,this.destIsNavigable?this.destEdgeEnd.type=k:this.destEdgeEnd.type=C):this.destIsAggregation?(this.destEdgeEnd.type=O,this.sourceIsNavigable?this.sourceEdgeEnd.type=k:this.sourceEdgeEnd.type=C):this.toggleNavigable(100)}},{key:"getNavigable",value:function(e){return 0===e?this.sourceIsNavigable:this.destIsNavigable}},{key:"getAggregation",value:function(e){return 0===e?this.sourceIsAggregation:this.destIsAggregation}},{key:"trimPath",value:function(){this.pathData=[this.pathData[0],this.pathData[this.pathData.length-1]],this.path=[this.path[0],this.path[this.path.length-1]]}},{key:"rebuildPath",value:function(){var e=this.getObjectUUIDList(),t=[];e.forEach((function(e){t.push(Ja(e))})),this.path=[];for(var a=0;a<this.pathData.length;a++){var n=this.pathData[a];0===n[0]?this.path.push(this.getZerothCasePathItem(t,n)):1===n[0]?this.path.push([n[1],n[2]]):console.error("Invalid PathData case, wrong case",n)}}},{key:"getZerothCasePathItem",value:function(e,t){for(var a=0;a<e.length;a++){if(null!==e[a]&&void 0!==e[a])if(e[a].semanticIdentity.UUID===t[1])return[t[2]*e[a].width+e[a].x,t[3]*e[a].realHeight+e[a].y]}return console.error("Could not find vertex to connect for pathItem",t),null}},{key:"getObjectUUIDList",value:function(){var e=this,t=[];return this.pathData.forEach((function(a){var n=e.pathData.indexOf(a);null==a&&(e.pathData[n]=[1,e.path[n][0],e.path[n][1]]),0===e.pathData[n][0]&&t.push(a[1])})),t}},{key:"updateAttachedVertices",value:function(){var e=this.pathData[0],t=this.pathData[this.pathData.length-1];0===e[0]?this.sourceVertexUUID=e[1]:this.sourceVertexUUID=null,0===t[0]?this.destVertexUUID=t[1]:this.destVertexUUID=null}},{key:"setSelected",value:function(e){this.selected=e}},{key:"updateSourceCardinality",value:function(e,t,a){this.sourceEdgeEnd.updateCardinality(e,t,a)}},{key:"getSourceCardinalityVisibility",value:function(){return this.sourceEdgeEnd.cardinality.isVisible}},{key:"toggleSourceCardinalityVisibility",value:function(){this.sourceEdgeEnd.cardinality.toggleVisibility()}},{key:"getSourceCardinalityLowerBound",value:function(){return this.sourceEdgeEnd.cardinality.lowerBound}},{key:"getSourceCardinalityUpperBound",value:function(){return this.sourceEdgeEnd.cardinality.upperBound}},{key:"updateDestCardinality",value:function(e,t,a){this.destEdgeEnd.updateCardinality(e,t,a)}},{key:"getDestCardinalityVisibility",value:function(){return this.destEdgeEnd.cardinality.isVisible}},{key:"toggleDestCardinalityVisibility",value:function(){this.destEdgeEnd.cardinality.toggleVisibility()}},{key:"getDestCardinalityLowerBound",value:function(){return this.destEdgeEnd.cardinality.lowerBound}},{key:"getDestCardinalityUpperBound",value:function(){return this.destEdgeEnd.cardinality.upperBound}},{key:"setStartLabel",value:function(e){this.sourceEdgeEnd.label=e}},{key:"setEndLabel",value:function(e){this.destEdgeEnd.label=e}},{key:"setLineColour",value:function(e){var t=B[e];void 0!==t?this.lineColour=t:console.log("Attempted to assign invalid lineColour: %s",e)}},{key:"setLineType",value:function(e){var t=H[e];void 0!==t?this.lineType=t:console.log("Attempted to assign invalid lineType: %s",e)}},{key:"createPathNodesForVertex",value:function(e,t,a){var n=t++,i=t++,r=t++,l=t++,s=t++,o=t++,c=t++,d=t++,u=[];return u.push([n,e.x-a,e.y+e.height+a,[d,i]]),u.push([i,e.x+e.width/2,e.y+e.height+a,[n,r]]),u.push([r,e.x+e.width+a,e.y+e.height+a,[i,l]]),u.push([l,e.x+e.width+a,e.y+e.height/2,[r,s]]),u.push([s,e.x+e.width+a,e.y-a,[l,o]]),u.push([o,e.x+e.width/2,e.y-a,[s,c]]),u.push([c,e.x-a,e.y-a,[s,d]]),u.push([d,e.x-a,e.y+e.height/2,[c,n]]),[t,u]}},{key:"drawStartHead",value:function(e){var t=Math.atan2(this.getSY()-this.getNSY(),this.getSX()-this.getNSX());this.sourceEdgeEnd.draw(e,this.getSX(),this.getSY(),t,this.lineColour)}},{key:"drawEndHead",value:function(e){var t=Math.atan2(this.getEY()-this.getNEY(),this.getEX()-this.getNEX());this.destEdgeEnd.draw(e,this.getEX(),this.getEY(),t,this.lineColour)}},{key:"isPathSegmentLR",value:function(e,t){var a=this.path[e][0],n=this.path[t][0],i=this.path[e][1],r=this.path[t][1];return Math.abs(a-n)>Math.abs(i-r)}},{key:"getTextOffsets",value:function(e,t,a,n,i){var r,l,s,o,c,d,u,h,f=e.measureText(t).width,m=e.measureText(a).width,v=e.measureText(n).width,y=e.measureText(i).width,g=e.measureText("M").width,p=!0,b=!0,x=!0,E=!0,w=this.path.length-2,N=this.path.length-1,I=this.isPathSegmentLR(0,1),C=this.isPathSegmentLR(w,N),k=this.path[0][0],M=this.path[0][1],S=this.path[1][0],V=this.path[1][1],O=this.path[w][0],U=this.path[w][1],D=this.path[N][0],L=this.path[N][1];return I?k>S&&(p=!p):M>V&&(b=!b),C?O>D&&(x=!x):U>L&&(E=!E),p?(r=g/2,c=I?g/2:-1*(v+g/2)):(r=-1*(f+g/2),c=I?-1*(v+g/2):g/2),b?(l=15,d=I?-7.5:l):(l=-7.5,d=I?l:-7.5),(x=!x)?(s=g/2,u=C?g/2:-1*(y+g/2)):(s=-1*(m+g/2),u=C?-1*(y+g/2):g/2),(E=!E)?(o=15,h=C?-7.5:o):(o=-7.5,h=C?15:o),[r,l,s,o,c,d,u,h]}},{key:"drawLabelsAndCardinalities",value:function(e){var t=this.sourceEdgeEnd.cardinality.toString(),a=this.destEdgeEnd.cardinality.toString(),n=this.getTextOffsets(e,this.sourceEdgeEnd.label,this.destEdgeEnd.label,t,a);e.fillStyle="#000",e.fillText(this.sourceEdgeEnd.label,this.getSX()+n[0],this.getSY()+n[1]),e.fillText(this.destEdgeEnd.label,this.getEX()+n[2],this.getEY()+n[3]),this.getSourceCardinalityVisibility()&&e.fillText(t,this.getSX()+n[4],this.getSY()+n[5]),this.getDestCardinalityVisibility()&&e.fillText(a,this.getEX()+n[6],this.getEY()+n[7])}},{key:"draw",value:function(e){switch(this.lineType){case F:e.setLineDash([]);break;case P:e.setLineDash([5,5]);break;default:console.log("Arrow had invalid lineType: %s",this.lineType)}e.strokeStyle=this.lineColour;for(var t=0;t<this.path.length-1;t++){var a=this.path[t],n=this.path[t+1];e.beginPath(),e.moveTo(a[0],a[1]),e.lineTo(n[0],n[1]),e.stroke()}if(e.strokeStyle="#000",e.setLineDash([]),this.drawStartHead(e),this.drawEndHead(e),this.drawLabelsAndCardinalities(e),this.selected)for(var i=0;i<this.path.length;i++){var r=this.path[i];dn(r[0],r[1])}}},{key:"intersects",value:function(e,t){for(var a=0;a<this.path.length-1;a++){var n=this.path[a],i=this.path[a+1];if(this.intersectsSegment(e,t,n,i))return!0}return!1}},{key:"intersectsSegment",value:function(e,t,a,n){return un(e,t,a[0],a[1])+un(e,t,n[0],n[1])-1<un(a[0],a[1],n[0],n[1])}},{key:"getSX",value:function(){return this.path[0][0]}},{key:"getSY",value:function(){return this.path[0][1]}},{key:"getNSX",value:function(){return this.path[1][0]}},{key:"getNSY",value:function(){return this.path[1][1]}},{key:"getNEX",value:function(){var e=this.path.length-2;return e<0&&(e=0),this.path[e][0]}},{key:"getNEY",value:function(){var e=this.path.length-2;return e<0&&(e=0),this.path[e][1]}},{key:"getEX",value:function(){return this.path[this.path.length-1][0]}},{key:"getEY",value:function(){return this.path[this.path.length-1][1]}}]),e}();function We(){var e=la.flatten(!0,!1),t=la.flatten(!1,!0),a=JSON.parse(JSON.stringify(at)),n=JSON.parse(JSON.stringify(vt())),i=JSON.parse(JSON.stringify(ot)),r=JSON.parse(JSON.stringify(pt())),l=JSON.parse(JSON.stringify(rt)),s=JSON.parse(JSON.stringify(wt())),o=JSON.parse(JSON.stringify(dt)),c=ya(),d=Ea(),u=ba(),h=ma(),f=ft();return{translationColumns:Oe,vertices:e,arrows:t,tree:a,packages:n,dPackages:i,treeVertex:r,dTreeVertex:l,graph:s,dGrraph:o,renderKeys:c,modelKeys:d,currentKey:h,currentMod:u,currentFol:f,modelName:ja()}}function Je(e){if(null!=e){var t,a=JSON.parse(e),n=Object(y.a)(a.treeVertex);try{for(n.s();!(t=n.n()).done;){var i=t.value;i.semanticIdentity=new E(i.semanticIdentity.name,i.semanticIdentity.description,i.semanticIdentity.abbreviation,i.semanticIdentity.shortAbbreviation,i.semanticIdentity.UUID,i.semanticIdentity.translations)}}catch(g){n.e(g)}finally{n.f()}var r,l=[],s=[],o=Object(y.a)(a.vertices);try{for(o.s();!(r=o.n()).done;){var c=r.value;console.log(c),c.semanticIdentity=new E(c.semanticIdentity.name,c.semanticIdentity.description,c.semanticIdentity.abbreviation,c.semanticIdentity.shortAbbreviation,c.semanticIdentity.UUID,c.semanticIdentity.translations),c=new Yt({newConstructor:1,loadedVertex:c}),l.push(c)}}catch(g){o.e(g)}finally{o.f()}var d,u=Object(y.a)(a.arrows);try{for(u.s();!(d=u.n()).done;){var h=d.value;h=v(h),s.push(h)}}catch(g){u.e(g)}finally{u.f()}Ye(a.translationColumns),yt(a.packages),gt(a.dPackages),bt(a.treeVertex),xt(a.dTreeVertex),Nt(a.graph),It(a.dGrraph),mt(a.tree),ha(a.renderKeys),fa(a.modelKeys),Xa(new I(l,s)),sn(),ht(1),va(1),xa(1),Aa(),console.log("load finished")}function f(e){return new E(e.name,e.description,e.abbreviation,e.shortAbbreviation,e.UUID,e.translations)}function m(e){return new Ge(e.attachedToUUID,e.headType,(t=e.cardinality,new ze(t.numLowerBound,t.numUpperBound,t.attachedToUUID,t.isVisible,f(t.semanticIdentity))),e.label,f(e.semanticIdentity));var t}function v(e){var t=new Xe(l,e.pathData,e.edgeType,f(e.semanticIdentity));return t.sourceEdgeEnd=m(e.sourceEdgeEnd),t.destEdgeEnd=m(e.destEdgeEnd),t}}function _e(e){Ye(e.translationColumns),yt(e.packages),gt(e.dPackages),bt(e.treeVertex),xt(e.dTreeVertex),Nt(e.graph),It(e.dGrraph),mt(e.tree),ha(e.renderKeys),fa(e.modelKeys),Xa(new I(e.vertices,e.arrows)),sn(),ht(e.currentFol),va(e.currentKey),xa(e.currentMod),Aa()}var qe=[],Ze=0;function $e(){var e=Object.assign({},We());if(0!==Ze){for(var t=0;t<Ze;t++)qe.shift();Ze=0}qe.unshift(e),qe.length>10&&qe.pop(),console.log("end"),console.log(qe)}var Qe="",et=null,tt=!1,at=[],nt=[],it=[],rt=[],lt=[],st=0,ot=[],ct=[],dt=[],ut=!1;function ht(e){st=e}function ft(){return st}function mt(e){at=e}function vt(){return nt}function yt(e){nt=e}function gt(e){ot=e}function pt(){return it}function bt(e){it=e}function xt(e){rt=e}function Et(){return nt.concat(it)}function wt(){return ct}function Nt(e){ct=e}function It(e){dt=e}function Ct(){console.log("below is modelObjects"),console.log(ct),ct.length>0?(va(ct[0].data.renderKey),xa(ct[0].data.modelKey),ht(ct[0].data.renderKey)):(va(1),xa(-1),ht(1));var e,t=Object(y.a)(la.flatten());try{for(t.s();!(e=t.n()).done;){var a=e.value;"Vertex"===a.typeName&&a.getModelKey()===ba()?a.setPresent():a.getModelKey()!==ba()&&"Vertex"===a.typeName&&a.setAway()}}catch(n){t.e(n)}finally{t.f()}Aa()}function kt(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;ga();var a={text:e+" \ud83d\udcc1",children:at[ya()],data:NaN,state:{opened:!0},type:"Folder",typeName:"Folder",renderKey:ya(),parentRenderKey:t};ot.push(a);var n={text:e+" \ud83d\udcc1",children:at[ya()],data:ot[nt.length],state:{opened:!0},type:"Folder",typeName:"Folder",renderKey:ya(),parentRenderKey:t};nt.push(n),ut=!0}function Mt(e){if(console.log("below is the selected render key"),console.log(e),nt.length>1){for(var t=0;t<nt.length;t++)nt[t].renderKey===e&&(console.log("below is folderdata"),console.log(nt),St(nt[t]),ot.splice(t,1),nt.splice(t,1));ut=!0}else console.log("Cannot delete only folder");Ct()}function St(e){for(var t=e.children,a=0;a<t.length;a++){if("Folder"===t.type)Mt(t[a].renderKey);else if("Model"===t.type){jt(t[a].modelKey)}}}function Vt(e){if(e.children.length>0)for(var t=e.children,a=0;a<t.length;a++)for(var n=t[a].children,i=0;i<n.length;i++){if(n[i].modelkey===e.modelKey)Ka(n[i].data)}}function Ot(e,t){if(""!==e){for(var a=0;a<nt.length;a++)if(nt[a].renderKey===t){nt[a].text=e+" \ud83d\udcc1";break}}else console.log("Cannot have empty name")}function Ut(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;ga();var a=new E(e,"","","",void 0,[]),n={text:e+" \ud83d\udfe7",children:at[ya()],data:NaN,state:{opened:!0},type:"treeVertex",typeName:"VertexNode",originalVertex:!0,renderKey:ya(),parentRenderKey:t,content:"content",colour:"#FFD5A9",height:50,width:70,icons:[[],[],[]],imageElements:{},fontSize:12,semanticIdentity:a};rt.push(n);var i={text:e+" \ud83d\udfe7",children:at[ya()],data:rt[it.length],state:{opened:!0},type:"treeVertex",typeName:"VertexNode",originalVertex:!0,renderKey:ya(),parentRenderKey:t,content:"",colour:"#FFD5A9",height:50,width:70,icons:[[],[],[]],imageElements:{},fontSize:12,semanticIdentity:a};return it.push(i),!0,i}function Dt(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ft(),a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;wa();var n=void 0,i=" \ud83d\udcc8";if(void 0!==a?(n=a,i=" \u26f6"):n=new E(e,"","","",void 0,[]),!(t<=0)){var r={text:e+i,children:[],data:NaN,state:{opened:!0},type:"Model",typeName:"Model",renderKey:t,modelKey:Ea(),semanticIdentity:n};dt.push(r);var l={text:e+i,children:[],data:dt[ct.length],state:{opened:!0},type:"Model",typeName:"Model",renderKey:t,modelKey:Ea(),semanticIdentity:n};ct.push(l),!0}}function Lt(e){var t,a=Object(y.a)(la.flatten());try{for(a.s();!(t=a.n()).done;){var n=t.value;n.originalUUID===e&&la.remove(n)}}catch(r){a.e(r)}finally{a.f()}for(var i=0;i<it.length;i++)it[i].semanticIdentity.UUID===e&&(it.splice(i,1),rt.splice(i,1));Aa()}function jt(e){for(var t=0;t<ct.length;t++)ct[t].modelKey===e&&(console.log("model deleted below"),console.log(ct[t]),Vt(ct[t]),ct.splice(t,1),dt.splice(t,1));Ct()}function Tt(e,t){for(var a=0;a<ct.length;a++)if(ct[a].modelKey===t){ct[a].text=e+" \ud83d\udcc8";break}}function At(e){for(var t=0;t<ct.length;t++)if(ct[t].modelKey===e)return ct[t].renderKey}function Kt(e){var t,a=[],n=0,i=Object(y.a)(at);try{for(i.s();!(t=i.n()).done;){var r=t.value;void 0!==r&&"Model"===r.type&&r.renderKey===e&&a.push(at[n]),n+=1}}catch(l){i.e(l)}finally{i.f()}return a}function Bt(e){var t,a=[],n=Object(y.a)(Et());try{for(n.s();!(t=n.n()).done;){var i=t.value;i.parentRenderKey===e&&a.push(i)}}catch(r){n.e(r)}finally{n.f()}return a}function Ft(e){return ct.find((function(t){return t.modelKey===e})).text}var Pt=!1,Rt=function(e){Object(m.a)(a,e);var t=Object(v.a)(a);function a(e){var n;Object(u.a)(this,a),n=t.call(this,e),at=[],!1===Pt&&(kt("Package"),kt("Package 2"),Dt("Graph",1),Dt("Graph 2",2),kt("Subfolder",1),Ut("Vertex",1),Ut("Vertex 2",2),va(1),xa(1),ht(1),Pt=!0,$e());var i,r=Object(y.a)(ct);try{for(r.s();!(i=r.n()).done;){var l=i.value;at.push(l)}}catch(F){r.e(F)}finally{r.f()}var s,o=Object(y.a)(Et());try{for(o.s();!(s=o.n()).done;){var c=s.value,d=Kt(c.renderKey),h=Bt(c.renderKey),f=d.concat(h);c.children=f}}catch(F){o.e(F)}finally{o.f()}var m,v=Object(y.a)(Et());try{for(v.s();!(m=v.n()).done;){var g=m.value,p=new w;void 0!==p.toTreeViewElement("Arrow Folder",g.renderKey)&&g.children.push(p.toTreeViewElement("Arrow Folder",g.renderKey))}}catch(F){v.e(F)}finally{v.f()}var b,x=Object(y.a)(pt());try{for(x.s();!(b=x.n()).done;){var E=b.value;0===E.children.length?(E.text=E.text.replace(" \ud83d\udfe7",""),E.text=E.text.replace(" \ud83d\udcc2",""),E.text=E.text+" \ud83d\udfe7"):(E.text=E.text.replace(" \ud83d\udfe7",""),E.text=E.text.replace(" \ud83d\udcc2",""),E.text=E.text+" \ud83d\udcc2")}}catch(F){x.e(F)}finally{x.f()}lt=[];var N,I=Object(y.a)(Et());try{for(I.s();!(N=I.n()).done;){var C=N.value;0===C.parentRenderKey&&lt.push(C)}}catch(F){I.e(F)}finally{I.f()}if(n.state={data:{core:{data:[{text:ja(),children:lt,state:{opened:!0},root:!0}]}},selectedVertex:null},!0===tt){var k,M=ja(),S="",V="",O="",U=0,D=Object(y.a)(Et());try{for(D.s();!(k=D.n()).done;){var L,j=k.value,T=Object(y.a)(j.children);try{for(T.s();!(L=T.n()).done;){var A=L.value;if(0===U){var K,B=Object(y.a)(A.children);try{for(B.s();!(K=B.n()).done;){K.value.text===et.title&&(S=j.text,V="Vertices",O=et.title,Qe=M+"::"+S+"::"+V+"::"+O,U=1)}}catch(F){B.e(F)}finally{B.f()}}}}catch(F){T.e(F)}finally{T.f()}}}catch(F){D.e(F)}finally{D.f()}}return!0===ut&&(ut=!1),n}return Object(h.a)(a,[{key:"componentDidMount",value:function(){document.getElementById("LowerPanel").addEventListener("dragstart",this.dragStart)}},{key:"componentDidUpdate",value:function(){}},{key:"componentWillUnmount",value:function(){document.getElementById("LowerPanel").removeEventListener("dragstart",this.dragStart)}},{key:"dragStart",value:function(e){e.target.click();var t,a=0,n=Object(y.a)(Et());try{for(n.s();!(t=n.n()).done;){var i=t.value;ft()===i.renderKey&&(a=i)}}catch(l){n.e(l)}finally{n.f()}var r=a;console.log("drag starts..."),"treeVertex"===a.type?e.dataTransfer.setData("text/plain",r.semanticIdentity.UUID):console.log("This object has no drag/drop feature")}}]),Object(h.a)(a,[{key:"handleElementSelect",value:function(e,t){try{if(console.log(t.node.data),"Vertex Folder"===t.node.type);else if("Folder"===t.node.data.type||"treeVertex"===t.node.data.type)ht(t.node.data.renderKey);else if("Model"===t.node.data.type){xa(t.node.data.modelKey),va(t.node.data.renderKey),ht(t.node.data.renderKey);var a,n=Object(y.a)(la.flatten());try{for(n.s();!(a=n.n()).done;){var i=a.value;"Vertex"===i.typeName&&i.getModelKey()===ba()?i.setPresent():i.getModelKey()!==ba()&&"Vertex"===i.typeName&&i.setAway()}}catch(h){n.e(h)}finally{n.f()}}else if(1===t.selected.length&&null!==t.node.data&&void 0===t.node.data.type){var r,l=t.node.data.semanticIdentity.UUID,s=Object(y.a)(la.flatten());try{for(s.s();!(r=s.n()).done;){var o=r.value;if(o.semanticIdentity.UUID===l){this.setState({selectedVertex:o}),va(o.vertexRenderKey),xa(o.vertexModelKey),ht(o.vertexRenderKey);var c,d=Object(y.a)(la.flatten());try{for(d.s();!(c=d.n()).done;){var u=c.value;"Vertex"===u.typeName&&u.getModelKey()===ba()?u.setPresent():u.getModelKey()!==ba()&&"Vertex"===u.typeName&&u.setAway()}}catch(h){d.e(h)}finally{d.f()}this.props.setLeftMenu(this.state.selectedVertex)}}}catch(h){s.e(h)}finally{s.f()}}else this.setState({selectedVertex:null});Aa()}catch(e){}try{!0===t.node.original.root&&ht(0)}catch(e){}}},{key:"handleContextMenu",value:function(){console.log("CM triggered for tree")}},{key:"render",value:function(){var e=this,t=this.state.data;return i.a.createElement("div",null,i.a.createElement(b.a,{treeData:t,onChange:function(t,a){return e.handleElementSelect(t,a)},className:"treeview",id:"treeview",draggable:"true"}))}}]),a}(i.a.Component),Ht=5,Yt=function(){function e(t){var a=t.title,n=void 0===a?"unnamed":a,i=t.content,r=t.colour,l=t.x,s=t.y,o=t.width,c=t.height,d=t.semanticIdentity,h=t.newConstructor,f=void 0===h?0:h,m=t.loadedVertex,v=void 0===m?0:m;Object(u.a)(this,e),console.log(f),1===f?(console.log(v),this.typeName=v.typeName,this.semanticIdentity=v.semanticIdentity,this.title=v.title,this.content=v.content,this.colour=v.colour,this.x=v.x,this.y=v.y,this.icons=v.icons,this.selected=!1,this.imageElements=v.imageElement,this.fontSize=12,this.orignalVertex=v.orignalVertex,this.originalUUID=v.originalUUID,this.Origin=v.Origin,this.width=v.width,this.height=v.height,this.realHeight=v.realHeight,this.isAbstract=v.isAbstract,this.vertexPath=v.vertexPath,this.vertexModelKey=v.vertexModelKey,this.vertexRenderKey=v.vertexRenderKey,this.renderedx=v.renderedx,this.renderedy=v.renderedy,this.awayx=v.awayx,this.awayy=v.awayy,this.status=v.status):(this.typeName="Vertex",this.semanticIdentity=void 0!==d?d:new E(n,"","","",void 0,[]),this.title=n,this.content=void 0===i?"":i,this.colour=r,this.x=l,this.y=s,this.icons=[[],[],[]],this.selected=!1,this.imageElements={},this.fontSize=12,this.orignalVertex=!0,this.originalUUID=this.originalUUID,this.isContainer=!1,this.Origin="",this.width=o,this.height=c,this.realHeight=c,this.width=Math.max(o,30),this.height=Math.max(c,30),this.isAbstract=!1,this.vertexPath="",this.vertexModelKey=ba(),this.vertexRenderKey=At(this.vertexModelKey),this.renderedx=l,this.renderedy=s,this.awayx=Math.floor(2e6*Math.random())+1e5,this.awayy=Math.floor(2e6*Math.random())+1e5,this.status="present")}return Object(h.a)(e,[{key:"setAway",value:function(){"present"===this.status&&(this.renderedx=this.x,this.renderedy=this.y,this.x=this.awayx,this.y=this.awayy,this.status="away")}},{key:"setPresent",value:function(){"away"===this.status&&(this.x=this.renderedx,this.y=this.renderedy,this.status="present")}},{key:"setModelKey",value:function(e){this.vertexModelKey=e}},{key:"getModelKey",value:function(){return this.vertexModelKey}},{key:"getSemantic",value:function(){return this.SemanticIdentity}},{key:"setSemantic",value:function(e){this.SemanticIdentity=e}},{key:"setRenderKey",value:function(e){this.vertexRenderKey=e}},{key:"getRenderKey",value:function(){return this.vertexRenderKey}},{key:"setPath",value:function(e){this.vertexPath=e}},{key:"getPath",value:function(){return this.vertexPath}},{key:"setSelected",value:function(e){this.selected=e}},{key:"getColour",value:function(){return this.colour}},{key:"setColour",value:function(e){this.colour=e}},{key:"setTitle",value:function(e){this.title=e,this.semanticIdentity.name=e}},{key:"setContent",value:function(e){this.content=e,this.semanticIdentity.description=e}},{key:"getAbstract",value:function(){return this.isAbstract}},{key:"toggleAbstract",value:function(){this.isAbstract=!this.isAbstract}},{key:"setOrigin",value:function(e){this.Origin=e}},{key:"getOrigin",value:function(){return this.Origin}},{key:"getContentAsString",value:function(){if(null!==this.content){for(var e="",t=0;t<this.content.length;t++)e=e.concat(this.content[t]),t<this.content.length-1&&(e=e.concat("\n"));return e}return""}},{key:"setIcon",value:function(e){var t=this.icons[0],a=this.icons[1],n=this.icons[2],i=t.indexOf(e);-1===i?(t.push(e),a.push(!0),n.push(!1)):a[i]=!a[i],!1===n[i]&&!1===a[i]&&(a.splice(i,1),n.splice(i,1),t.splice(i,1))}},{key:"setText",value:function(e){var t=this.icons[0],a=this.icons[1],n=this.icons[2],i=t.indexOf(e);-1===i?(t.push(e),a.push(!1),n.push(!0)):n[i]=!n[i],!1===n[i]&&!1===a[i]&&(a.splice(i,1),n.splice(i,1),t.splice(i,1))}},{key:"isIconSet",value:function(e){var t=this.icons[0].indexOf(e);return-1!==t&&this.icons[1][t]}},{key:"isTextSet",value:function(e){var t=this.icons[0].indexOf(e);return-1!==t&&this.icons[2][t]}},{key:"getBounds",value:function(){return[this.x,this.y,this.x+this.width,this.y+this.realHeight-Ht]}},{key:"expandSide",value:function(e,t,a,n){var i=0,r=0,l=this.hasContent()?4*Ht:2*Ht;switch(e){case"topLeft":r+=this.y+this.height,this.y=a,this.height=r-this.y,i+=this.x+this.width,this.x=t,this.width=i-this.x;break;case"topRight":r+=this.y+this.height,this.y=a,this.height=r-this.y,this.width=t-this.x;break;case"bottomLeft":this.height=a-this.y-this.iconAreaHeight-this.contentHeight-l,i+=this.x+this.width,this.x=t,this.width=i-this.x;break;case"bottomRight":this.height=a-this.y-this.iconAreaHeight-this.contentHeight-l,this.width=t-this.x;break;case"left":i+=this.x+this.width,this.x=t,this.width=i-this.x;break;case"right":this.width=t-this.x;break;case"top":r+=this.y+this.height,this.y=a,this.height=r-this.y;break;case"bottom":this.height=a-this.y-this.iconAreaHeight-this.contentHeight-l}this.height=Math.max(this.height,12+Ht),this.draw(n)}},{key:"increaseWidthIfNecessary",value:function(e,t){t>this.width&&(this.width=t)}},{key:"hasContent",value:function(){return!(""===this.content[0]&&1===this.content.length)}},{key:"draw",value:function(e){for(var t=this,a=this.icons[0].length,n=0;n<this.icons[0].length;n++)!0===this.icons[1][n]?!0===this.icons[2][n]&&this.increaseWidthIfNecessary(e,20+e.measureText("<< "+this.icons[0][n]+" >>").width):!0===this.icons[2][n]&&this.increaseWidthIfNecessary(e,e.measureText("<< "+this.icons[0][n]+" >>").width);this.increaseWidthIfNecessary(e,e.measureText(this.title+this.Origin).width);for(var i=0;i<this.content.length;i++)this.increaseWidthIfNecessary(e,e.measureText(this.content[i]).width+2*Ht);Ht=5,this.is&&(e.font=this.fontSize+"px Segoe UI"),e.fontSize=this.fontSize;var r=e.measureText(this.title+this.Origin).width,l=Math.max(r+2*Ht,this.width);this.contentHeight=0;for(var s=0;s<this.content.length;s++){var o=e.measureText(this.content[s]);l=Math.max(l,o.width,r),this.contentHeight+=this.fontSize+Ht}this.hasContent()||(this.contentHeight=0),l>this.width&&(this.width=l),e.shadowOffsetX=2,e.shadowOffsetY=2,this.iconAreaHeight=24*a,""!==this.content[0]?this.realHeight=4*Ht+this.height+this.iconAreaHeight+this.contentHeight:this.realHeight=2*Ht+this.height+this.iconAreaHeight,e.fillStyle=this.colour,e.fillRect(this.x,this.y,this.width,this.realHeight),e.strokeRect(this.x,this.y,this.width,this.realHeight),""!==this.content[0]&&e.strokeRect(this.x,this.y,this.width,this.height+this.iconAreaHeight+2*Ht),this.selected&&(e.fillStyle="#000000",dn(this.x,this.y),dn(this.x+this.width,this.y),dn(this.x,this.y+this.realHeight),dn(this.x+this.width,this.y+this.realHeight));var c=this.y+2,d=this.x+this.width+2;function u(t){var a=t.height,n=t.width,i=20/a;e.drawImage(t,d-4-n*i,c,n*i,a*i),c+=24}for(var h=function(a){if(!0===t.icons[1][a]){!0===t.icons[2][a]&&t.increaseWidthIfNecessary(e,20+e.measureText("<< "+t.icons[0][a]+" >>").width);var n=t.imageElements[t.icons[0][a]];if(void 0===n){var i=new Image;i.src=Un+"/icons/"+t.icons[0][a],i.crossOrigin="anonymous",i.onload=function(){u(i),t.imageElements[t.icons[0][a]]=i}}else u(n)}else c+=24},f=0;f<this.icons[0].length;f++)h(f);e.fillStyle="#000000";var m=Ht+this.fontSize;e.shadowOffsetX=0,e.shadowOffsetY=0;for(var v=this.x+2,y=this.y+20,g=0;g<this.icons[0].length;g++){if(!0===this.icons[2][g]){!0!==this.icons[1][g]&&this.increaseWidthIfNecessary(e,e.measureText("<< "+this.icons[0][g]+" >>").width);var p="<< "+this.icons[0][g].slice(0,-4)+" >>";"_n"===this.icons[0][g].slice(-6,-4)&&(p=""),e.fillText(p,v,y)}y+=24}this.increaseWidthIfNecessary(e,e.measureText(this.Origin+this.title).width),this.isAbstract?e.font="italic "+this.fontSize+"px Segoe UI":e.font=this.fontSize+"px Segoe UI",e.fillText(this.Origin+this.title,this.x+Ht,this.y+m+this.iconAreaHeight),m=2*Ht+this.height+this.contentHeight,e.font=this.fontSize+"px Segoe UI";for(var b=0;b<this.content.length;b++)this.increaseWidthIfNecessary(e,e.measureText(this.content[b]).width+2*Ht),e.fillText(this.content[b],this.x+Ht,this.y+m+this.iconAreaHeight),m+=this.fontSize+Ht;e.strokeStyle="black"}},{key:"intersects",value:function(e,t){return!(e<this.x)&&(!(t<this.y)&&(!(e>this.x+this.width)&&t<=this.y+this.realHeight))}},{key:"getNearestSideFrom",value:function(e,t){return this.getNearestSide(e,t)}},{key:"getNearestSide",value:function(e,t){var a=[];if(e>this.x&&e<this.x+this.width){var n=(e-this.x)/this.width;a.push([Math.abs(t-this.y),n,0]),a.push([Math.abs(t-(this.y+this.realHeight)),n,1])}else if(t>this.y&&t<this.y+this.realHeight){var i=(t-this.y)/this.realHeight;a.push([Math.abs(e-this.x),0,i]),a.push([Math.abs(e-(this.x+this.width)),1,i])}var r=!1;if(a.forEach((function(e){e[0]<Ra&&(r=!0)})),!1===r&&e>this.x&&e<this.x+this.width&&t>this.y&&t<this.y+this.realHeight){for(var l=(t-this.y)/this.realHeight,s=(e-this.x)/this.width,o=Math.abs(s-1)*this.width,c=l*this.realHeight,d=s*this.width,u=0,h=d,f=[d,o,c,l*this.realHeight],m=1;m<f.length-1;m++)f[m]<h&&(h=f[m],u=m);if(0===u)return[0,0,l];if(1===u)return[0,1,l];if(2===u)return[0,s,0];if(3===u)return[0,s,1]}if(0===a.length)return null;for(var v=a[0],y=1;y<a.length;y++)a[y][0]<v[0]&&(v=a[y]);return v}}]),e}(),zt=!1,Gt=!1,Xt=[],Wt=function(e){Object(m.a)(a,e);var t=Object(v.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).ocm=function(e){e.preventDefault()},n.mouseDown=function(e,t){var a=yn(e),i=a[0],r=a[1];if(n.setState({startX:i,startY:r}),e.shiftKey&&!Gt&&(Gt=!0),0===e.button&&!zt){var l=hn(i,r);null!==l&&t.tool===re.Select&&"Vertex"===l.typeName?(e.preventDefault(),n.props.setLeftMenu(hn(i,r)),rn(t,i,r,null,Gt)):(n.props.setLeftMenu(hn(i,r)),Za(t,i,r),qa(t,i,r))}if(e.ctrlKey&&!zt&&(zt=!0),0===e.button&&zt){var s=hn(i,r);if(null===s&&(n.props.setLeftMenu(s,!1,Xt),Xt=[],zt=!1),null!==s){for(var o=0;o<Xt.length-1;){for(var c=o+1;c<Xt.length;c++)Xt[o].x===Xt[c].x&&Xt[o].y===Xt[c].y&&Xt.splice(c);o++}console.log(Xt),Xt.push(hn(i,r)),rn(t,i,r,Xt);for(var d=0;d<Xt.length;d++)n.props.setLeftMenu(Xt[d],zt)}}1===e.button&&(e.preventDefault(),rn(t,i,r))},n.mouseUp=function(e,t){on();var a=yn(e),n=a[0],i=a[1];0===e.button&&(t.tool===re.Select?Aa():function(e,t,a){if(Oa)return void(Oa=!1);if(!0===Ma)return Ma=!1,void(Jt.onmousemove=null);if(Jt.onmousemove=null,Wa())if(Ha(t,a).snapped&&!Va){var n=hn(t,a),i=null;null!==Ia[0]&&null!==n&&null!==sa&&(i=vn(e,qt,Zt,t,a)),Ia=[],Va=!0,null!==i&&Ga(i),Aa();var r=0;la.flatten().forEach((function(e){"Arrow"===e.typeName&&(sa[r]=e.path,r++)})),null!==i&&e.props.setLeftMenu(i),e.props.setMode(re.Select),null!==$t&&null!==n&&function(e){var t=[],a=[],n=[],i=[],r=[],l=[],s=[],o=[],c=(f=$t,m=e,f.width*(f.height+10)<=m.width*(m.height+10)?[m,f]:[f,m]),d=Object(g.a)(c,2),u=d[0],h=d[1];var f,m;la.flatten().forEach((function(e){if("Arrow"===e.typeName)if(u.y+u.height+10<h.y&&h.x>u.x&&h.x+h.width<u.x+u.width){var c=Qa(n,i,u,e,0),d=Object(g.a)(c,2);n=d[0],i=d[1]}else if(u.y>h.y+h.height+10&&h.x>u.x&&h.x+h.width<u.x+u.width){var f=Qa(t,a,u,e,1),m=Object(g.a)(f,2);t=m[0],a=m[1]}else if(u.x>h.x+h.width&&h.y>u.y&&h.y+h.height+10<u.y+u.height+10){console.log("left ran");var v=tn(r,l,u,e,1),y=Object(g.a)(v,2);r=y[0],l=y[1]}else if(u.x+u.width<h.x&&h.y>u.y&&h.y+h.height+10<u.y+u.height+10){console.log("right ran");var p=tn(s,o,u,e,0),b=Object(g.a)(p,2);s=b[0],o=b[1]}})),en(u,n,i,0),en(u,t,a,1),an(u,r,l,1),an(u,s,o,0)}(n),$t=null}else $t=hn(t,a),Ia.push(Ha(t,a).coord),Ca=t,ka=a,Jt.onmousemove=function(t){nn(t,e)},Va=!1;if(e.tool===re.Vertex){var l=vn(e,qt,Zt,t,a);Ga(l),e.props.setLeftMenu(l),e.props.setMode(re.Select),$e()}if(e.tool===re.Artifact){var s=function(e,t,a){la.flatten();if(e.tool===re.Artifact){var n=gn(t,a,t+450,a+50),i=Fa(n[1],0),r=Fa(n[3],0);return new Yt({title:"",content:[""],x:n[0],y:Fa(a,1),width:n[2]-n[0],height:r-i})}return null}(e,qt,Zt);Ga(s),e.props.setLeftMenu(s),e.props.setMode(re.Select)}if(e.tool===re.Container){var o=function(e,t,a){la.flatten();if(e.tool===re.Container){var n=gn(t,a,t+100,a+60),i=Fa(n[1],0),r=Fa(n[3],0),l=new Yt({title:"new Container",content:[""],x:n[0],y:Fa(a,1),width:n[2]-n[0],height:r-i});return l.setIsContainer(!0),l}return null}(e,qt,Zt);o.setColour("#FFFFFF"),Ga(o),e.props.setLeftMenu(o),e.props.setMode(re.Select)}Aa()}(t,n,i)),e.button,e.shiftKey&&Gt&&(Gt=!1),1===e.button&&window.setTimeout((function(){on()}),200),!0===La&&function(e,t,a){var n=Na,i=0;null!==la.flatten()&&null!==n&&(la.flatten().forEach((function(e){"Vertex"===e.typeName&&(n.x===e.x&&n.y===e.y||n.y>e.y+e.height+10||n.x>e.x+e.width||e.x>n.x+n.width||e.y>n.y+n.height+10||(n.x=Ua[0],n.y=Ua[1],n.width=Da[0],n.height=Da[1],i++))})),0===i&&(Ua=[n.x,n.y],Da=[n.width,n.height]),La=!1,Aa())}()},n.canvasRef=i.a.createRef(),n.state={},n}return Object(h.a)(a,[{key:"componentWillReceiveProps",value:function(e,t){this.zoom=e.mainState.zoomLevel,this.tool=e.mainState.drawMode}},{key:"componentDidMount",value:function(){this.zoom=this.props.mainState.zoomLevel,this.tool=this.props.mainState.drawMode,document.getElementById("Canvas").addEventListener("dragenter",this.dragEnter),document.getElementById("Canvas").addEventListener("dragover",this.dragOver),document.getElementById("Canvas").addEventListener("dragleave",this.dragLeave),document.getElementById("Canvas").addEventListener("drop",this.drop)}},{key:"componentWillUnmount",value:function(){document.getElementById("Canvas").removeEventListener("dragenter",this.dragEnter),document.getElementById("Canvas").removeEventListener("dragover",this.dragOver),document.getElementById("Canvas").removeEventListener("dragleave",this.dragLeave),document.getElementById("Canvas").removeEventListener("drop",this.drop)}},{key:"dragEnter",value:function(e){e.preventDefault()}},{key:"dragOver",value:function(e){e.preventDefault()}},{key:"dragLeave",value:function(e){return 0}},{key:"drop",value:function(e){if(ba()<=0)console.log("attempted to drag and drop vertex while there are no available models to draw on"),window.alert("You need to create and select a graph first before you can start drawing!");else{console.log("dropped"),console.log(ba());var t,a=e.dataTransfer.getData("text/plain"),n=0,i=Object(y.a)(pt());try{for(i.s();!(t=i.n()).done;){var r=t.value;r.semanticIdentity.UUID===a&&(n=r)}}catch(w){i.e(w)}finally{i.f()}var l,s=yn(e),o=n.text.replace(" \ud83d\udfe7","");o=o.replace(" \ud83d\udcc2","");var c=!1;n.parentRenderKey!==ma()?(l="#FFFFFF",c=!0):l=n.colour;var d=(f=s[0],m=s[1],v=n.width,g=n.height,p=o,b=n.content,x=l,n.icons,n.imageElements,n.fontSize,E=n.semanticIdentity,new Yt({title:p,content:b,colour:x,x:f,y:Fa(m,1),width:v,height:g,semanticIdentity:E}));if(!0===c){var u=(h=n.parentRenderKey,Et().find((function(e){return e.renderKey===h})).text);u=(u=u.replace(" \ud83d\udfe7","")).replace(" \ud83d\udcc1",""),d.setOrigin(u+" :: ")}Ga(d),Aa(),$e()}var h,f,m,v,g,p,b,x,E}},{key:"mouseLeave",value:function(){Jt.onmousemove={},Va=!0,Aa()}},{key:"render",value:function(){var e=this;return i.a.createElement("canvas",{ref:this.canvasRef,id:"drawCanvas",onContextMenu:function(t){return e.ocm(t)},onMouseDown:function(t){return e.mouseDown(t,e)},onMouseUp:function(t){return e.mouseUp(t,e)},onMouseLeave:function(t){return e.mouseLeave(t,e)}},i.a.createElement("p",null," HTML5 Canvas elements are not supported by your browser"))}}]),a}(i.a.Component);window.addEventListener("resize",Ta);var Jt,_t,qt,Zt,$t,Qt,ea,ta,aa,na=!1,ia=70,ra=200,la=new I,sa=[],oa=0,ca=0,da=0,ua=0;function ha(e){ca=e}function fa(e){ua=e}function ma(){return oa}function va(e){oa=e}function ya(){return ca}function ga(){ca=ca+=1}function pa(){return la}function ba(){return da}function xa(e){da=e;try{document.getElementById("SelectedModel").value=Ft(e)}catch(t){}}function Ea(){return ua}function wa(){ua=ua+=1}var Na,Ia=[],Ca=0,ka=0,Ma=!1,Sa=0,Va=!0,Oa=!1,Ua=[],Da=[],La=!1;function ja(){var e=document.getElementById("ModelName");return null===e||""===e.value||null===e.value||void 0===e.value?"Root":e.value}function Ta(){try{var e=Jt.getBoundingClientRect();Qt=e.left,ea=e.top,function(){var e=document.getElementsByClassName("Canvas")[0],t=+getComputedStyle(e).getPropertyValue("height").slice(0,-2),a=+getComputedStyle(e).getPropertyValue("width").slice(0,-2);Jt.setAttribute("height",t*pn()),Jt.setAttribute("width",a*pn()),ta=Jt.width,aa=Jt.height}(),bn()}catch(t){console.error("Failed to acquire canvas element")}Aa()}function Aa(){sn(),bn(),_t.resetTransform(),_t.scale(pn(),pn()),la.flatten().forEach((function(e){null!==e&&e.getModelKey()===da&&e.draw(_t)}))}function Ka(e){null!==e?la.remove(e)||console.error("Failed to delete object with UUID %s",e.semanticIdentity.UUID):console.error("Attempted to delete a null element"),Aa()}function Ba(e){console.log("vDeleteE occurs");var t=la.ArrowUUIDSource(e),a=la.ArrowUUIDDest(e);t.forEach((function(e){return la.remove(e.arrow)})),a.forEach((function(e){return la.remove(e.arrow)})),null!==e?(console.log("vdl if staement pass"),la.remove(e)||console.error("Failed to delete object with UUID %s",e.semanticIdentity.UUID)):console.error("Attempted to delete a null element"),Aa()}function Fa(e,t){var a=aa/ia*ra/100*200/ra;return a*Math.floor(e/a)+a/2*+t}function Pa(e,t){for(var a=la.flatten(),n=0;n<a.length;n++){var i=a[n];if("Vertex"===i.typeName){var r=i.getBounds(),l=r[0],s=r[1],o=r[2],c=r[3],d=Math.abs(s-t)<10,u=Math.abs(c-t)<10,h=Math.abs(l-e)<10,f=Math.abs(o-e)<10,m=t>s&&t<c,v=e>l&&e<o;if(f&&m)return[i,"right"];if(d&&h)return[i,"topLeft"];if(d&&f)return[i,"topRight"];if(u&&h)return[i,"bottomLeft"];if(u&&f)return[i,"bottomRight"];if(h&&m)return[i,"left"];if(f&&m)return[i,"right"];if(d&&v)return[i,"top"];if(u&&v)return[i,"bottom"]}}return[null,null]}var Ra=15;function Ha(e,t){var a=null,n=0;la.flatten().forEach((function(i){if(null!==i&&"Vertex"===i.typeName){var r=i.getNearestSideFrom(e,t,Ca,ka);null!==r&&r[0]<Ra&&(null===a||r[0]<n)&&(a=[0,i.semanticIdentity.UUID,r[1],r[2]],n=r[0])}}));var i=a;if(null===a&&(i=[1,e,t]),Ia.length<1||0===i[0])return{coord:i,snapped:null!==a,nearest:a};var r=Ia[Ia.length-1][1],l=Ia[Ia.length-1][2],s=i[1]-r,o=i[2]-l,c=Math.atan2(o,s)*(180/Math.PI),d=(c=(c+360)%360)%90;if(d>82||d<8){for(var u=un(0,0,s,o),h=[0,90,180,270,360],f=h[0],m=1;m<h.length;m++)Math.abs(h[m]-c)<Math.abs(f-c)&&(f=h[m]);var v=f*(Math.PI/180),y=u*Math.cos(v),g=u*Math.sin(v);i=[i[0],r+y,l+g]}return{coord:i,snapped:null!==a,nearest:a}}function Ya(e){return e.props.mainState.selectedObject}function za(e,t){var a=yn(e);t[0].expandSide(t[1],a[0],a[1],_t),function(){var e=0;la.flatten().forEach((function(t){"Arrow"===t.typeName&&(e=Ha(t.path[1][0],t.path[1][1]),t.pathData[1]=e.nearest,_a(e,t,0))}))}()}function Ga(e){null!==e&&void 0!==e&&la.add(e)}function Xa(e){la=e,Aa()}function Wa(){return Sa===re.Visibility||Sa===re.Edge||Sa===re.Specialisation}function Ja(e){var t;return la.flatten().forEach((function(a){a.semanticIdentity.UUID===e&&(t=a)})),t}function _a(e,t,a){if(!1===e.snapped){var n=e.coord;t.path[a]=[n[1],n[2]]}else{void 0!==Ja(e.nearest[1])&&(t.path[a]=t.rebuildPath())}}function qa(e,t,a){var n=Pa(t,a);if(e.tool===re.Vertex||e.tool===re.Select){if(null!==n[0]&&n[0]===Ya(e))return Za(e,t,a),Ma=!0,void(Jt.onmousemove=function(e){za(e,n)});var i=hn(t,a);if(e.tool===re.Vertex&&null!==i)return e.props.setLeftMenu(i),e.props.setMode(re.Select),void(Oa=!0)}if(e.tool===re.Select){var r,l,s=function(e,t){var a,n=-1,i=30,r=null;return la.flatten().forEach((function(l){"Arrow"===l.typeName&&l.path.forEach((function(s){a=Math.hypot(e-s[0],t-s[1]),console.log(a),a<i&&(i=a,n=l.path.indexOf(s),r=l)}))})),[n,r]}(t,a),o=Object(g.a)(s,2);if(r=o[0],(l=o[1])===Ya(e)&&-1!==r){Ma=!0;var c=function(e){!function(e,t,a){var n=yn(e),i=Object(g.a)(n,2),r=Ha(i[0],i[1]);a.pathData[t]=r.nearest,_a(r,a,t)}(e,r,l)};Jt.addEventListener("mousemove",c),Jt.addEventListener("mouseup",(function(){Jt.removeEventListener("mousemove",c),console.log("removed")}))}}qt=t,Zt=a,Jt.onmousemove=function(t){nn(t,e)}}function Za(e,t,a){Na=Ya(e),null===Ya(e)&&(Na=hn(t,a)),null!==Na&&(La=!0,Ua=[Na.x,Na.y],Da=[Na.width,Na.height])}function $a(e){var t,a,n=[],i=[],r=[],l=[];return t=e.semanticIdentity.UUID,console.log(e),la.flatten().forEach((function(s){"Arrow"===s.typeName&&(t===s.destVertexUUID?(((a=Ja(s.sourceVertexUUID)).height+10)*a.width<(e.height+10)*e.width&&r.push(a),s.path[0][1]<e.y||s.path[0][1]>e.y+e.height+10?n.push(s):(s.path[0][0]<e.x||s.path[0][0]>e.x+e.width)&&i.push(s)):t===s.sourceVertexUUID&&(((a=Ja(s.destVertexUUID)).height+10)*a.width<(e.height+10)*e.width&&r.push(a),s.path[1][1]<e.y||s.path[1][1]>e.y+e.height+10?n.push(s):(s.path[1][0]<e.x||s.path[1][0]>e.x+e.width)&&i.push(s)),l.push(s))})),[r,n,i,l]}function Qa(e,t,a,n,i){if(a.semanticIdentity.UUID===n.destVertexUUID){var r=Ja(n.sourceVertexUUID);a.y*i+r.y*(1-i)>(r.y+r.height+10)*i+(a.y+a.height+10)*(1-i)&&(e.push(r),t.push(n))}else if(a.semanticIdentity.UUID===n.sourceVertexUUID){var l=Ja(n.destVertexUUID);a.y*i+l.y*(1-i)>(l.y+l.height+10)*i+(a.y+a.height+10)*(1-i)&&(e.push(l),t.push(n))}return[e,t]}function en(e,t,a,n){if(t.length>=2){for(var i=0,r=e.x,l=e.y+(e.height+30)*(1-n);i<t.length;i++)t[i].x=r,t[i].y=l-(t[i].height+30)*n,r=r+t[i].width+20,t[i].x+t[i].width>e.x+e.width&&(e.width=e.width+t[i].width);for(i=0;i<t.length;i++){console.log(a[i]);var s=Ha(t[i].x+t[i].width/2,e.y+(e.height+10)*(1-n));a[i].pathData[1]=s.nearest,_a(s,a[i],1)}}}function tn(e,t,a,n,i){if(a.semanticIdentity.UUID===n.destVertexUUID){var r=Ja(n.sourceVertexUUID);a.x*i+r.x*(1-i)>(r.x+r.width)*i+(a.x+a.width)*(1-i)&&(e.push(r),t.push(n))}else if(a.semanticIdentity.UUID===n.sourceVertexUUID){var l=Ja(n.destVertexUUID);a.x*i+l.x*(1-i)>(l.x+l.width)*i+(a.x+a.width)*(1-i)&&(e.push(l),t.push(n))}return[e,t]}function an(e,t,a,n){if(t.length>=2){for(var i=0,r=e.x+(e.width+30)*(1-n),l=e.y;i<t.length;i++)t[i].x=r-(t[i].width+30)*n,t[i].y=l,l=l+t[i].height+20,t[i].y+t[i].height+10>e.y+e.height+10&&(e.height=e.height+t[i].height);for(i=0;i<t.length;i++){console.log(a[i]);var s=Ha(e.x+e.width*(1-n),t[i].y+(t[i].height+10)/2);a[i].pathData[1]=s.nearest,_a(s,a[i],1)}}}function nn(e,t){na=!0;var a=yn(e);Aa();var n=vn(t,qt,Zt,a[0],a[1]);_t.globalAlpha=.75,null!==n&&n.draw(_t),_t.globalAlpha=1,na=!1}function rn(e,t,a){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];t,a;var r=hn(t,a),l=$a(r),s=Object(g.a)(l,4),o=s[0],c=s[1],d=s[2],u=s[3];if(null!==o||o.length>=1){for(var h=o,f=[],m=0;m<h.length;m++){var v=$a(h[m]),y=Object(g.a)(v,3),p=y[0];y[1],y[2];if(null!==p){for(var b=0;b<p.length;b++){console.log(h.length);for(var x=0;x<h.length;x++)p[b].semanticIdentity.UUID===h[x].semanticIdentity.UUID&&p.splice(b,1)}if(p.length>=1)for(var E=0;E<p.length;E++)f.push(p[E]),o.push(p[E])}}h=f}var w=[];if(null!==o)for(var N=0;N<o.length;N++)w.push([t-o[N].x,a-o[N].y]);var I=[];if(null!==n)for(var C=0;C<n.length;C++)I.push([t-n[C].x,a-n[C].y]);if(null!==r){Za(e,t,a);var k=t-r.x,M=a-r.y;Jt.onmousemove=function(e){ln(e,r,o,w,n,I,k,M,c,d,u,i)}}}function ln(e,t,a,n){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,r=arguments.length>5?arguments[5]:void 0,l=arguments.length>6?arguments[6]:void 0,s=arguments.length>7?arguments[7]:void 0,o=arguments.length>8?arguments[8]:void 0,c=arguments.length>9?arguments[9]:void 0,d=arguments.length>11?arguments[11]:void 0;if(null!=t)if("Vertex"===t.typeName){var u=yn(e),h=u[0]-l,f=u[1]-s;if(d&&null!==a)for(var m=0;m<a.length;m++)a[m].x=u[0]-n[m][0],a[m].y=u[1]-n[m][1];if(null!==i)for(var v=0;v<i.length;v++)i[v].x=u[0]-r[v][0],i[v].y=u[1]-r[v][1];if(null!==o)for(var y=0;y<o.length;y++)o[y].path[1][0]=o[y].path[0][0],_a(Ha(o[y].path[1][0],o[y].path[1][1]),o[y],0);else if(null!==c)for(var g=0;g<c.length;g++)c[g].path[1][1]=c[g].path[0][1],_a(Ha(c[g].path[1][0],c[g].path[1][1]),c[g],0);t.x=h,t.y=f,sn()}else if("Arrow"===t.typeName)return}function sn(){la.flatten().forEach((function(e){null!==e&&"Arrow"===e.typeName&&e.rebuildPath()}))}function on(){Jt.onmousemove=null}function cn(e){ra=e,Ta(),Aa()}function dn(e,t){var a=_t.lineWidth;_t.lineWidth=.5;var n=_t.strokeStyle;_t.strokeStyle="#007ACC";var i=_t.fillStyle;_t.fillStyle="#007ACC55",_t.globalAlpha=1,_t.beginPath(),_t.arc(e,t,2,0,2*Math.PI,!1),_t.fill(),_t.stroke(),_t.closePath(),_t.lineWidth=a,_t.strokeStyle=n,_t.fillStyle=i}function un(e,t,a,n){return Math.sqrt(Math.pow(a-e,2)+Math.pow(n-t,2))}function hn(e,t){var a=null;return la.flatten().forEach((function(n){null!==n&&n.intersects(e,t)&&(a=n)})),a}function fn(e){var t,a=Object(y.a)(la.rootVertices);try{for(a.s();!(t=a.n()).done;){var n=t.value;e.semanticIdentity.UUID===n.vertex.semanticIdentity.UUID&&(n.vertex.title=e.title,n.vertex.content=e.content,n.vertex.icons=e.icons,n.vertex.colour=e.colour,n.vertex.imageElements=e.imageElements,n.vertex.fontSize=e.fontSize)}}catch(i){a.e(i)}finally{a.f()}Aa()}function mn(e){var t;"treeVertex"!==e.type?((t=function(e){var t,a=Object(y.a)(it);try{for(a.s();!(t=a.n()).done;){var n=t.value;if(n.semanticIdentity.UUID===e.originalUUID)return n}}catch(i){a.e(i)}finally{a.f()}}(e)).text=e.title+" \ud83d\udfe7",t.content=e.content,t.width=e.width,t.height=e.height,t.parentRenderKey===e.vertexRenderKey&&(console.log(t),console.log(e))):t=e;var a,n=Object(y.a)(la.flatten());try{for(n.s();!(a=n.n()).done;){var i=a.value;t.semanticIdentity.UUID===i.originalUUID&&i!==e&&(t.parentRenderKey===i.vertexRenderKey?(i.title=t.text.replace(" \ud83d\udfe7",""),i.colour=t.colour,i.content=t.content):(i.title=t.text.replace(" \ud83d\udfe7",""),i.colour="#FFFFFF",i.content=t.content))}}catch(r){n.e(r)}finally{n.f()}}function vn(e,t,a,n,i){var r,l=la.flatten();if("Vertex"===e.tool&&!1===na){var s=gn(t,a,n+10,i),o=Fa(s[1],0),c=Fa(s[3],0);console.log("draw vertex");var d=Ut("Drawn Vertex",ma());return console.log(d.semanticIdentity.UUID),new Yt({title:"Drawn Vertex",content:d,colour:d.colour,x:s[0],y:Fa(a,1),width:s[2]-s[0],height:c-o,semanticIdentity:d.semanticIdentity})}if(Wa()){if(0!==(r=Ia.concat([Ha(n,i).coord]))[0][0])return null;var u=new Xe(l,r,Sa);return u.rebuildPath(l),u}return null}function yn(e){return Ta(),[(e.clientX-Qt)/pn(),(e.clientY-ea)/pn()]}function gn(e,t,a,n){return[Math.min(e,a),Math.min(t,n),Math.max(e,a),Math.max(t,n)]}function pn(){return ra/100}function bn(){_t.fillStyle="#ffffff",_t.fillRect(0,0,ta,aa)}var xn,En,wn=a(206),Nn="Default",In=0,Cn="Default",kn=function(e){Object(m.a)(a,e);var t=Object(v.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).state={xPos:"0px",yPos:"0px",showMenu:!1},n.handleClick=function(e){if(n.state.showMenu)if("MoveModel"===e.target.id)Cn="MoveModel",n.setState({showMenu:!0});else if("MoveModel"===Cn&&e.target.id.includes("Folder")){var t=e.target.id.replace("Folder","");!function(e,t){console.log("Rebase test"),console.log(ct);var a,n=Object(y.a)(ct);try{for(n.s();!(a=n.n()).done;){var i=a.value;if(i.modelKey===e){var r,l=Object(y.a)(i.children);try{for(l.s();!(r=l.n()).done;){var s,o=r.value.children,c=Object(y.a)(o);try{for(c.s();!(s=c.n()).done;){var d=s.value;d.renderkey=t,"Vertex"===d.data.typeName?d.data.vertexRenderKey=t:d.data.arrowRenderKey=t}}catch(u){c.e(u)}finally{c.f()}}}catch(u){l.e(u)}finally{l.f()}console.log(i),i.renderKey=t,console.log(i)}}}catch(u){n.e(u)}finally{n.f()}console.log(ct),1,$e()}(In,parseInt(t)),console.log("model ",In," moved to folder id ",t),n.setState({showMenu:!1}),n.props.setLeftMenuToTree()}else if("Rename"===e.target.id)Cn="Rename",n.setState({showMenu:!0});else if("RenameVertex"===e.target.id)Cn="RenameVertex",n.setState({showMenu:!0});else if("RenameModel"===e.target.id)Cn="RenameModel",n.setState({showMenu:!0});else if("AddVertex"===e.target.id)Cn="AddVertex",n.setState({showMenu:!0});else if("AddGraph"===e.target.id)Cn="AddGraph",n.setState({showMenu:!0});else if("AddPackage"===e.target.id)Cn="AddPackage",n.setState({showMenu:!0});else if("DeletePackage"===e.target.id)Cn="DeletePackage",n.setState({showMenu:!0});else if("DeleteVertex"===e.target.id)Cn="DeleteVertex",n.setState({showMenu:!0});else if("DeleteModel"===e.target.id)Cn="DeleteModel",n.setState({showMenu:!0});else if("DeleteVertexConfirmed"===e.target.id){var a,i=Object(y.a)(pt());try{for(i.s();!(a=i.n()).done;){var r=a.value;r.renderKey===In&&Lt(r.semanticIdentity.UUID)}}catch(v){i.e(v)}finally{i.f()}n.setState({showMenu:!1}),n.props.setLeftMenuToTree(),$e()}else if("DeletePackageConfirmed"===e.target.id){var l,s=Object(y.a)(vt());try{for(s.s();!(l=s.n()).done;){l.value.renderKey===In&&Mt(In)}}catch(v){s.e(v)}finally{s.f()}n.setState({showMenu:!1}),n.props.setLeftMenuToTree(),$e()}else if("DeleteModelConfirmed"===e.target.id){var o,c=Object(y.a)(ct);try{for(c.s();!(o=c.n()).done;){o.value.modelKey===In&&jt(In)}}catch(v){c.e(v)}finally{c.f()}n.setState({showMenu:!1}),n.props.setLeftMenuToTree(),$e()}else if("RenameBox"===e.target.id||"CMSelected"===e.target.id);else if("RenameVertexBox"===e.target.id||"CMSelected"===e.target.id);else if("RenameModelBox"===e.target.id||"CMSelected"===e.target.id);else if("VertexNameBox"===e.target.id||"CMSelected"===e.target.id);else if("GraphNameBox"===e.target.id||"CMSelected"===e.target.id);else if("PackageNameBox"===e.target.id||"CMSelected"===e.target.id);else if("Create-Graph"===e.target.id)Cn="AddContainerModel",n.setState({showMenu:!0});else if("AddContainerModel"===Cn&&e.target.id.includes("Folder")){console.log(xn);var d=e.target.id.replace("Folder","");Dt(xn.title,parseInt(d),xn.semanticIdentity),n.props.setLeftMenuToTree(),n.setState({showMenu:!1})}else if("LinkContainer"===e.target.id)Cn="LinkContainer",n.setState({showMenu:!0}),console.log(pa().rootVertices);else if("LinkContainer"===Cn&&e.target.id.includes("Vertex")){console.log("linking semantic"),!function(e,t){var a=null;console.log(la.rootVertices);var n,i=Object(y.a)(la.rootVertices);try{for(i.s();!(n=i.n()).done;){var r=n.value;if(r.vertex.semanticIdentity.UUID===e){a=r;break}}}catch(v){i.e(v)}finally{i.f()}var l,s=Object(y.a)(la.rootVertices);try{for(s.s();!(l=s.n()).done;){var o=l.value;if(o.vertex.semanticIdentity.UUID===t){o.vertex.semanticIdentity=a.vertex.semanticIdentity;break}}}catch(v){s.e(v)}finally{s.f()}var c,d=Object(y.a)(la.rootVertices);try{for(d.s();!(c=d.n()).done;){c.value.vertex.semanticIdentity.UUID===e&&fn(a.vertex)}}catch(v){d.e(v)}finally{d.f()}console.log(la.rootVertices)}(e.target.id.replace("Vertex",""),xn.semanticIdentity.UUID),n.props.setLeftMenuToTree(),n.setState({showMenu:!1})}else if("Bi-Nav"===e.target.id)Cn="Bi-Nav",n.setState({showMenu:!0});else if("Bi-Nav"===Cn&&e.target.id.includes("Nav")){console.log("navigating");var u=e.target.id.replace("Nav","");console.log(u),xa(parseInt(u[0])),va(u[1]),ht(u[1]);var h,f=Object(y.a)(la.flatten());try{for(f.s();!(h=f.n()).done;){var m=h.value;"Vertex"===m.typeName&&m.getModelKey()===ba()?m.setPresent():m.getModelKey()!==ba()&&"Vertex"===m.typeName&&m.setAway()}}catch(v){f.e(v)}finally{f.f()}Aa(),console.log(ba(),ma()),n.props.setLeftMenuToTree(),n.setState({showMenu:!1})}else n.setState({showMenu:!1})},n.handleKey=function(e){if("Enter"===e.key)if("Rename"===Cn){Ot(document.getElementById("RenameBox").value,In),console.log("menu change");try{n.props.setLeftMenuToTree()}catch(e){console.log(e)}console.log("menu change fin"),n.setState({showMenu:!1}),$e()}else if("RenameModel"===Cn){Tt(document.getElementById("RenameModelBox").value,In),console.log("menu change");try{n.props.setLeftMenuToTree()}catch(e){console.log(e)}console.log("menu change fin"),n.setState({showMenu:!1}),$e()}else if("RenameVertex"===Cn){var t=document.getElementById("RenameVertexBox").value;xn.text=t,console.log("menu change");try{n.props.setLeftMenuToTree()}catch(e){console.log(e)}console.log("rightClickedObject"),console.log(xn),mn(xn),console.log("menu change fin"),n.setState({showMenu:!1}),Aa(),$e()}else if("AddVertex"===Cn){Ut(document.getElementById("VertexNameBox").value,ft());try{n.props.setLeftMenuToTree()}catch(e){console.log(e)}n.setState({showMenu:!1}),$e()}else if("AddGraph"===Cn){Dt(document.getElementById("GraphNameBox").value,ft());try{n.props.setLeftMenuToTree()}catch(e){console.log(e)}n.setState({showMenu:!1}),$e()}else if("AddPackage"===Cn){kt(document.getElementById("PackageNameBox").value,ft());try{n.props.setLeftMenuToTree()}catch(e){console.log(e)}n.setState({showMenu:!1}),$e()}},n.handleContextMenu=function(e){if(e.preventDefault(),e.target.click(),Cn="Default",Nn="Default",In=0,xn=null,"jstree-anchor jstree-hovered jstree-clicked"===e.target.className){if(e.target.text.includes("\ud83d\udcc1")){var t,a=Object(y.a)(vt());try{for(a.s();!(t=a.n()).done;){var i=t.value;e.target.text===i.text&&(Cn="Folder",Nn=e.target.text,In=ft())}}catch(b){a.e(b)}finally{a.f()}}if(e.target.text.includes("\ud83d\udcc8")){var r,l=Object(y.a)(wt());try{for(l.s();!(r=l.n()).done;){var s=r.value;e.target.text===s.text&&(Cn="Model",Nn=e.target.text,In=ba())}}catch(b){l.e(b)}finally{l.f()}}if(console.log("e.target"),console.log(e.target),e.target.text.includes("\ud83d\udfe7")||e.target.text.includes("\ud83d\udcc2")){console.log("e.target"),console.log(e.target);var o,c=Object(y.a)(pt());try{for(c.s();!(o=c.n()).done;){var d=o.value;e.target.text===d.text&&(Cn="Vertex",xn=d,Nn=e.target.text,In=ft())}}catch(b){c.e(b)}finally{c.f()}}"Root"===e.target.text&&(Cn="Root",Nn=e.target.text,In=ft())}if("drawCanvas"===e.target.id){var u=yn(e),h=u[0],f=u[1];if(null!==(xn=hn(h,f)))if("Vertex"===xn.typeName)Nn=xn.title,Cn=!0===xn.isContainer?"Container":"CanvasVertex";else if("Arrow"===xn.typeName){var m=Ja(xn.sourceVertexUUID),v=Ja(xn.destVertexUUID),g=m.title,p=v.title;Nn="Arrow from "+g+" to "+p,Cn="Arrow"}}n.setState({xPos:"".concat(e.pageX,"px"),yPos:"".concat(e.pageY,"px"),showMenu:!0})},n}return Object(h.a)(a,[{key:"componentDidMount",value:function(){document.addEventListener("click",this.handleClick),document.addEventListener("contextmenu",this.handleContextMenu),document.addEventListener("keypress",this.handleKey)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("click",this.handleClick),document.removeEventListener("contextmenu",this.handleContextMenu),document.removeEventListener("keypress",this.handleKey)}},{key:"render",value:function(){var e=this.state,t=e.showMenu,a=e.yPos,n=e.xPos;if(!t)return null;if("Default"===Cn)return i.a.createElement("div",{className:"ContextMenu",style:{top:a,left:n}},i.a.createElement("div",{className:"CMSelected",id:"CMSelected"},"Default"));if("Folder"===Cn)return i.a.createElement("div",{className:"ContextMenu",style:{top:a,left:n}},i.a.createElement("div",{className:"CMSelected",id:"CMSelected"},i.a.createElement("b",null,Nn)),i.a.createElement("div",{className:"CMitem",id:"Rename"}," Rename"),i.a.createElement("div",{className:"CMitem",id:"AddVertex"}," Add Vertex"),i.a.createElement("div",{className:"CMitem",id:"AddGraph"}," Add Graph"),i.a.createElement("div",{className:"CMitem",id:"AddPackage"}," Add Package"),i.a.createElement("div",{className:"CMitem",id:"DeletePackage"}," Delete Package"));if("Root"===Cn)return i.a.createElement("div",{className:"ContextMenu",style:{top:a,left:n}},i.a.createElement("div",{className:"CMSelected",id:"CMSelected"},i.a.createElement("b",null,Nn)),i.a.createElement("div",{className:"CMitem",id:"AddPackage"}," Add Package"));if("DeletePackage"===Cn)return i.a.createElement("div",{className:"ContextMenu",style:{top:a,left:n}},i.a.createElement("div",{className:"CMSelected",id:"CMSelected"},i.a.createElement("b",null,"Are you sure you wish to delete: ",Nn)),i.a.createElement("div",{className:"CMitem",id:"DeletePackageConfirmed"}," Yes, Delete this package"),i.a.createElement("div",{className:"CMitem",id:"DeletePackageCancel"}," No"));if("DeleteModel"===Cn)return i.a.createElement("div",{className:"ContextMenu",style:{top:a,left:n}},i.a.createElement("div",{className:"CMSelected",id:"CMSelected"},i.a.createElement("b",null,"Are you sure you wish to delete: ",Nn)),i.a.createElement("div",{className:"CMitem",id:"DeleteModelConfirmed"}," Yes, Delete this graph"),i.a.createElement("div",{className:"CMitem",id:"DeleteModelCancel"}," No"));if("DeleteVertex"===Cn)return i.a.createElement("div",{className:"ContextMenu",style:{top:a,left:n}},i.a.createElement("div",{className:"CMSelected",id:"CMSelected"},i.a.createElement("b",null,"Are you sure you wish to delete: ",Nn)),i.a.createElement("div",{className:"CMitem",id:"DeleteVertexConfirmed"}," Yes, Delete this vertex"),i.a.createElement("div",{className:"CMitem",id:"DeleteVertexCancel"}," No"));if("Model"===Cn)return i.a.createElement("div",{className:"ContextMenu",style:{top:a,left:n}},i.a.createElement("div",{className:"CMSelected",id:"CMSelected"}," ",i.a.createElement("b",null,Nn)," "),i.a.createElement("div",{className:"CMitem",id:"RenameModel"}," Rename "),i.a.createElement("div",{className:"CMitem",id:"MoveModel"}," Move To "),i.a.createElement("div",{className:"CMitem",id:"DeleteModel"}," Delete Graph "));if("MoveModel"===Cn){var r=vt().map((function(e){return i.a.createElement("div",{className:"CMitem",id:"Folder"+e.renderKey,key:e.text}," ",e.text," ")}));return i.a.createElement("div",{className:"ContextMenu",style:{top:a,left:n}},i.a.createElement("div",{className:"CMSelected",id:"CMSelected"},' Move "',i.a.createElement("b",null,Nn),'" To:'),i.a.createElement("div",null,r))}if("Rename"===Cn)return i.a.createElement("div",{className:"ContextMenu",style:{top:a,left:n}},i.a.createElement("div",{className:"CMSelected",id:"CMSelected"}," ",i.a.createElement("b",null,Nn)," "),i.a.createElement("input",{className:"CMText",id:"RenameBox",type:"text",name:"renameItem",placeholder:"New Name"}));if("RenameModel"===Cn)return i.a.createElement("div",{className:"ContextMenu",style:{top:a,left:n}},i.a.createElement("div",{className:"CMSelected",id:"CMSelected"}," ",i.a.createElement("b",null,Nn)," "),i.a.createElement("input",{className:"CMText",id:"RenameModelBox",type:"text",name:"renameItem",placeholder:"New Name"}));if("RenameVertex"===Cn)return i.a.createElement("div",{className:"ContextMenu",style:{top:a,left:n}},i.a.createElement("div",{className:"CMSelected",id:"CMSelected"}," ",i.a.createElement("b",null,Nn)," "),i.a.createElement("input",{className:"CMText",id:"RenameVertexBox",type:"text",name:"renameItem",placeholder:"New Name"}));if("AddVertex"===Cn)return i.a.createElement("div",{className:"ContextMenu",style:{top:a,left:n}},i.a.createElement("div",{className:"CMSelected",id:"CMSelected"}," ",i.a.createElement("b",null,Nn)," "),i.a.createElement("input",{className:"CMText",id:"VertexNameBox",type:"text",name:"nameVertex",placeholder:"Vertex Name"}));if("AddPackage"===Cn)return i.a.createElement("div",{className:"ContextMenu",style:{top:a,left:n}},i.a.createElement("div",{className:"CMSelected",id:"CMSelected"}," ",i.a.createElement("b",null,Nn)," "),i.a.createElement("input",{className:"CMText",id:"PackageNameBox",type:"text",name:"namePackage",placeholder:"Package Name"}));if("AddGraph"===Cn)return i.a.createElement("div",{className:"ContextMenu",style:{top:a,left:n}},i.a.createElement("div",{className:"CMSelected",id:"CMSelected"}," ",i.a.createElement("b",null,Nn)," "),i.a.createElement("input",{className:"CMText",id:"GraphNameBox",type:"text",name:"nameGraph",placeholder:"Graph Name"}));if("Vertex"===Cn)return i.a.createElement("div",{className:"ContextMenu",style:{top:a,left:n}},i.a.createElement("div",{className:"CMSelected",id:"CMSelected"}," ",i.a.createElement("b",null,Nn)," "),i.a.createElement("div",{className:"CMitem",id:"Bi-Nav"}," Naviagte "),i.a.createElement("div",{className:"CMitem",id:"RenameVertex"}," Rename"),i.a.createElement("div",{className:"CMitem",id:"AddVertex"}," Add Vertex"),i.a.createElement("div",{className:"CMitem",id:"AddGraph"}," Add Graph"),i.a.createElement("div",{className:"CMitem",id:"AddPackage"}," Add Package"),i.a.createElement("div",{className:"CMitem",id:"DeleteVertex"}," Delete Vertex "));if("Arrow"===Cn)return i.a.createElement("div",{className:"ContextMenu",style:{top:a,left:n}},i.a.createElement("div",{className:"CMSelected",id:"CMSelected"}," ",i.a.createElement("b",null,Nn)," "),i.a.createElement("div",{className:"CMitem",id:"Auto-Layout"}," Auto-Layout option (not implemented) "));if("CanvasVertex"===Cn)return i.a.createElement("div",{className:"ContextMenu",style:{top:a,left:n}},i.a.createElement("div",{className:"CMSelected",id:"CMSelected"}," ",i.a.createElement("b",null,Nn)," "),i.a.createElement("div",{className:"CMitem",id:"Auto-Layout"}," Auto-Layout option (not implemented) "),i.a.createElement("div",{className:"CMitem",id:"Bi-Nav"}," Naviagte "));if("Container"===Cn)return i.a.createElement("div",{className:"ContextMenu",style:{top:a,left:n}},i.a.createElement("div",{className:"CMSelected",id:"CMSelected"}," ",i.a.createElement("b",null,Nn)," "),i.a.createElement("div",{className:"CMitem",id:"Create-Graph"}," Create Graph "),i.a.createElement("div",{className:"CMitem",id:"LinkContainer"}," Link Container From "),i.a.createElement("div",{className:"CMitem",id:"Bi-Nav"}," Goto other occurences "),i.a.createElement("div",{className:"CMitem",id:"Auto-Layout"}," Auto-Layout option (not implemented) "));if("LinkContainer"===Cn){console.log(pa().rootVertices);var l=Array.from(pa().rootVertices);for(var s in console.log(l),l)!1===l[s].vertex.isContainer&&l.splice(s,1);console.log(l);var o=l.map((function(e){return i.a.createElement("div",{className:"CMitem",id:"Vertex"+e.vertex.semanticIdentity.UUID,key:"Vertex"+e.vertex.semanticIdentity.UUID+" "+e.vertex.awayx}," ",Ft(e.vertex.vertexModelKey)," / ",e.vertex.title," ")}));return console.log(o),i.a.createElement("div",{className:"ContextMenu",style:{top:a,left:n}},i.a.createElement("div",{className:"CMSelected",id:"CMSelected"}," Link ",i.a.createElement("b",null,Nn)," from: "),i.a.createElement("div",null,o))}if("AddContainerModel"===Cn){var c=vt().map((function(e){return i.a.createElement("div",{className:"CMitem",id:"Folder"+e.renderKey,key:e.text}," ",e.text," ")}));return i.a.createElement("div",{className:"ContextMenu",style:{top:a,left:n}},i.a.createElement("div",{className:"CMSelected",id:"CMSelected"}," Create Model of ",i.a.createElement("b",null,Nn)," in:"),i.a.createElement("div",null,c))}if("Bi-Nav"===Cn){console.log(pa().rootVertices);var d=[],u=[],h=0;void 0===(h=xn.originalUUID)&&(h=xn.semanticIdentity.UUID),console.log("UUID stuff"),console.log(h),console.log(xn.semanticIdentity.UUID);var f,m=Object(y.a)(pa().rootVertices);try{for(m.s();!(f=m.n()).done;){var v=f.value;v.vertex.originalUUID===h&&d.push(v)}}catch(w){m.e(w)}finally{m.f()}var g,p=Object(y.a)(wt());try{for(p.s();!(g=p.n()).done;){var b=g.value;b.semanticIdentity.UUID===h&&u.push(b)}}catch(w){p.e(w)}finally{p.f()}console.log(d);var x=d.map((function(e){return i.a.createElement("div",{className:"CMitem",id:"Nav"+e.vertex.vertexModelKey+" "+e.vertex.vertexRenderKey,key:"Nav"+e.vertex.semanticIdentity.UUID+" "+e.vertex.awayx}," ",Ft(e.vertex.vertexModelKey)," / ",e.vertex.title," ")})),E=u.map((function(e){return i.a.createElement("div",{className:"CMitem",id:"Nav"+e.modelKey+" "+e.renderKey,key:"Nav"+e.semanticIdentity.UUID}," ",e.text)}));return i.a.createElement("div",{className:"ContextMenu",style:{top:a,left:n}},i.a.createElement("div",{className:"CMSelected",id:"CMSelected"}," ",i.a.createElement("b",null,Nn)," also appears at:"),i.a.createElement("div",null,x),i.a.createElement("div",null,E))}}}]),a}(i.a.Component),Mn=(a(412),a(413),a(414),a(415),a(416),a(417),a(418),a(203)),Sn=a.n(Mn),Vn=a(204),On=a.n(Vn),Un="http://localhost:8080",Dn="Unnamed Folder",Ln=function(e){Object(m.a)(a,e);var t=Object(v.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).updateFolderName=function(){Dn=document.getElementById("FolderName").value},n.addFolder=function(){Object(d.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,kt(Dn,ft());case 2:n.setLeftMenuToTree();case 3:case"end":return e.stop()}}),e)})))()},n.deleteFolder=function(){Object(d.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Mt(ft());case 2:n.setLeftMenuToTree();case 3:case"end":return e.stop()}}),e)})))()},n.editFolderName=function(){Object(d.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ot(Dn,ft());case 2:n.setLeftMenuToTree();case 3:case"end":return e.stop()}}),e)})))()},n.addVertex=function(){Object(d.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ut(Dn,ft());case 2:n.setLeftMenuToTree();case 3:case"end":return e.stop()}}),e)})))()},n.addModel=function(){Object(d.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Dt(Dn);case 2:n.setLeftMenuToTree();case 3:case"end":return e.stop()}}),e)})))()},n.deleteModel=function(){Object(d.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,jt(ba());case 2:n.setLeftMenuToTree();case 3:case"end":return e.stop()}}),e)})))()},n.editModelName=function(){Object(d.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Tt(Dn,ba());case 2:n.setLeftMenuToTree();case 3:case"end":return e.stop()}}),e)})))()},n.zoom=function(e){var t=n.state.zoomLevel;"+"===e?n.state.zoomLevel<500&&(n.setState({zoomLevel:t+=25}),cn(t)):"-"===e?n.state.zoomLevel>100&&(n.setState({zoomLevel:t-=25}),cn(t)):console.log("Invalid Zoom Type")},n.setModelName=function(){n.setState({modelName:document.getElementById("ModelName").value})},n.showFile=function(){var e=n.setLeftMenuToTree;if(window.File&&window.FileReader&&window.FileList&&window.Blob)try{var t=document.querySelector("input[type=file]").files[0],a=new FileReader;a.readAsText(t),console.log(a.result),a.onload=function(){Je(a.result),e()}}catch(i){alert(i+" did you select a file?")}else alert("Your browser is too old to support HTML5 File API");return 0},n.importFile=function(){var e=n.setLeftMenuToTree;if(window.File&&window.FileReader&&window.FileList&&window.Blob)try{var t=document.getElementById("File-Select-Import").files[0],a=new FileReader;a.readAsText(t),console.log(a.result),a.onload=function(){!function(e){if(null!=e){var t=JSON.parse(e),a=[],n=[],i=ya(),r=Ea();console.log(t);var l,s=Object(y.a)(t.packages);try{for(s.s();!(l=s.n()).done;){var o=l.value;i++;var c={originalKey:o.renderKey,originalParentKey:o.parentRenderKey,newKey:i,newParentKey:0};a.push(c)}}catch(L){s.e(L)}finally{s.f()}var d,u=Object(y.a)(t.treeVertex);try{for(u.s();!(d=u.n()).done;){var h=d.value;i++;var f={originalKey:h.renderKey,originalParentKey:h.parentRenderKey,newKey:i,newParentKey:0};a.push(f)}}catch(L){u.e(L)}finally{u.f()}var m,v=Object(y.a)(t.graph);try{for(v.s();!(m=v.n()).done;){var g=m.value;r++;var p={originalModeltKey:g.modelKey,originalKey:g.renderKey,newModelKey:r,newKey:0};n.push(p)}}catch(L){v.e(L)}finally{v.f()}for(var b=0,x=a;b<x.length;b++){var E,w=x[b],N=Object(y.a)(a);try{for(N.s();!(E=N.n()).done;){var I=E.value;w.originalParentKey===I.originalKey&&(w.newParentKey=I.newKey)}}catch(L){N.e(L)}finally{N.f()}}for(var C=0,k=n;C<k.length;C++){var M,S=k[C],V=Object(y.a)(a);try{for(V.s();!(M=V.n()).done;){var O=M.value;S.originalKey===O.originalKey&&(S.newKey=O.originalKey)}}catch(L){V.e(L)}finally{V.f()}}console.log(a),console.log(n);for(var U=0;U<t.packages.length;U++)t.packages[U].renderKey=a[U].newKey,t.packages[U].parentRenderKey=a[U].newParentKey,t.dPackages[U].renderKey=a[U].newKey,t.dPackages[U].parentRenderKey=a[U].newParentKey;for(var D=t.packages.length;D<t.packages.length+t.treeVertex.length;D++)t.treeVertex[D-t.packages.length].renderKey=a[D].newKey,t.treeVertex[D-t.packages.length].parentRenderKey=a[D].newParentKey,t.dTreeVertex[D-t.packages.length].renderKey=a[D].newKey,t.dTreeVertex[D-t.packages.length].parentRenderKey=a[D].newParentKey}}(a.result),e()}}catch(i){alert(i+" did you select a file?")}else alert("Your browser is too old to support HTML5 File API");return 0},n.toggleSemanticDomainState=function(){n.semanticTableEnabled?(n.semanticTableEnabled=!1,Aa(),n.setState(n.state),n.updateTree(),console.log("Semantic Domain disabled")):(n.semanticTableEnabled=!0,function(){for(var e=[],t=la.flatten(),a=0;a<it.length;a++)e.push(Pe(it[a]));for(var n=0;n<t.length;n++)"Arrow"===t[n].typeName&&(e.push(Pe(t[n].sourceEdgeEnd)),e.push(Pe(t[n].destEdgeEnd)));null!==Me?Me(e):console.error("Cannot set rows")}(),n.setState(n.state),console.log("Semantic Domain enabled"))},n.state={zoomLevel:200,drawMode:re.Vertex,menu:te.TreeView,selectedObject:null},n.setMode=n.setMode.bind(Object(f.a)(n)),n.setLeftMenu=n.setLeftMenu.bind(Object(f.a)(n)),n.setLeftMenuToTree=n.setLeftMenuToTree.bind(Object(f.a)(n)),n.semanticTableEnabled=!1,n}return Object(h.a)(a,[{key:"componentDidMount",value:function(){this.setMode(re.Select),console.log("Mounted")}},{key:"componentDidUpdate",value:function(e,t,a){var n,i=document.getElementById(t.SelectedTool);null!==i&&(i.style.backgroundColor="#FFFFFF"),(i=document.getElementById(this.state.SelectedTool)).style.backgroundColor="#CFFFFF",null!==this.state.selectedObject&&"Vertex"===this.state.selectedObject.typeName&&(n=this.state.selectedObject,la.flatten().length>0&&(et=n,!1===tt?tt=!0:!0===tt&&(tt=!1)),this.state.selectedObject.setPath(Qe))}},{key:"setMode",value:function(e){e===re.Visibility||e===re.Edge||e===re.Specialisation?this.setState({drawMode:"Arrow"}):e===re.Vertex?this.setState({drawMode:"Vertex"}):e===re.Select?this.setState({drawMode:"Select"}):e===re.Artifact?this.setState({drawMode:"Artifact"}):e===re.Container&&this.setState({drawMode:"Container"}),this.setState({SelectedTool:re[e]}),Sa=e}},{key:"setLeftMenu",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(null!==a)for(var n=0;n<a.length;n++)a[n].setSelected(!1);null!==this.state.selectedObject&&!1===t&&this.state.selectedObject.setSelected(!1),null===e?this.setState({menu:te.TreeView,selectedObject:null}):null!==ne[e.typeName]?(this.setState({menu:e.typeName,selectedObject:e}),e.setSelected(!0)):(null!==this.state.selectedObject&&Aa(),this.setState({menu:te.TreeView,selectedObject:null}))}},{key:"setLeftMenuToTree",value:function(){null!==this.state.selectedObject&&Aa(),this.setState({menu:te.None}),this.setState({menu:te.TreeView,selectedObject:null}),console.log("set left menu To Tree enacted")}},{key:"updateTree",value:function(){var e=Object(d.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.setLeftMenuToTree();case 2:this.setLeftMenuToTree();case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"mainUndo",value:function(){var e=Object(d.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ze<9&&void 0!==qe[Ze+1]&&0!==qe.length&&(Ze++,_e(qe[Ze])),void console.log(Ze);case 2:this.setLeftMenuToTree();case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"mainRedo",value:function(){var e=Object(d.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ze>0&&0!==qe.length&&(Ze--,_e(qe[Ze])),void console.log(Ze);case 2:this.setLeftMenuToTree();case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return i.a.createElement(i.a.Fragment,null,i.a.createElement(kn,{setLeftMenuToTree:this.setLeftMenuToTree}),i.a.createElement("div",{className:"Program"},i.a.createElement("div",{className:this.semanticTableEnabled?"SemanticDomain":"hidden"},i.a.createElement(Be,null)),i.a.createElement("div",{className:"TopMenus"},i.a.createElement(ee.a,{variant:"Primary",id:"File-Menu",title:"File",size:"lg"},i.a.createElement(wn.a.Item,null,i.a.createElement("div",{className:"TopBar"},i.a.createElement("button",{id:"file",onClick:function(){return!0===window.confirm("Are you sure, this will clear the current canvas!")?(console.log("Clearing canvas"),window.location.reload()):console.log("User opted to not clear the canvas"),void Aa()}},"New File"))),i.a.createElement(wn.a.Item,null,i.a.createElement("div",{className:"TopBar"},i.a.createElement("button",{id:"downloader",onClick:function(){return function(){var e=document.createElement("a");e.href=Jt.toDataURL("image/png").replace(/^data:image\/[^;]/,"data:application/octet-stream"),e.download="Graph.png",document.body.appendChild(e),e.click()}()},download:"image.png"},"Export as .png"))),i.a.createElement("div",{className:"TopBar"},i.a.createElement("label",null,"Load"),i.a.createElement("input",{type:"file",id:"File-Select",onChange:this.showFile})),i.a.createElement("div",{className:"TopBar"},i.a.createElement("label",null,"Import"),i.a.createElement("input",{type:"file",id:"File-Select-Import",onChange:this.importFile})),i.a.createElement(wn.a.Item,null,i.a.createElement("div",{className:"TopBar"},i.a.createElement("button",{id:"json-downloader",onClick:function(){return function(){var e=We(),t=JSON.stringify(e),a=new Blob([t],{type:"text/json"}),n=prompt("Please name your file","s23m Model"),i=document.createElement("a");i.href=URL.createObjectURL(a),i.download=n+".json",document.body.appendChild(i),i.click(),document.body.removeChild(i)}()}},"Save (as Json)")))),i.a.createElement("div",{className:"TopBar",onClick:function(){return e.toggleSemanticDomainState()}},"Semantic Editor"),i.a.createElement("input",{className:"SelectedModel",id:"SelectedModel",type:"text",name:"selectedModel",readonly:"readonly"}),i.a.createElement("div",{className:"TopBarSpace"},"\xa0"),i.a.createElement("div",{className:"TopBarSpace"},"\xa0"),i.a.createElement("div",{className:"TopBarIcon",onClick:function(){return e.zoom("-")}}," - "),i.a.createElement("div",{className:"TopBarIcon",onClick:function(){return e.zoom("+")}}," + "),i.a.createElement("div",{className:"TopBarSpace"},"\xa0"),i.a.createElement("div",{className:"TopBarSpace"},"\xa0"),i.a.createElement("div",{className:"TopBarIcon",onClick:function(){return e.mainUndo()}},i.a.createElement("img",{src:On.a,alt:"Delete Container"})),i.a.createElement("div",{className:"TopBarIcon",onClick:function(){return e.mainRedo()}},i.a.createElement("img",{src:Sn.a,alt:"Add Container"}))),i.a.createElement("div",{className:"LowerPanel",id:"LowerPanel"},i.a.createElement(le,{setMode:this.setMode,setLeftMenu:this.setLeftMenu,mainState:this.state,className:"LeftMenus"}),i.a.createElement("div",{className:"Canvas",id:"Canvas"},i.a.createElement(Wt,{setLeftMenu:this.setLeftMenu,setMode:this.setMode,mainState:this.state})))))}}]),a}(i.a.Component);l.a.render(i.a.createElement(i.a.StrictMode,null,i.a.createElement(s,null)),document.getElementById("root")),l.a.render(i.a.createElement(Ln,null),document.getElementById("program")),En="drawCanvas",Jt=document.getElementById(En),_t=Jt.getContext("2d"),Ta(),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[227,1,2]]]);
//# sourceMappingURL=main.4d30976d.chunk.js.map