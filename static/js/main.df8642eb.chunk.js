(this.webpackJsonps23mgrapheditor=this.webpackJsonps23mgrapheditor||[]).push([[0],{139:function(e,t,a){},188:function(e,t,a){e.exports=a.p+"static/media/vertex.4937cefd.svg"},189:function(e,t,a){e.exports=a.p+"static/media/edge.09e9d9dc.svg"},190:function(e,t,a){e.exports=a.p+"static/media/select.8b3cad47.svg"},197:function(e,t,a){e.exports=a.p+"static/media/redo.a80ea341.svg"},198:function(e,t,a){e.exports=a.p+"static/media/undo.5858a028.svg"},199:function(e,t,a){e.exports=a.p+"static/media/help.80a7660b.svg"},221:function(e,t,a){e.exports=a(402)},226:function(e,t,a){},402:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(13),l=a.n(i);a(226),a(139);var s=function(){return r.a.createElement("div",{className:"App"},r.a.createElement("div",{id:"program"}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var o=a(21),c=a.n(o),d=a(42),u=a(18),h=a(20),f=a(40),m=a(38),y=a(36),v=a(7),g=a(24),p=a(176),b=a.n(p),x=a(67);var E,w=function e(t,a,n,r,i,l){Object(u.a)(this,e),this.typeName="SemanticIdentity",this.UUID=void 0!==i?i:([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,(function(e){return(e^crypto.getRandomValues(new Uint8Array(1))[0]&15>>e/4).toString(16)})),this.name=t,this.description=a,this.abbreviation=n,this.shortAbbreviation=r,this.translations=void 0!==l?l:[]},N=function(){function e(t){Object(u.a)(this,e),this.vertex=t,this.children=new Set,this.typeName="VertexNode",this.cleanObjectPath="Vertices",this.vertexObjectPath="Vertices"}return Object(h.a)(e,[{key:"add",value:function(e){this.children.add(e)}},{key:"remove",value:function(e,t){var a=!1;e.add(this),a=this.children.has(t),this.children.delete(t);var n,r=Object(v.a)(this.children);try{for(r.s();!(n=r.n()).done;){var i=n.value;e.has(i)||(e.add(i),a=i.remove(e,t))}}catch(l){r.e(l)}finally{r.f()}return a}},{key:"getVertexNode",value:function(e,t){var a,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=Object(v.a)(this.children);try{for(r.s();!(a=r.n()).done;){var i=a.value;if(!e.has(i)){if(e.add(i),i.vertex.semanticIdentity.UUID===t.semanticIdentity.UUID)return i;if(n){var l=i.getVertexNode(e,t);if(null!==l)return l}}}}catch(s){r.e(s)}finally{r.f()}return null}},{key:"removeFromChildren",value:function(e){return!!this.children.has(e)&&(this.children.delete(e),!0)}},{key:"flatten",value:function(e){var t,a=[],n=Object(v.a)(this.children);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.has(r)||(e.add(r),a.push(r.vertex),null!==r&&a.push.apply(a,Object(x.a)(r.flatten(e))))}}catch(i){n.e(i)}finally{n.f()}return a}},{key:"flattenVertexNodes",value:function(e){var t,a=[],n=Object(v.a)(this.children);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.has(r)||(e.add(r),a.push(r),null!==r&&a.push.apply(a,Object(x.a)(r.flattenVertexNodes(e))))}}catch(i){n.e(i)}finally{n.f()}return a}},{key:"has",value:function(e,t){if(this.children.has(t))return!0;var a,n=Object(v.a)(this.children);try{for(n.s();!(a=n.n()).done;){var r=a.value;if(!e.has(r)&&(e.add(r),r.has(e,t)))return!0}}catch(i){n.e(i)}finally{n.f()}return!1}},{key:"toTreeViewElement",value:function(e,t){var a=[],n=[];if("Vertex Folder"===e){for(var r=0;r<sa.flatten().length;r++)if("Vertex"===sa.flatten()[r].typeName&&sa.flatten()[r].getRenderKey()===t){""===sa.flatten()[r].title?this.setVertexTreePath("Unnamed Vertex"):this.setVertexTreePath(sa.flatten()[r].title);var i={text:sa.flatten()[r].title,children:[],data:sa.flatten()[r],renderkey:sa.flatten()[r].getRenderKey(),modelkey:sa.flatten()[r].getModelKey(),state:{opened:!1}};""===i.text&&(i.text="Unnamed Vertex"),n.push(i)}return{text:"Vertices &#128193",children:n,data:null,state:{opened:!0},type:"Vertex Folder"}}if("Arrow Folder"===e){for(var l=0;l<sa.flatten().length;l++)if("Vertex"!==sa.flatten()[l].typeName&&sa.flatten()[l].getRenderKey()===t){for(var s=sa.flatten()[l].pathData[1][1],o=sa.flatten()[l].pathData[0][1],c="N/A",d="N/A",u=0;u<sa.flatten().length;u++){var h=sa.flatten()[u];"Vertex"===h.typeName&&(s===h.semanticIdentity.UUID?d=h.title:o===h.semanticIdentity.UUID&&(c=h.title))}var f=[!1,!1,!1,!1];f[0]=sa.flatten()[l].getNavigable(0),f[1]=sa.flatten()[l].getNavigable(1),f[2]=sa.flatten()[l].getAggregation(0),f[3]=sa.flatten()[l].getAggregation(1);var m="";!0===f[2]?m="&#9670":!0===f[0]&&(m="&#10229"),m+="&#8213",!0===f[3]?m+="&#9670":!0===f[1]&&(m+="&#10230");var y={text:c+" "+m+" "+d,children:[],data:sa.flatten()[l],renderkey:sa.flatten()[l].getRenderKey(),modelkey:sa.flatten()[l].getModelKey(),state:{opened:!1}};a.push(y)}return 0===a.length?void 0:{text:"Relations \u2b72",children:a,data:null,state:{opened:!0},type:"Arrow Folder"}}}},{key:"setTreeViewElement",value:function(e){return{text:e,children:[],state:{opened:!0}}}},{key:"setVertexTreePath",value:function(e){this.vertexObjectPath=this.cleanObjectPath+"/"+e}},{key:"returnVertexTreePath",value:function(){return this.vertexObjectPath}}]),e}(),I=function(){function e(t,a){Object(u.a)(this,e),this.arrow=a,this.updateVertices(t)}return Object(h.a)(e,[{key:"updateVertices",value:function(e){if(this.sourceVertexNodeObject=null,this.destVertexNodeObject=null,null!==this.arrow){var t,a=null===this.arrow.sourceVertexUUID,n=null===this.arrow.destVertexUUID,r=Object(v.a)(e);try{for(r.s();!(t=r.n()).done;){var i=t.value;if(a&&n)break;null!==i&&(i.vertex.semanticIdentity.UUID===this.arrow.sourceVertexUUID?(this.sourceVertexNodeObject=i,a=!0):i.vertex.semanticIdentity.UUID===this.arrow.destVertexUUID&&(this.destVertexNodeObject=i,n=!0))}}catch(l){r.e(l)}finally{r.f()}}}},{key:"sourceVertexNode",set:function(e){this.sourceVertexNodeObject=e,this.arrow.sourceVertexUUID=null!==e?e.vertex.semanticIdentity.UUID:null},get:function(){return this.sourceVertexNodeObject}},{key:"sourceVertex",get:function(){return null!==this.sourceVertexNodeObject?this.sourceVertexNodeObject.vertex:null}},{key:"destVertexNode",set:function(e){this.destVertexNodeObject=e,this.arrow.destVertexUUID=null!==e?e.vertex.semanticIdentity.UUID:null},get:function(){return this.destVertexNodeObject}},{key:"destVertex",get:function(){return null!==this.destVertexNodeObject?this.destVertexNodeObject.vertex:null}}]),e}(),C=function(){function e(t,a){Object(u.a)(this,e),this.rootVertices=new Set,void 0!==t&&this.add(t),this.arrows=new Set,void 0!==a&&this.add(a)}return Object(h.a)(e,[{key:"add",value:function(e){Array.isArray(e)||(e=[e]);var t,a=Object(v.a)(e);try{for(a.s();!(t=a.n()).done;){var n=t.value;switch(n.typeName){case"Vertex":this.addVertex(n);break;case"Arrow":this.addArrow(n);break;case"VertexNode":this.rootVertices.add(n);break;case"ArrowEdge":this.arrows.add(n)}}}catch(r){a.e(r)}finally{a.f()}}},{key:"addVertex",value:function(e){if(null===this.getVertexNode(e))e.originalUUID=e.semanticIdentity.UUID,e=new N(e),this.rootVertices.add(e);else{var t=" :: "+e.title;e.title=t,e.originalVertex=!1,e.originalUUID=e.semanticIdentity.UUID;var a=new w(e.title,"","","",void 0,[]);e.semanticIdentity=a,e=new N(e),this.rootVertices.add(e),console.log(e)}}},{key:"addArrow",value:function(e){if(null===this.getArrowEdge(e)){if(e=new I(this.flattenVertexNodes(),e),this.arrows.add(e),null!==e.destVertexNode&&null!==e.sourceVertexNode&&(e.destVertexNode.add(e.sourceVertexNode),this.rootVertices.has(e.sourceVertexNode))){var t,a=!1,n=Object(v.a)(this.rootVertices);try{for(n.s();!(t=n.n()).done;){var r=t.value;r.vertex.semanticIdentity.UUID!==e.sourceVertex.semanticIdentity.UUID&&(r.has(new Set,e.sourceVertexNode)&&(a=!0))}}catch(i){n.e(i)}finally{n.f()}a&&this.rootVertices.delete(e.sourceVertexNode)}}else console.error("Attempted to add duplicate arrow")}},{key:"ArrowUUIDSource",value:function(e){e=this.getVertexNode(e);var t,a=[],n=0,r=Object(v.a)(this.arrows);try{for(r.s();!(t=r.n()).done;){var i=t.value;null!==i.sourceVertexNode&&i.sourceVertex.semanticIdentity.UUID===e.vertex.semanticIdentity.UUID&&(a[n]=i,n+=1)}}catch(l){r.e(l)}finally{r.f()}return a}},{key:"ArrowUUIDDest",value:function(e){e=this.getVertexNode(e);var t,a=[],n=0,r=Object(v.a)(this.arrows);try{for(r.s();!(t=r.n()).done;){var i=t.value;null!==i.destVertexNode&&i.destVertex.semanticIdentity.UUID===e.vertex.semanticIdentity.UUID&&(a[n]=i,n+=1)}}catch(l){r.e(l)}finally{r.f()}return a}},{key:"remove",value:function(e){if(console.log("remove 2 is called"),console.log(this.rootVertices),"Vertex"===e.typeName){var t=this.getVertexNode(e),a=this.rootVertices.has(t);console.log(a),this.rootVertices.delete(t);var n,r=Object(v.a)(t.children);try{for(r.s();!(n=r.n()).done;){var i=n.value;this.rootVertices.add(i)}}catch(w){r.e(w)}finally{r.f()}var l,s=new Set,o=Object(v.a)(this.rootVertices);try{for(o.s();!(l=o.n()).done;){var c=l.value;s.has(c)||(s.add(c),c.remove(s,t),console.log(a))}}catch(w){o.e(w)}finally{o.f()}if(a){var d,u=Object(v.a)(this.arrows);try{for(u.s();!(d=u.n()).done;){var h=d.value;null!==h.sourceVertexNode&&h.sourceVertex.semanticIdentity.UUID===t.vertex.semanticIdentity.UUID&&(h.sourceVertexNode=null),null!==h.destVertexNode&&h.destVertex.semanticIdentity.UUID===t.vertex.semanticIdentity.UUID&&(h.destVertexNode=null)}}catch(w){u.e(w)}finally{u.f()}}return a}if("Arrow"===e.typeName){var f=this.getArrowEdge(e);if(null!==f){if(this.arrows.delete(f),null!==f.sourceVertexNode&&null!==f.destVertexNode){var m,y=!1,g=!1,p=Object(v.a)(this.arrows);try{for(p.s();!(m=p.n()).done;){var b=m.value,x=null!==b.sourceVertexNode&&b.sourceVertex.semanticIdentity.UUID===f.sourceVertex.semanticIdentity.UUID,E=null!==b.destVertexNode&&b.destVertex.semanticIdentity.UUID===f.destVertex.semanticIdentity.UUID;x&&E&&(y=!0),x&&null!==b.destVertexNode&&(g=!0)}}catch(w){p.e(w)}finally{p.f()}y||f.destVertexNode.removeFromChildren(f.sourceVertexNode),g||this.add(f.sourceVertexNode),f.sourceVertexNode.has(new Set,f.destVertexNode)&&this.rootVertices.delete(f.destVertexNode)}return!0}}else null!==e?console.error("Attempted to remove object of invalid type %s to Graph",e.typeName):console.error("Attempted to remove null from Graph");return!1}},{key:"has",value:function(e){if(this.rootVertices.has(e))return!0;var t,a=new Set,n=Object(v.a)(this.rootVertices);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(!a.has(r)&&(a.add(r),r.has(a,e)))return!0}}catch(i){n.e(i)}finally{n.f()}return!1}},{key:"getVertexNode",value:function(e){var t,a=new Set,n=Object(v.a)(this.rootVertices);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(!a.has(r)){if(a.add(r),r.vertex.semanticIdentity.UUID===e.semanticIdentity.UUID)return r;var i=r.getVertexNode(a,e);if(null!==i)return i}}}catch(l){n.e(l)}finally{n.f()}return null}},{key:"getArrowEdge",value:function(e){var t,a=Object(v.a)(this.arrows);try{for(a.s();!(t=a.n()).done;){var n=t.value;if(n.arrow.semanticIdentity.UUID===e.semanticIdentity.UUID)return n}}catch(r){a.e(r)}finally{a.f()}return null}},{key:"flatten",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=new Set,n=new Set,r=new Set;if(e){var i,l=Object(v.a)(this.rootVertices);try{for(l.s();!(i=l.n()).done;){var s=i.value;if(!r.has(s)&&(r.add(s),a.add(s.vertex),null!==s)){var o,c=Object(v.a)(s.flatten(r));try{for(c.s();!(o=c.n()).done;){var d=o.value;a.add(d)}}catch(y){c.e(y)}finally{c.f()}}}}catch(y){l.e(y)}finally{l.f()}}if(t){var u,h=Object(v.a)(this.arrows);try{for(h.s();!(u=h.n()).done;){var f=u.value;n.add(f.arrow)}}catch(y){h.e(y)}finally{h.f()}}var m=Array.from(a);return m.concat(Array.from(n))}},{key:"flattenVertexNodes",value:function(){var e,t=new Set,a=new Set,n=Object(v.a)(this.rootVertices);try{for(n.s();!(e=n.n()).done;){var r=e.value;if(!a.has(r)&&(a.add(r),t.add(r),null!==r)){var i,l=Object(v.a)(r.flattenVertexNodes(a));try{for(l.s();!(i=l.n()).done;){var s=i.value;t.add(s)}}catch(o){l.e(o)}finally{l.f()}}}}catch(o){n.e(o)}finally{n.f()}return Array.from(t)}}]),e}(),M=a(111),k=a(204),S=a(451),V=a(462),O=a(459),U=a(455),D=a(403),j=a(456),L=a(460),T=a(457),A=a(8),K=a(9),B=a(177),R=a.n(B),F=a(134),P=a(202),H=a(77),Y=a(178),G=a(54),z=a(1),X=null,W=null,J=r.a.createRef(),q=[],Z=function(e){e.xlsx.writeBuffer().then((function(e){R()(new Blob([e],{type:"application/octet-stream"}),"DataGrid.xlsx")}))},_=function(e){return e.id},$=function(){return{input:{fontSize:"14px",width:"90px"},label:{fontSize:"14px"},container:{maxWidth:"18em"},selector:{height:"32px"}}},Q=Object(A.a)($,{name:"StartEditActionSelector"})((function(e){var t=e.defaultAction,a=e.changeAction,n=e.classes;return r.a.createElement(j.a,{container:!0,alignItems:"center",className:n.container},r.a.createElement(D.a,{className:n.label},"Start Edit Action: \xa0"),r.a.createElement(O.a,{onChange:function(e){return a(e.target.value)},value:t,className:n.selector,input:r.a.createElement(V.a,{classes:{input:n.input},labelWidth:0,margin:"dense"})},r.a.createElement(U.a,{value:"click"},"Click"),r.a.createElement(U.a,{value:"doubleClick"},"Double Click")))})),ee=Object(A.a)($,{name:"SelectTextChecker"})((function(e){var t=e.isSelectText,a=e.changeSelectText,n=e.classes;return r.a.createElement(T.a,{control:r.a.createElement(L.a,{checked:t,onChange:function(e){return a(e.target.checked)},color:"primary"}),classes:{label:n.label},label:"Select Text On Focus"})})),te=function(e){return r.a.createElement(z.g,{name:"EditPropsPanel"},r.a.createElement(z.k,{name:"toolbarContent"},r.a.createElement(ee,e),r.a.createElement(z.m,null),r.a.createElement(Q,e)))},ae=function(e){var t=e.onClick,a=Object(k.a)(e,["onClick"]);return r.a.createElement(G.c.Cell,Object.assign({},a,{tabIndex:0,onFocus:t}))},ne=function(){var e=Object(n.useState)(le()),t=Object(g.a)(e,2),a=t[0],i=t[1];W=i;var l=Object(n.useState)([{columnName:"UUID",editingEnabled:!1},{columnName:"type",editingEnabled:!1}]),s=Object(g.a)(l,1)[0],o=Object(n.useState)([]),c=Object(g.a)(o,2),d=c[0],u=c[1];E=d,X=u;var h=Object(n.useState)([{columnName:"UUID",wordWrapEnabled:!0},{columnName:"type",wordWrapEnabled:!0},{columnName:"name",wordWrapEnabled:!0},{columnName:"description",wordWrapEnabled:!0},{columnName:"abbreviation",wordWrapEnabled:!0},{columnName:"shortAbbreviation",wordWrapEnabled:!0}]),f=Object(g.a)(h,1)[0],m=Object(n.useState)("click"),y=Object(g.a)(m,2),p=y[0],b=y[1],w=Object(n.useState)(!0),N=Object(g.a)(w,2),I=N[0],C=N[1],k=Object(n.useRef)(null),V=Object(n.useCallback)((function(){k.current.exportGrid()}),[k]);return r.a.createElement(S.a,null,r.a.createElement(F.a,null,r.a.createElement(P.a,{ref:J,placeholder:"Column name","aria-label":"Column name","aria-describedby":"basic-addon2"}),r.a.createElement(F.a.Append,null,r.a.createElement(H.a,{variant:"outline-secondary",onClick:function(){return function(){var e=J.current.value;if(J.current.value="",""===e||null===e||void 0===e)return;q.push(e),re()}()}},"Add"),r.a.createElement(H.a,{variant:"outline-secondary",onClick:function(){return function(){var e=J.current.value;J.current.value="";var t,a=Object(v.a)(sa.flatten());try{for(a.s();!(t=a.n()).done;){t.value.semanticIdentity.translations.delete(e)}}catch(n){a.e(n)}finally{a.f()}q.splice(q.indexOf(e),1),re()}()}},"Remove"))),r.a.createElement(G.b,{rows:E,columns:a,getRowId:_},r.a.createElement(K.c,{onCommitChanges:function(e){var t,a=e.added,n=e.changed,r=e.deleted;if(a){var i=E.length>0?E[E.length-1].id+1:0;t=[].concat(Object(x.a)(E),Object(x.a)(a.map((function(e,t){return Object(M.a)({id:i+t},e)}))))}if(n&&function(e){for(var t=sa.flatten(),a=tt,n=0;n<e.length;n++){for(var r=0;r<a.length;r++)e[n]=se(a[r],e[n]),console.log(a[r]);for(var i=0;i<t.length;i++)e[n]=se(t[i],e[n]),"Arrow"===t[i].typeName&&(e[n]=se(t[i].sourceEdgeEnd,e[n]),e[n]=se(t[i].destEdgeEnd,e[n]))}}(t=E.map((function(e){return n[e.id]?Object(M.a)(Object(M.a)({},e),n[e.id]):e}))),r){var l=new Set(r);t=E.filter((function(e){return!l.has(e.id)}))}X(t)},columnExtensions:s}),r.a.createElement(G.c,{cellComponent:ae,columnExtensions:f}),r.a.createElement(G.d,null),r.a.createElement(G.f,null),r.a.createElement(te,{defaultAction:p,changeAction:b,isSelectText:I,changeSelectText:C}),r.a.createElement(G.a,{startExport:V}),r.a.createElement(G.e,{startEditAction:p,selectTextOnEditStart:I})),r.a.createElement(Y.a,{ref:k,rows:E,columns:a,onSave:Z}))};function re(){W(le())}function ie(e){var t={};t.id=e.semanticIdentity.UUID,t.UUID=e.semanticIdentity.UUID,t.type=e.typeName,t.name=e.semanticIdentity.name,t.description=e.semanticIdentity.description,t.abbreviation=e.semanticIdentity.abbreviation,t.shortAbbreviation=e.semanticIdentity.shortAbbreviation;for(var a=0;a<e.semanticIdentity.translations.length;a++){var n=e.semanticIdentity.translations[a];t[n[0]]=n[1]}return t}function le(){var e,t=[{name:"UUID",title:"UUID"},{name:"type",title:"Type"},{name:"name",title:"Name"},{name:"description",title:"Description"},{name:"abbreviation",title:"Abbreviation"},{name:"shortAbbreviation",title:"Short Abbreviation"}],a=Object(v.a)(q);try{for(a.s();!(e=a.n()).done;){var n=e.value;t.push({name:n,title:n})}}catch(r){a.e(r)}finally{a.f()}return t}function se(e,t){if(e.semanticIdentity.UUID===t.UUID){e.semanticIdentity.abbreviation=t.abbreviation,e.semanticIdentity.shortAbbreviation=t.shortAbbreviation,e.semanticIdentity.name=t.name,e.title=t.name,e.semanticIdentity.description=t.description,e.text=t.name+" \ud83d\udfe7";var a,n=Object(v.a)(q);try{for(n.s();!(a=n.n()).done;){for(var r=a.value,i=!1,l=0;l<e.semanticIdentity.translations.length;l++)if(e.semanticIdentity.translations[l][0]===r){e.semanticIdentity.translations[l][1]=t[r],i=!0;break}i||e.semanticIdentity.translations.push([r,t[r]])}}catch(s){n.e(s)}finally{n.f()}}return t}function oe(e){q=e,re()}var ce="None",de="Arrow",ue="Triangle",he="Filled Triangle",fe="Diamond",me="Filled Diamond",ye={};ye[ce]="None",ye[de]="Arrow",ye[ue]="Triangle",ye[he]="FilledTriangle",ye[fe]="Diamond",ye[me]="FilledDiamond";var ve={};ve.None=ce,ve.Arrow=de,ve.Triangle=ue,ve.FilledTriangle=he,ve.Diamond=fe,ve.FilledDiamond=me;var ge="#000000",pe="#FF0000",be="#0000FF",xe="#00FF00",Ee={};Ee[ge]="Black",Ee[pe]="Red",Ee[be]="Blue",Ee[xe]="Green";var we={};we.Black=ge,we.Red=pe,we.Blue=be,we.Green=xe;var Ne=1,Ie=2,Ce={};Ce[Ne]="Solid",Ce[Ie]="Dashed";var Me={};Me.Solid=Ne,Me.Dashed=Ie;var ke=function(){function e(t,a,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4?arguments[4]:void 0;Object(u.a)(this,e),this.typeName="Cardinality",this.numLowerBound=t,this.numUpperBound=a,this.attachedToUUID=n,this.isVisible=r,this.semanticIdentity=void 0!==i?i:new w(this.toString(),this.getDescription())}return Object(h.a)(e,[{key:"toggleVisibility",value:function(){this.isVisible=!this.isVisible}},{key:"toString",value:function(){var e,t;return(e="-1"===this.lowerBound?"n":this.lowerBound)===(t="-1"===this.upperBound?"n":this.upperBound)?e:e+" .. "+t}},{key:"getDescription",value:function(){return"Cardinality of Edge End ".concat(this.attachedToUUID)}},{key:"lowerBound",set:function(e){this.numLowerBound=e,this.semanticIdentity.name=this.toString()},get:function(){return this.numLowerBound}},{key:"upperBound",set:function(e){this.numUpperBound=e,this.semanticIdentity.name=this.toString()},get:function(){return this.numUpperBound}}]),e}(),Se=function(){function e(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ce,n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",i=arguments.length>4?arguments[4]:void 0;Object(u.a)(this,e),this.attachedToUUID=t,this.typeName="EdgeEnd",this.semanticIdentity=void 0!==i?i:new w(this.toString(),this.getDescription()),this.headType=a,this.cardinality=void 0!==n?n:new ke(1,1,this.semanticIdentity.UUID),this.label=r,this.edgeEndRenderKey=ya(),this.edgeEndModelKey=xa()}return Object(h.a)(e,[{key:"setModelKey",value:function(e){this.edgeEndModelKey=e}},{key:"getModelKey",value:function(){return this.edgeEndModelKey}},{key:"setRenderKey",value:function(e){this.edgeEndRenderKey=e}},{key:"getRenderKey",value:function(e){return this.edgeEndRenderKey}},{key:"toString",value:function(){return"".concat(this.type," type Edge End")}},{key:"getDescription",value:function(){return"Edge end of ".concat(this.attachedToUUID)}},{key:"updateCardinality",value:function(e,t,a){this.cardinality.lowerBound=e,this.cardinality.upperBound=t,this.cardinality.visibility=a}},{key:"drawLines",value:function(e,t,a,n){e.strokeStyle=a,void 0!==n&&(e.fillStyle=n),e.beginPath(),e.moveTo(t[0].X,t[0].Y);for(var r=1;r<t.length;r++)e.lineTo(t[r].X,t[r].Y);void 0!==n&&(e.closePath(),e.fill()),e.stroke(),e.fillStyle="#000",e.strokeStyle="#000"}},{key:"drawArrowEnd",value:function(e,t,a,n,r){var i=Math.PI/6,l=n+Math.PI,s=[];s.push({X:t+7*Math.cos(l-i),Y:a+7*Math.sin(l-i)}),s.push({X:t,Y:a}),s.push({X:t+7*Math.cos(l+i),Y:a+7*Math.sin(l+i)}),this.drawLines(e,s,r)}},{key:"drawTriangleEnd",value:function(e,t,a,n,r){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"#FFF",l=7,s=Math.PI/6,o=n+Math.PI,c=[];c.push({X:t,Y:a}),c.push({X:t+l*Math.cos(o-s),Y:a+l*Math.sin(o-s)}),c.push({X:t+l*Math.cos(o+s),Y:a+l*Math.sin(o+s)}),c.push({X:t,Y:a}),this.drawLines(e,c,r,i)}},{key:"drawDiamondEnd",value:function(e,t,a,n,r){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"#FFF",l=7,s=Math.PI/9,o=n+Math.PI,c=[];c.push({X:t,Y:a}),c.push({X:t+l*Math.cos(o-s),Y:a+l*Math.sin(o-s)}),c.push({X:t+2*l*Math.cos(o),Y:a+2*l*Math.sin(o)}),c.push({X:t+l*Math.cos(o+s),Y:a+l*Math.sin(o+s)}),c.push({X:t,Y:a}),this.drawLines(e,c,r,i)}},{key:"draw",value:function(e,t,a,n,r){switch(this.type){case ce:break;case de:this.drawArrowEnd(e,t,a,n,r);break;case ue:this.drawTriangleEnd(e,t,a,n,r);break;case he:this.drawTriangleEnd(e,t,a,n,r,r);break;case fe:this.drawDiamondEnd(e,t,a,n,r);break;case me:this.drawDiamondEnd(e,t,a,n,r,r);break;default:console.log("EdgeEnd had unexpected type: %s",this.type)}}},{key:"type",set:function(e){this.headType=e,this.semanticIdentity.name=this.toString()},get:function(){return this.headType}}]),e}(),Ve=a(187),Oe=a(188),Ue=a.n(Oe),De=a(189),je=a.n(De),Le=a(190),Te=a.n(Le),Ae=a(135),Ke={TreeView:"TreeView",Vertex:"Vertex",Arrow:"Arrow",Artifact:"Artifact",Container:"Container"},Be={};Be[Ke.TreeView]="TreeView",Be[Ke.Vertex]="Vertex",Be[Ke.Arrow]="Arrow",Be[Ke.Arrow]="Artifact",Be[Ke.Arrow]="Container";var Re={};Be.TreeView=Ke.TreeView,Be.Vertex=Ke.Vertex,Be.Arrow=Ke.Arrow,Be.Artifact=Ke.Artifact,Be.Container=Ke.Container;var Fe={Select:"Select",Vertex:"Vertex",Visibility:"Visibility",Edge:"Edge",Specialisation:"Specialisation",Artifact:"Artifact",Container:"Container"},Pe=function(e){Object(m.a)(a,e);var t=Object(y.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).testUpdateLabel=function(){n.setPath("fffffffff")},n.getVertexColour=function(){return n.state.selectedObject.getColour()},n.setVertexColour=function(e){n.state.selectedObject.setColour(e.hex),mn(n.state.selectedObject),Ta()},n.deleteTitle=function(){n.setState({title:""})},n.getMenu=function(){var e,t=r.a.createElement("div",{id:"Toolbar",className:"Toolbar"},r.a.createElement("div",{id:"Select",className:"ToolbarItem",onClick:function(){return n.props.setMode(Fe.Select)}},r.a.createElement("img",{src:Te.a,alt:"Select"})),r.a.createElement("div",{id:"Vertex",className:"ToolbarItem",onClick:function(){n.props.setMode(Fe.Vertex)},onKeyDown:function(){return n.onKeyPressed()}},r.a.createElement("img",{src:Ue.a,alt:"Vertex"})),r.a.createElement("div",{id:"Edge",className:"ToolbarItem",onClick:function(){return n.props.setMode(Fe.Edge)}},r.a.createElement("img",{src:je.a,alt:"Edge"})));return n.state.menu===Ke.TreeView?e=r.a.createElement(Pt,{setLeftMenu:n.props.setLeftMenu}):n.state.menu===Ke.Vertex?(Ta(),e=r.a.createElement("form",{id:"VertexMenu"},r.a.createElement("div",{className:"LeftHeader"},"Vertex Properties"),r.a.createElement("label",{className:"LeftLabel"},"Title"),r.a.createElement("input",{id:"LeftTitle",className:"LeftTitle",value:n.state.selectedObject.title,onInput:n.handleChange}),r.a.createElement("label",{className:"LeftSpacer"},"\xa0"),r.a.createElement("label",{className:"LeftLabel"},"Content"),r.a.createElement("textarea",{id:"LeftContent",className:"LeftContent",value:n.state.selectedObject.getContentAsString(),onInput:n.handleChange}),r.a.createElement("label",{className:"LeftSpacer"},"\xa0"),n.getS23MIconsSelector(),r.a.createElement("label",{className:"LeftSpacer"},"\xa0"),n.getColourPicker(),r.a.createElement("label",{className:"LeftSpacer"},"\xa0"),r.a.createElement("label",{className:"LeftLabel"},"Is Abstract?"),r.a.createElement("input",{type:"checkbox",id:"IsAbstract",className:"LeftCheckbox",defaultChecked:n.state.selectedObject.getAbstract(),onClick:function(){return n.toggleAbstract()}}),r.a.createElement("label",{className:"LeftSpacer"},"\xa0"),r.a.createElement("button",{className:"LeftMenuButton",onClick:function(){return n.deselectElement()}},"Deselect"),r.a.createElement("label",{className:"LeftSpacer"},"\xa0"),r.a.createElement("button",{className:"LeftMenuButton",onClick:function(){Ka(n.state.selectedObject),n.setState({menu:"TreeView"})},placeholder:"NoTabIndex"},"Remove"),r.a.createElement("label",{className:"LeftSpacer"},"\xa0"),r.a.createElement("input",{id:"VertPath",className:"vertexPath",defaultValue:n.state.selectedObject.vertexPath}))):n.state.menu===Ke.Artifact?(Ta(),e=r.a.createElement("form",{id:"VertexMenu"},r.a.createElement("div",{className:"LeftHeader"},"Vertex Properties"),r.a.createElement("label",{className:"LeftLabel"},"Title"),r.a.createElement("input",{id:"LeftTitle",className:"LeftTitle",defaultValue:n.state.selectedObject.title,onKeyUp:function(){return n.setTitle()}}),r.a.createElement("label",{className:"LeftSpacer"},"\xa0"),r.a.createElement("label",{className:"LeftLabel"},"Content"),r.a.createElement("textarea",{id:"LeftContent",className:"LeftContent",defaultValue:n.state.selectedObject.getContentAsString(),onKeyUp:function(){return n.setContent()}}),r.a.createElement("label",{className:"LeftSpacer"},"\xa0"),n.getS23MIconsSelector(),r.a.createElement("label",{className:"LeftSpacer"},"\xa0"),n.getColourPicker(),r.a.createElement("label",{className:"LeftSpacer"},"\xa0"),r.a.createElement("label",{className:"LeftLabel"},"Is Abstract?"),r.a.createElement("input",{type:"checkbox",id:"IsAbstract",className:"LeftCheckbox",defaultChecked:n.state.selectedObject.getAbstract(),onClick:function(){return n.toggleAbstract()}}),r.a.createElement("label",{className:"LeftSpacer"},"\xa0"),r.a.createElement("button",{className:"LeftMenuButton",onClick:function(){return n.deselectElement()}},"Deselect"),r.a.createElement("label",{className:"LeftSpacer"},"\xa0"),r.a.createElement("button",{className:"LeftMenuButton",onClick:function(){Aa(n.state.selectedObject),n.setState({menu:"TreeView"})},placeholder:"NoTabIndex"},"Remove"))):n.state.menu===Ke.Container?(Ta(),e=r.a.createElement("form",{id:"VertexMenu"},r.a.createElement("div",{className:"LeftHeader"},"Vertex Properties"),r.a.createElement("label",{className:"LeftLabel"},"Title"),r.a.createElement("input",{id:"LeftTitle",className:"LeftTitle",defaultValue:n.state.selectedObject.title,onKeyUp:function(){return n.setTitle()}}),r.a.createElement("label",{className:"LeftSpacer"},"\xa0"),r.a.createElement("label",{className:"LeftLabel"},"Content"),r.a.createElement("textarea",{id:"LeftContent",className:"LeftContent",defaultValue:n.state.selectedObject.getContentAsString(),onKeyUp:function(){return n.setContent()}}),r.a.createElement("label",{className:"LeftSpacer"},"\xa0"),n.getS23MIconsSelector(),r.a.createElement("label",{className:"LeftSpacer"},"\xa0"),r.a.createElement("label",{className:"LeftLabel"},"Is Abstract?"),r.a.createElement("input",{type:"checkbox",id:"IsAbstract",className:"LeftCheckbox",defaultChecked:n.state.selectedObject.getAbstract(),onClick:function(){return n.toggleAbstract()}}),r.a.createElement("label",{className:"LeftSpacer"},"\xa0"),r.a.createElement("button",{className:"LeftMenuButton",onClick:function(){return n.deselectElement()}},"Deselect"),r.a.createElement("label",{className:"LeftSpacer"},"\xa0"),r.a.createElement("button",{className:"LeftMenuButton",onClick:function(){Aa(n.state.selectedObject),n.setState({menu:"TreeView"})},placeholder:"NoTabIndex"},"Remove"))):n.state.menu===Ke.Arrow&&(console.log("Arrow Selected"),console.log(n.state.selectedObject),e=n.state.selectedObject.edgeType===Fe.Edge?r.a.createElement("form",{id:"ArrowMenu"},r.a.createElement("div",{className:"LeftHeader"},"Edge Properties"),r.a.createElement("label",{className:"LeftLabel"},"Source Is Navigable?"),r.a.createElement("input",{type:"checkbox",id:"SourceIsNavigable",className:"LeftCheckbox",defaultChecked:n.state.selectedObject.getNavigable(0),onClick:function(){return n.setNavigable(0)}}),r.a.createElement("label",{className:"LeftLabel"},"Destination Is Navigable?"),r.a.createElement("input",{type:"checkbox",id:"DestIsNavigable",className:"LeftCheckbox",defaultChecked:n.state.selectedObject.getNavigable(1),onClick:function(){return n.setNavigable(1)}}),r.a.createElement("label",{className:"LeftLabel"},"Source Is Aggregation?"),r.a.createElement("input",{type:"checkbox",id:"SourceIsAggregation",className:"LeftCheckbox",defaultChecked:n.state.selectedObject.getAggregation(0),onClick:function(){return n.setAggregation(0)}}),r.a.createElement("label",{className:"LeftLabel"},"Destination Is Aggregation?"),r.a.createElement("input",{type:"checkbox",id:"DestIsAggregation",className:"LeftCheckbox",defaultChecked:n.state.selectedObject.getAggregation(1),onClick:function(){return n.setAggregation(1)}}),r.a.createElement("label",{className:"LeftLabel"},"Line Colour"),r.a.createElement("select",{name:"LineColour",id:"LineColour",className:"LeftSelector",defaultValue:Ee[n.state.selectedObject.lineColour],onChange:function(){return n.setColour()}},r.a.createElement("option",{value:"Black"},"Black"),r.a.createElement("option",{value:"Red"},"Red"),r.a.createElement("option",{value:"Blue"},"Blue"),r.a.createElement("option",{value:"Green"},"Green")),r.a.createElement("label",{className:"LeftSpacer"},"\xa0"),r.a.createElement("label",{className:"LeftLabel"},"Source Cardinality"),r.a.createElement("div",{className:"CardinalityArea"}," ",r.a.createElement("div",{className:"LeftCheckboxLabel"}," Visible: ")," ",r.a.createElement("input",{type:"checkbox",id:"sourceCardinalityShown",className:"LeftCheckbox",defaultChecked:n.state.selectedObject.getSourceCardinalityVisibility(),onChange:function(){n.toggleSourceCardinalityVisibility(),Ta()}}),r.a.createElement("input",{type:"number",id:"sourceFromCardindality",className:"CardinalityBox",defaultValue:n.state.selectedObject.getSourceCardinalityLowerBound(),min:"0",max:"25",onChange:function(){return n.updateCardinality()}}),r.a.createElement("label",null,".."),r.a.createElement("input",{type:"number",id:"sourceToCardindality",className:"CardinalityBox",defaultValue:n.state.selectedObject.getSourceCardinalityUpperBound(),min:"-1",max:"25",onChange:function(){return n.updateCardinality()}})),r.a.createElement("label",{className:"LeftLabel"},"Destination Cardinality"),r.a.createElement("div",{className:"CardinalityArea"}," ",r.a.createElement("div",{className:"LeftCheckboxLabel"},"Visible:")," ",r.a.createElement("input",{type:"checkbox",id:"destCardinalityShown",className:"LeftCheckbox",defaultChecked:n.state.selectedObject.getDestCardinalityVisibility(),onChange:function(){n.toggleDestCardinalityVisibility(),Ta()}}),r.a.createElement("input",{type:"number",id:"destFromCardindality",className:"CardinalityBox",defaultValue:n.state.selectedObject.getDestCardinalityLowerBound(),min:"0",max:"25",onChange:function(){return n.updateCardinality()}}),r.a.createElement("label",null,".."),r.a.createElement("input",{type:"number",id:"destToCardindality",className:"CardinalityBox",defaultValue:n.state.selectedObject.getDestCardinalityUpperBound(),min:"-1",max:"25",onChange:function(){return n.updateCardinality()}})),r.a.createElement("label",{className:"LeftLabel"},"Source Label"),r.a.createElement("input",{id:"SourceLabel",className:"LeftTitle",defaultValue:n.state.selectedObject.sourceEdgeEnd.label,onKeyUp:function(){return n.setStartLabel()}}),r.a.createElement("label",{className:"LeftSpacer"},"\xa0"),r.a.createElement("label",{className:"LeftLabel"},"Destination Label"),r.a.createElement("input",{id:"DestLabel",className:"LeftTitle",defaultValue:n.state.selectedObject.destEdgeEnd.label,onKeyUp:function(){return n.setEndLabel()}}),r.a.createElement("label",{className:"LeftSpacer"},"\xa0"),r.a.createElement("button",{className:"LeftMenuButton",onClick:function(){Aa(n.state.selectedObject),n.setState({menu:Ke.TreeView,selectedObject:null})}},"Remove"),r.a.createElement("label",{className:"LeftSpacer"},"\xa0"),r.a.createElement("button",{className:"LeftMenuButton",onClick:function(e){return n.stripElement(e)}},"Make Straight"),r.a.createElement("label",{className:"LeftSpacer"},"\xa0"),r.a.createElement("button",{className:"LeftMenuButton",onClick:function(){return n.deselectElement()}},"Deselect"),r.a.createElement("label",{className:"LeftSpacer"},"\xa0"),r.a.createElement("button",{className:"LeftMenuButton",onClick:function(){Aa(n.state.selectedObject),n.setState({menu:Ke.TreeView,selectedObject:null})}},"Remove")):r.a.createElement("form",{id:"ArrowMenu"},r.a.createElement("div",{className:"LeftHeader"},"Selected Edge"),r.a.createElement("button",{className:"LeftMenuButton",onClick:function(){return n.deselectElement()}},"Deselect"),r.a.createElement("label",{className:"LeftSpacer"},"\xa0"),r.a.createElement("button",{className:"LeftMenuButton",onClick:function(){Aa(n.state.selectedObject),n.setState({menu:Ke.TreeView,selectedObject:null})}},"Remove"))),r.a.createElement("div",null,t,r.a.createElement("form",{ref:n.setFormRef,className:n.props.className},e))},n.state={menu:Ke.TreeView,selectedObject:null,fileNames:[],title:"",content:[]},n.setTitle=n.setTitle.bind(Object(f.a)(n)),n.setContent=n.setContent.bind(Object(f.a)(n)),n.handleChange=n.handleChange.bind(Object(f.a)(n)),n.formRef=null,n.setFormRef=function(e){n.formRef=e},n.setIcons(),n}return Object(h.a)(a,[{key:"handleChange",value:function(e){this.setState({title:e.target.value}),this.setState({title:""}),this.setTitle(),this.setContent()}},{key:"componentDidMount",value:function(){this.menu=this.props.mainState.menu,this.selectedItem=this.props.mainState.drawMode,this.props.setMode(this.selectedItem),document.addEventListener("keydown",this.onKeyPressed.bind(this))}},{key:"onKeyPressed",value:function(e){46===e.keyCode&&(console.log(this.state.selectedObject),"Vertex"===this.state.selectedObject.typeName?Ka(this.state.selectedObject):Aa(this.state.selectedObject),this.setState({menu:"TreeView"}),Ta())}},{key:"componentDidUpdate",value:function(e,t,a){var n=document.getElementById("VertexMenu");null===n&&(n=document.getElementById("ArrowMenu")),null!==n&&n.addEventListener("keypress",(function(e){"Enter"===e.key&&e.preventDefault()}))}},{key:"setIcons",value:function(){var e=this;fetch(jn+"/icons/list",{method:"GET",headers:{Accept:"*/*"}}).then((function(e){return e.json()})).then((function(t){var a=[];t.icons.forEach((function(e){a.push(e)})),e.setState({fileNames:a})}))}},{key:"setTitle",value:function(){var e=document.getElementById("LeftTitle").value;this.state.selectedObject.setTitle(e),mn(this.state.selectedObject),Ta()}},{key:"setContent",value:function(){var e=document.getElementById("LeftContent").value;e=e.split("\n"),this.state.selectedObject.setContent(e),mn(this.state.selectedObject),Ta()}},{key:"setLineType",value:function(){var e=document.getElementById("LineType").value;this.state.selectedObject.setLineType(e),Ta()}},{key:"setColour",value:function(){var e=document.getElementById("LineColour").value;this.state.selectedObject.setLineColour(e),Ta()}},{key:"setStartLabel",value:function(){var e=document.getElementById("SourceLabel").value;this.state.selectedObject.setStartLabel(e),Ta()}},{key:"setEndLabel",value:function(){var e=document.getElementById("DestLabel").value;this.state.selectedObject.setEndLabel(e),Ta()}},{key:"updateCardinality",value:function(){var e=document.getElementById("sourceFromCardindality").value,t=document.getElementById("sourceToCardindality").value,a=this.state.selectedObject.getSourceCardinalityVisibility(),n=document.getElementById("destFromCardindality").value,r=document.getElementById("destToCardindality").value,i=this.state.selectedObject.getDestCardinalityVisibility();this.state.selectedObject.updateSourceCardinality(e,t,a),this.state.selectedObject.updateDestCardinality(n,r,i),Ta()}},{key:"toggleSourceCardinalityVisibility",value:function(){this.state.selectedObject.toggleSourceCardinalityVisibility(),Ta()}},{key:"toggleDestCardinalityVisibility",value:function(){this.state.selectedObject.toggleDestCardinalityVisibility(),Ta()}},{key:"toggleAbstract",value:function(){this.state.selectedObject.toggleAbstract(),Ta()}},{key:"getS23MIconsSelector",value:function(){var e=this,t=[r.a.createElement("div",{className:"DropdownItem"},r.a.createElement("div",{className:"dropdownLabel"},"Name"),r.a.createElement("div",{className:"checkBoxContainer"},"Text"),r.a.createElement("div",{className:"checkBoxContainer"},"Icon"))],a="";return this.state.fileNames.forEach((function(n){"_n"===n.slice(-6,-4)?(a=n.slice(0,-6),t.push(r.a.createElement("div",{className:"DropdownItem",ref:n}," ",r.a.createElement("div",{className:"dropdownLabel"},a)," ",r.a.createElement("div",{className:"checkBoxContainer"},r.a.createElement("input",{type:"checkbox",disabled:"disabled"})," "),"  ",r.a.createElement("div",{className:"checkBoxContainer"},r.a.createElement("input",{type:"checkbox",defaultChecked:e.shouldIconBeSelected(n),onClick:function(){e.setIcon(n)}}))," "))):(a=n.slice(0,-4),t.push(r.a.createElement("div",{className:"DropdownItem",ref:n}," ",r.a.createElement("div",{className:"dropdownLabel"},a)," ",r.a.createElement("div",{className:"checkBoxContainer"},r.a.createElement("input",{type:"checkbox",defaultChecked:e.shouldTextBeSelected(n),onClick:function(){e.setText(n)}})," "),"  ",r.a.createElement("div",{className:"checkBoxContainer"},r.a.createElement("input",{type:"checkbox",defaultChecked:e.shouldIconBeSelected(n),onClick:function(){e.setIcon(n)}}))," ")))})),r.a.createElement(Ae.a,{title:"Category Selector",name:"Icons",id:"IconSelector",className:"IconSelector"},t)}},{key:"getColourPicker",value:function(){return r.a.createElement(Ae.a,{title:"Colour Selector",id:"ColourSelector"},r.a.createElement(Ve.SketchPicker,{color:this.getVertexColour,onChangeComplete:this.setVertexColour,presetColors:["#FFD5A9","#F5B942","#FFFFFF"]}))}},{key:"shouldTextBeSelected",value:function(e){return this.state.selectedObject.isTextSet(e)}},{key:"shouldIconBeSelected",value:function(e){return this.state.selectedObject.isIconSet(e)}},{key:"setText",value:function(e){this.state.selectedObject.setText(e),Ta()}},{key:"setIcon",value:function(e){this.state.selectedObject.setIcon(e),Ta()}},{key:"setNavigable",value:function(e){this.state.selectedObject.toggleNavigable(e),document.getElementById("SourceIsNavigable").checked=this.state.selectedObject.getNavigable(0),document.getElementById("DestIsNavigable").checked=this.state.selectedObject.getNavigable(1),Ta()}},{key:"setAggregation",value:function(e){this.state.selectedObject.getNavigable(e)||this.state.selectedObject.toggleNavigable(e),this.state.selectedObject.toggleAggregation(e);var t=this.state.selectedObject.getAggregation(0),a=this.state.selectedObject.getAggregation(1);t&&(document.getElementById("SourceIsNavigable").checked=!0),a&&(document.getElementById("DestIsNavigable").checked=!0),document.getElementById("SourceIsAggregation").checked=t,document.getElementById("DestIsAggregation").checked=a,Ta()}},{key:"deselectElement",value:function(){this.props.setLeftMenu(null),Ta()}},{key:"showTreeView",value:function(){this.state.selectedObject(null),Ta()}},{key:"stripElement",value:function(e){e.preventDefault(),this.state.selectedObject.trimPath(),Ta()}},{key:"render",value:function(){var e=this.getMenu();return null!==this.formRef&&(this.formRef=null),e}}],[{key:"getDerivedStateFromProps",value:function(e,t){return{menu:e.mainState.menu,selectedObject:e.mainState.selectedObject}}}]),a}(r.a.Component),He=function(){function e(t,a,n,r){Object(u.a)(this,e),this.typeName="Arrow",void 0!==r||null===t?this.semanticIdentity=r:t.length>1?this.semanticIdentity=new w("Arrow from "+t[0].semanticIdentity.UUID+" to "+t[1].semanticIdentity.UUID,"","","",void 0,[]):1===t.length?this.semanticIdentity=new w("Arrow connecting "+t[0].semanticIdentity.UUID,"","","",void 0,[]):this.semanticIdentity=new w("Arrow connecting 1 or less vertices","","","",void 0,[]),this.sourceEdgeEnd=new Se(this.semanticIdentity.UUID),this.destEdgeEnd=new Se(this.semanticIdentity.UUID),1===a.length&&a.push(a[0]),this.pathData=a,this.sourceVertexUUID=null,this.destVertexUUID=null,this.updateAttachedVertices(),this.rebuildPath(),this.lineColour=ge,this.lineType=Ne,n===Fe.Edge||n===Fe.Specialisation||n===Fe.Visibility||console.log("Failed to find correct tool"),this.sourceEdgeEnd.type=ce,n===Fe.Edge?(this.destEdgeEnd.type=ce,this.typeName="Arrow"):n===Fe.Specialisation?(this.destEdgeEnd.type=ue,this.typeName="Specialisation"):n===Fe.Visibility?(this.destEdgeEnd.type=de,this.lineType=Ie,this.typeName="Visibility"):(console.log("Failed to find correct tool"),this.destEdgeEnd.type=ce),this.edgeType=n,this.selected=!1,this.sourceIsNavigable=!1,this.destIsNavigable=!1,this.sourceIsAggregation=!1,this.destIsAggregation=!1,this.arrowModelKey=xa(),this.arrowRenderKey=Tt(this.arrowModelKey)}return Object(h.a)(e,[{key:"setModelKey",value:function(e){this.arrowModelKey=e}},{key:"getModelKey",value:function(){return this.arrowModelKey}},{key:"setRenderKey",value:function(e){this.arrowRenderKey=e}},{key:"getRenderKey",value:function(){return this.arrowRenderKey}},{key:"toggleNavigable",value:function(e){0===e?this.sourceIsNavigable=!this.sourceIsNavigable:1===e&&(this.destIsNavigable=!this.destIsNavigable),this.sourceIsAggregation&&(this.sourceIsNavigable=!0),this.destIsAggregation&&(this.destIsNavigable=!0),this.sourceIsNavigable&&this.destIsNavigable?this.sourceIsAggregation?(this.sourceEdgeEnd.type=me,this.destEdgeEnd.type=de):this.destIsAggregation?(this.sourceEdgeEnd.type=de,this.destEdgeEnd.type=me):(this.sourceEdgeEnd.type=de,this.destEdgeEnd.type=de):this.sourceIsNavigable?this.sourceIsAggregation?(this.sourceEdgeEnd.type=me,this.destEdgeEnd.type=ce):(this.sourceEdgeEnd.type=de,this.destEdgeEnd.type=ce):this.destIsNavigable?this.destIsAggregation?(this.destEdgeEnd.type=me,this.sourceEdgeEnd.type=ce):(this.destEdgeEnd.type=de,this.sourceEdgeEnd.type=ce):(this.sourceEdgeEnd.type=ce,this.destEdgeEnd.type=ce)}},{key:"toggleAggregation",value:function(e){0===e?(this.sourceIsAggregation=!this.sourceIsAggregation,this.destIsAggregation&&this.sourceIsAggregation&&(this.destIsAggregation=!1)):(this.destIsAggregation=!this.destIsAggregation,this.destIsAggregation&&this.sourceIsAggregation&&(this.sourceIsAggregation=!1)),this.sourceIsAggregation?(this.sourceEdgeEnd.type=me,this.destIsNavigable?this.destEdgeEnd.type=de:this.destEdgeEnd.type=ce):this.destIsAggregation?(this.destEdgeEnd.type=me,this.sourceIsNavigable?this.sourceEdgeEnd.type=de:this.sourceEdgeEnd.type=ce):this.toggleNavigable(100)}},{key:"getNavigable",value:function(e){return 0===e?this.sourceIsNavigable:this.destIsNavigable}},{key:"getAggregation",value:function(e){return 0===e?this.sourceIsAggregation:this.destIsAggregation}},{key:"trimPath",value:function(){this.pathData=[this.pathData[0],this.pathData[this.pathData.length-1]],this.path=[this.path[0],this.path[this.path.length-1]]}},{key:"rebuildPath",value:function(){var e=this.getObjectUUIDList(),t=[];e.forEach((function(e){t.push(Wa(e))})),this.path=[];for(var a=0;a<this.pathData.length;a++){var n=this.pathData[a];0===n[0]?this.path.push(this.getZerothCasePathItem(t,n)):1===n[0]?this.path.push([n[1],n[2]]):console.error("Invalid PathData case, wrong case",n)}}},{key:"getZerothCasePathItem",value:function(e,t){for(var a=0;a<e.length;a++){if(null!==e[a]&&void 0!==e[a])if(e[a].semanticIdentity.UUID===t[1])return[t[2]*e[a].width+e[a].x,t[3]*e[a].realHeight+e[a].y]}return console.log(" [Ignore this when importing] Could not find vertex to connect for pathItem",t),null}},{key:"getObjectUUIDList",value:function(){var e=this,t=[];return this.pathData.forEach((function(a){var n=e.pathData.indexOf(a);null==a&&(e.pathData[n]=[1,e.path[n][0],e.path[n][1]]),0===e.pathData[n][0]&&t.push(a[1])})),t}},{key:"updateAttachedVertices",value:function(){var e=this.pathData[0],t=this.pathData[this.pathData.length-1];0===e[0]?this.sourceVertexUUID=e[1]:this.sourceVertexUUID=null,0===t[0]?this.destVertexUUID=t[1]:this.destVertexUUID=null}},{key:"setSelected",value:function(e){this.selected=e}},{key:"updateSourceCardinality",value:function(e,t,a){this.sourceEdgeEnd.updateCardinality(e,t,a)}},{key:"getSourceCardinalityVisibility",value:function(){return this.sourceEdgeEnd.cardinality.isVisible}},{key:"toggleSourceCardinalityVisibility",value:function(){this.sourceEdgeEnd.cardinality.toggleVisibility()}},{key:"getSourceCardinalityLowerBound",value:function(){return this.sourceEdgeEnd.cardinality.lowerBound}},{key:"getSourceCardinalityUpperBound",value:function(){return this.sourceEdgeEnd.cardinality.upperBound}},{key:"updateDestCardinality",value:function(e,t,a){this.destEdgeEnd.updateCardinality(e,t,a)}},{key:"getDestCardinalityVisibility",value:function(){return this.destEdgeEnd.cardinality.isVisible}},{key:"toggleDestCardinalityVisibility",value:function(){this.destEdgeEnd.cardinality.toggleVisibility()}},{key:"getDestCardinalityLowerBound",value:function(){return this.destEdgeEnd.cardinality.lowerBound}},{key:"getDestCardinalityUpperBound",value:function(){return this.destEdgeEnd.cardinality.upperBound}},{key:"setStartLabel",value:function(e){this.sourceEdgeEnd.label=e}},{key:"setEndLabel",value:function(e){this.destEdgeEnd.label=e}},{key:"setLineColour",value:function(e){var t=we[e];void 0!==t?this.lineColour=t:console.log("Attempted to assign invalid lineColour: %s",e)}},{key:"setLineType",value:function(e){var t=Me[e];void 0!==t?this.lineType=t:console.log("Attempted to assign invalid lineType: %s",e)}},{key:"createPathNodesForVertex",value:function(e,t,a){var n=t++,r=t++,i=t++,l=t++,s=t++,o=t++,c=t++,d=t++,u=[];return u.push([n,e.x-a,e.y+e.height+a,[d,r]]),u.push([r,e.x+e.width/2,e.y+e.height+a,[n,i]]),u.push([i,e.x+e.width+a,e.y+e.height+a,[r,l]]),u.push([l,e.x+e.width+a,e.y+e.height/2,[i,s]]),u.push([s,e.x+e.width+a,e.y-a,[l,o]]),u.push([o,e.x+e.width/2,e.y-a,[s,c]]),u.push([c,e.x-a,e.y-a,[s,d]]),u.push([d,e.x-a,e.y+e.height/2,[c,n]]),[t,u]}},{key:"drawStartHead",value:function(e){var t=Math.atan2(this.getSY()-this.getNSY(),this.getSX()-this.getNSX());this.sourceEdgeEnd.draw(e,this.getSX(),this.getSY(),t,this.lineColour)}},{key:"drawEndHead",value:function(e){var t=Math.atan2(this.getEY()-this.getNEY(),this.getEX()-this.getNEX());this.destEdgeEnd.draw(e,this.getEX(),this.getEY(),t,this.lineColour)}},{key:"isPathSegmentLR",value:function(e,t){var a=this.path[e][0],n=this.path[t][0],r=this.path[e][1],i=this.path[t][1];return Math.abs(a-n)>Math.abs(r-i)}},{key:"getTextOffsets",value:function(e,t,a,n,r){var i,l,s,o,c,d,u,h,f=e.measureText(t).width,m=e.measureText(a).width,y=e.measureText(n).width,v=e.measureText(r).width,g=e.measureText("M").width,p=!0,b=!0,x=!0,E=!0,w=this.path.length-2,N=this.path.length-1,I=this.isPathSegmentLR(0,1),C=this.isPathSegmentLR(w,N),M=this.path[0][0],k=this.path[0][1],S=this.path[1][0],V=this.path[1][1],O=this.path[w][0],U=this.path[w][1],D=this.path[N][0],j=this.path[N][1];return I?M>S&&(p=!p):k>V&&(b=!b),C?O>D&&(x=!x):U>j&&(E=!E),p?(i=g/2,c=I?g/2:-1*(y+g/2)):(i=-1*(f+g/2),c=I?-1*(y+g/2):g/2),b?(l=15,d=I?-7.5:l):(l=-7.5,d=I?l:-7.5),(x=!x)?(s=g/2,u=C?g/2:-1*(v+g/2)):(s=-1*(m+g/2),u=C?-1*(v+g/2):g/2),(E=!E)?(o=15,h=C?-7.5:o):(o=-7.5,h=C?15:o),[i,l,s,o,c,d,u,h]}},{key:"drawLabelsAndCardinalities",value:function(e){var t=this.sourceEdgeEnd.cardinality.toString(),a=this.destEdgeEnd.cardinality.toString(),n=this.getTextOffsets(e,this.sourceEdgeEnd.label,this.destEdgeEnd.label,t,a);e.fillStyle="#000",e.fillText(this.sourceEdgeEnd.label,this.getSX()+n[0],this.getSY()+n[1]),e.fillText(this.destEdgeEnd.label,this.getEX()+n[2],this.getEY()+n[3]),this.getSourceCardinalityVisibility()&&e.fillText(t,this.getSX()+n[4],this.getSY()+n[5]),this.getDestCardinalityVisibility()&&e.fillText(a,this.getEX()+n[6],this.getEY()+n[7])}},{key:"draw",value:function(e){switch(this.lineType){case Ne:e.setLineDash([]);break;case Ie:e.setLineDash([5,5]);break;default:console.log("Arrow had invalid lineType: %s",this.lineType)}e.strokeStyle=this.lineColour;for(var t=0;t<this.path.length-1;t++){var a=this.path[t],n=this.path[t+1];e.beginPath(),e.moveTo(a[0],a[1]),e.lineTo(n[0],n[1]),e.stroke()}if(e.strokeStyle="#000",e.setLineDash([]),this.drawStartHead(e),this.drawEndHead(e),this.drawLabelsAndCardinalities(e),this.selected)for(var r=0;r<this.path.length;r++){var i=this.path[r];cn(i[0],i[1])}}},{key:"intersects",value:function(e,t){for(var a=0;a<this.path.length-1;a++){var n=this.path[a],r=this.path[a+1];if(this.intersectsSegment(e,t,n,r))return!0}return!1}},{key:"intersectsSegment",value:function(e,t,a,n){return dn(e,t,a[0],a[1])+dn(e,t,n[0],n[1])-1<dn(a[0],a[1],n[0],n[1])}},{key:"getSX",value:function(){return this.path[0][0]}},{key:"getSY",value:function(){return this.path[0][1]}},{key:"getNSX",value:function(){return this.path[1][0]}},{key:"getNSY",value:function(){return this.path[1][1]}},{key:"getNEX",value:function(){var e=this.path.length-2;return e<0&&(e=0),this.path[e][0]}},{key:"getNEY",value:function(){var e=this.path.length-2;return e<0&&(e=0),this.path[e][1]}},{key:"getEX",value:function(){return this.path[this.path.length-1][0]}},{key:"getEY",value:function(){return this.path[this.path.length-1][1]}}]),e}();function Ye(){var e=sa.flatten(!0,!1),t=sa.flatten(!1,!0),a=JSON.parse(JSON.stringify(Qe)),n=JSON.parse(JSON.stringify(ut())),r=JSON.parse(JSON.stringify(ft())),i=JSON.parse(JSON.stringify(yt())),l=JSON.parse(JSON.stringify(gt())),s=JSON.parse(JSON.stringify(xt())),o=JSON.parse(JSON.stringify(wt())),c=ga(),d=wa(),u=xa(),h=ya(),f=ct();return{translationColumns:q,vertices:e,arrows:t,tree:a,packages:n,dPackages:r,treeVertex:i,dTreeVertex:l,graph:s,dGraph:o,renderKeys:c,modelKeys:d,currentKey:h,currentMod:u,currentFol:f}}function Ge(e){if(null!=e){var t,a=JSON.parse(e),n=Object(v.a)(a.treeVertex);try{for(n.s();!(t=n.n()).done;){var r=t.value;r.semanticIdentity=new w(r.semanticIdentity.name,r.semanticIdentity.description,r.semanticIdentity.abbreviation,r.semanticIdentity.shortAbbreviation,r.semanticIdentity.UUID,r.semanticIdentity.translations)}}catch(g){n.e(g)}finally{n.f()}var i,l=[],s=[],o=Object(v.a)(a.vertices);try{for(o.s();!(i=o.n()).done;){var c=i.value;console.log(c),c.semanticIdentity=new w(c.semanticIdentity.name,c.semanticIdentity.description,c.semanticIdentity.abbreviation,c.semanticIdentity.shortAbbreviation,c.semanticIdentity.UUID,c.semanticIdentity.translations),c=new Yt({newConstructor:1,loadedVertex:c}),l.push(c)}}catch(g){o.e(g)}finally{o.f()}var d,u=Object(v.a)(a.arrows);try{for(u.s();!(d=u.n()).done;){var h=d.value;h=y(h),s.push(h)}}catch(g){u.e(g)}finally{u.f()}oe(a.translationColumns),ht(a.packages),mt(a.dPackages),vt(a.treeVertex),pt(a.dTreeVertex),Et(a.graph),Nt(a.dGrraph),dt(a.tree),fa(a.renderKeys),ma(a.modelKeys),za(new C(l,s)),ln(),ot(1),va(1),Ea(1),Ta(),console.log("load finished")}function f(e){return new w(e.name,e.description,e.abbreviation,e.shortAbbreviation,e.UUID,e.translations)}function m(e){return new Se(e.attachedToUUID,e.headType,(t=e.cardinality,new ke(t.numLowerBound,t.numUpperBound,t.attachedToUUID,t.isVisible,f(t.semanticIdentity))),e.label,f(e.semanticIdentity));var t}function y(e){var t=new He(l,e.pathData,e.edgeType,f(e.semanticIdentity));return t.sourceEdgeEnd=m(e.sourceEdgeEnd),t.destEdgeEnd=m(e.destEdgeEnd),t}}function ze(e){if(null!=e){var t,a=JSON.parse(e),n=[],r=[],i=ga(),l=wa(),s=Object(v.a)(a.packages);try{for(s.s();!(t=s.n()).done;){var o=t.value;i++;var c={originalKey:o.renderKey,originalParentKey:o.parentRenderKey,newKey:i,newParentKey:0};n.push(c)}}catch(me){s.e(me)}finally{s.f()}var d,u=Object(v.a)(a.treeVertex);try{for(u.s();!(d=u.n()).done;){var h=d.value;i++;var f={originalKey:h.renderKey,originalParentKey:h.parentRenderKey,newKey:i,newParentKey:0};n.push(f)}}catch(me){u.e(me)}finally{u.f()}var m,y=Object(v.a)(a.graph);try{for(y.s();!(m=y.n()).done;){var g=m.value;l++;var p={originalModelKey:g.modelKey,originalKey:g.renderKey,newModelKey:l,newKey:0};r.push(p)}}catch(me){y.e(me)}finally{y.f()}for(var b=0,x=n;b<x.length;b++){var E,N=x[b],I=Object(v.a)(n);try{for(I.s();!(E=I.n()).done;){var C=E.value;N.originalParentKey===C.originalKey&&(N.newParentKey=C.newKey)}}catch(me){I.e(me)}finally{I.f()}}for(var M=0,k=r;M<k.length;M++){var S,V=k[M],O=Object(v.a)(n);try{for(O.s();!(S=O.n()).done;){var U=S.value;V.originalKey===U.originalKey&&(V.newKey=U.newKey)}}catch(me){O.e(me)}finally{O.f()}}for(var D=0;D<a.packages.length;D++)a.packages[D].renderKey=n[D].newKey,a.packages[D].parentRenderKey=n[D].newParentKey,a.packages[D].data.renderKey=n[D].newKey,a.packages[D].data.parentRenderKey=n[D].newParentKey,a.dPackages[D].renderKey=n[D].newKey,a.dPackages[D].parentRenderKey=n[D].newParentKey;for(var j=a.packages.length;j<a.packages.length+a.treeVertex.length;j++)a.treeVertex[j-a.packages.length].renderKey=n[j].newKey,a.treeVertex[j-a.packages.length].parentRenderKey=n[j].newParentKey,a.treeVertex[j-a.packages.length].data.renderKey=n[j].newKey,a.treeVertex[j-a.packages.length].data.parentRenderKey=n[j].newParentKey,a.dTreeVertex[j-a.packages.length].renderKey=n[j].newKey,a.dTreeVertex[j-a.packages.length].parentRenderKey=n[j].newParentKey;for(var L=0;L<a.graph.length;L++)a.graph[L].renderKey=r[L].newKey,a.graph[L].modelKey=r[L].newModelKey,a.graph[L].data.renderKey=r[L].newKey,a.graph[L].data.modelKey=r[L].newModelKey,a.dGraph[L].renderKey=r[L].newKey,a.dGraph[L].modelKey=r[L].newModelKey;for(var T=0,A=n;T<A.length;T++){var K,B=A[T],R=Object(v.a)(a.vertices);try{for(R.s();!(K=R.n()).done;){var F=K.value;F.vertexRenderKey===B.originalKey&&(F.vertexRenderKey=B.newKey)}}catch(me){R.e(me)}finally{R.f()}var P,H=Object(v.a)(a.arrows);try{for(H.s();!(P=H.n()).done;){var Y=P.value;Y.arrowRenderKey===B.originalKey&&(Y.arrowRenderKey=B.newKey)}}catch(me){H.e(me)}finally{H.f()}}for(var G=0,z=r;G<z.length;G++){var X,W=z[G],J=Object(v.a)(a.vertices);try{for(J.s();!(X=J.n()).done;){var q=X.value;q.vertexModelKey===W.originalModelKey&&(q.vertexModelKey=W.newModelKey)}}catch(me){J.e(me)}finally{J.f()}var Z,_=Object(v.a)(a.arrows);try{for(_.s();!(Z=_.n()).done;){var $=Z.value;$.arrowModelKey===W.originalModelKey&&($.arrowModelKey=W.newModelKey)}}catch(me){_.e(me)}finally{_.f()}}console.log(a.arrows);var Q,ee=[],te=[],ae=Object(v.a)(a.vertices);try{for(ae.s();!(Q=ae.n()).done;){var ne=Q.value;ne.semanticIdentity=new w(ne.semanticIdentity.name,ne.semanticIdentity.description,ne.semanticIdentity.abbreviation,ne.semanticIdentity.shortAbbreviation,ne.semanticIdentity.UUID,ne.semanticIdentity.translations),ne=new Yt({newConstructor:1,loadedVertex:ne}),ee.push(ne)}}catch(me){ae.e(me)}finally{ae.f()}var re,ie=Object(v.a)(a.arrows);try{for(ie.s();!(re=ie.n()).done;){var le=re.value;le=fe(le),te.push(le)}}catch(me){ie.e(me)}finally{ie.f()}ht(ut().concat(a.packages)),mt(ft().concat(a.dPackages)),vt(yt().concat(a.treeVertex)),pt(gt().concat(a.dTreeVertex)),Et(xt().concat(a.graph)),Nt(wt().concat(a.dGraph)),console.log(ba()),console.log(ee);for(var se=0,oe=ee;se<oe.length;se++){Ga(oe[se])}for(var ce=0,de=te;ce<de.length;ce++){Ga(de[ce])}ot(ct()),va(ya()),Ea(xa()),fa(i),ma(l),ln(),Ta(),console.log(ba())}function ue(e){return new w(e.name,e.description,e.abbreviation,e.shortAbbreviation,e.UUID,e.translations)}function he(e){return new Se(e.attachedToUUID,e.headType,(t=e.cardinality,new ke(t.numLowerBound,t.numUpperBound,t.attachedToUUID,t.isVisible,ue(t.semanticIdentity))),e.label,ue(e.semanticIdentity));var t}function fe(e){var t=new He(ee,e.pathData,e.edgeType,ue(e.semanticIdentity));return t.setRenderKey(e.arrowRenderKey),t.setModelKey(e.arrowModelKey),t.sourceEdgeEnd=he(e.sourceEdgeEnd),t.destEdgeEnd=he(e.destEdgeEnd),t}}function Xe(e){oe(e.translationColumns),ht(e.packages),mt(e.dPackages),vt(e.treeVertex),pt(e.dTreeVertex),Et(e.graph),Nt(e.dGrraph),dt(e.tree),fa(e.renderKeys),ma(e.modelKeys),za(new C(e.vertices,e.arrows)),ln(),ot(e.currentFol),va(e.currentKey),Ea(e.currentMod),Ta()}var We=[],Je=0;function qe(){var e=Object.assign({},Ye());if(0!==Je){for(var t=0;t<Je;t++)We.shift();Je=0}We.unshift(e),We.length>10&&We.pop()}var Ze="",_e=null,$e=!1,Qe=[],et=[],tt=[],at=[],nt=[],rt=0,it=[],lt=[],st=[];function ot(e){rt=e}function ct(){return rt}function dt(e){Qe=e}function ut(){return et}function ht(e){et=e}function ft(){return it}function mt(e){it=e}function yt(){return tt}function vt(e){tt=e}function gt(){return at}function pt(e){at=e}function bt(){return et.concat(tt)}function xt(){return lt}function Et(e){lt=e}function wt(){return st}function Nt(e){st=e}function It(){console.log("below is modelObjects"),console.log(lt),lt.length>0?(va(lt[0].data.renderKey),Ea(lt[0].data.modelKey),ot(lt[0].data.renderKey)):(va(1),Ea(-1),ot(1));var e,t=Object(v.a)(sa.flatten());try{for(t.s();!(e=t.n()).done;){var a=e.value;"Vertex"===a.typeName&&a.getModelKey()===xa()?a.setPresent():a.getModelKey()!==xa()&&"Vertex"===a.typeName&&a.setAway()}}catch(n){t.e(n)}finally{t.f()}Ta()}function Ct(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;pa();var a={text:e+" \ud83d\udcc1",children:Qe[ga()],data:NaN,state:{opened:!0},type:"Folder",typeName:"Folder",renderKey:ga(),parentRenderKey:t};it.push(a);var n={text:e+" \ud83d\udcc1",children:Qe[ga()],data:it[et.length],state:{opened:!0},type:"Folder",typeName:"Folder",renderKey:ga(),parentRenderKey:t};et.push(n)}function Mt(e){if(console.log("below is the selected render key"),console.log(e),et.length>1)for(var t=0;t<et.length;t++)et[t].renderKey===e&&(console.log("below is folderdata"),console.log(et),kt(et[t]),it.splice(t,1),et.splice(t,1));else console.log("Cannot delete only folder");It()}function kt(e){for(var t=e.children,a=0;a<t.length;a++){if("Folder"===t[a].type)Mt(t[a].renderKey);else if("Model"===t[a].type){jt(t[a].modelKey)}else if("treeVertex"===t[a].type){Dt(t[a].semanticIdentity.UUID)}}}function St(e){if(e.children.length>0)for(var t=e.children,a=0;a<t.length;a++)for(var n=t[a].children,r=0;r<n.length;r++){if(n[r].modelkey===e.modelKey)Aa(n[r].data)}}function Vt(e,t){if(""!==e){for(var a=0;a<et.length;a++)if(et[a].renderKey===t){et[a].text=e+" \ud83d\udcc1",et[a].data.text=e+" \ud83d\udcc1";break}}else console.log("Cannot have empty name")}function Ot(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;pa();var a=new w(e,"","","",void 0,[]),n={text:e+" \ud83d\udfe7",children:Qe[ga()],data:NaN,state:{opened:!0},type:"treeVertex",typeName:"VertexNode",originalVertex:!0,renderKey:ga(),parentRenderKey:t,content:"content",colour:"#FFD5A9",height:50,width:70,icons:[[],[],[]],imageElements:{},fontSize:12,semanticIdentity:a};at.push(n);var r={text:e+" \ud83d\udfe7",children:Qe[ga()],data:at[tt.length],state:{opened:!0},type:"treeVertex",typeName:"VertexNode",originalVertex:!0,renderKey:ga(),parentRenderKey:t,content:"",colour:"#FFD5A9",height:50,width:70,icons:[[],[],[]],imageElements:{},fontSize:12,semanticIdentity:a};return tt.push(r),r}function Ut(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ct(),a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;Na();var n=void 0,r=" \ud83d\udcc8";if(void 0!==a?(n=a,r=" \u26f6"):n=new w(e,"","","",void 0,[]),!(t<=0)){var i={text:e+r,children:[],data:NaN,state:{opened:!0},type:"Model",typeName:"Model",renderKey:t,modelKey:wa(),semanticIdentity:n};st.push(i);var l={text:e+r,children:[],data:st[lt.length],state:{opened:!0},type:"Model",typeName:"Model",renderKey:t,modelKey:wa(),semanticIdentity:n};lt.push(l)}}function Dt(e){var t,a=Object(v.a)(sa.flatten());try{for(a.s();!(t=a.n()).done;){var n=t.value;n.originalUUID===e&&sa.remove(n)}}catch(i){a.e(i)}finally{a.f()}for(var r=0;r<tt.length;r++)tt[r].semanticIdentity.UUID===e&&(tt.splice(r,1),at.splice(r,1));Ta()}function jt(e){for(var t=0;t<lt.length;t++)lt[t].modelKey===e&&(console.log("model deleted below"),console.log(lt[t]),St(lt[t]),lt.splice(t,1),st.splice(t,1));It()}function Lt(e,t){for(var a=0;a<lt.length;a++)if(lt[a].modelKey===t){lt[a].text=e+" \ud83d\udcc8",lt[a].data.text=e+" \ud83d\udcc8";break}}function Tt(e){for(var t=0;t<lt.length;t++)if(lt[t].modelKey===e)return lt[t].renderKey}function At(e,t){console.log("Rebase test"),console.log(lt);var a,n=Object(v.a)(lt);try{for(n.s();!(a=n.n()).done;){var r=a.value;if(r.modelKey===e){var i,l=Object(v.a)(r.children);try{for(l.s();!(i=l.n()).done;){var s,o=i.value.children,c=Object(v.a)(o);try{for(c.s();!(s=c.n()).done;){var d=s.value;d.renderkey=t,"Vertex"===d.data.typeName?d.data.vertexRenderKey=t:d.data.arrowRenderKey=t}}catch(u){c.e(u)}finally{c.f()}}}catch(u){l.e(u)}finally{l.f()}console.log(r),r.renderKey=t,console.log(r)}}}catch(u){n.e(u)}finally{n.f()}console.log(lt),1,qe()}function Kt(e){var t,a=[],n=0,r=Object(v.a)(Qe);try{for(r.s();!(t=r.n()).done;){var i=t.value;void 0!==i&&"Model"===i.type&&i.renderKey===e&&a.push(Qe[n]),n+=1}}catch(l){r.e(l)}finally{r.f()}return a}function Bt(e){var t,a=[],n=Object(v.a)(bt());try{for(n.s();!(t=n.n()).done;){var r=t.value;r.parentRenderKey===e&&a.push(r)}}catch(i){n.e(i)}finally{n.f()}return a}function Rt(e){return lt.find((function(t){return t.modelKey===e})).text}var Ft=!1,Pt=function(e){Object(m.a)(a,e);var t=Object(y.a)(a);function a(e){var n;Object(u.a)(this,a),n=t.call(this,e),Qe=[],!1===Ft&&(Ct("Package"),Ct("Package 2"),Ut("Graph",1),Ut("Graph 2",2),Ct("Subfolder",1),Ot("Vertex",1),Ot("Vertex 2",2),va(1),Ea(1),ot(1),Ft=!0,qe());var r,i=Object(v.a)(lt);try{for(i.s();!(r=i.n()).done;){var l=r.value;Qe.push(l)}}catch(B){i.e(B)}finally{i.f()}var s,o=Object(v.a)(bt());try{for(o.s();!(s=o.n()).done;){var c=s.value,d=Kt(c.renderKey),h=Bt(c.renderKey),f=d.concat(h);c.children=f}}catch(B){o.e(B)}finally{o.f()}var m,y=Object(v.a)(bt());try{for(y.s();!(m=y.n()).done;){var g=m.value,p=new N;void 0!==p.toTreeViewElement("Arrow Folder",g.renderKey)&&g.children.push(p.toTreeViewElement("Arrow Folder",g.renderKey))}}catch(B){y.e(B)}finally{y.f()}var b,x=Object(v.a)(yt());try{for(x.s();!(b=x.n()).done;){var E=b.value;0===E.children.length?(E.text=E.text.replace(" \ud83d\udfe7",""),E.text=E.text.replace(" \ud83d\udcc2",""),E.text=E.text+" \ud83d\udfe7"):(E.text=E.text.replace(" \ud83d\udfe7",""),E.text=E.text.replace(" \ud83d\udcc2",""),E.text=E.text+" \ud83d\udcc2")}}catch(B){x.e(B)}finally{x.f()}nt=[];var w,I=Object(v.a)(bt());try{for(I.s();!(w=I.n()).done;){var C=w.value;0===C.parentRenderKey&&nt.push(C)}}catch(B){I.e(B)}finally{I.f()}if(n.state={data:{core:{data:[{text:"Root",children:nt,state:{opened:!0},root:!0}]}},selectedVertex:null},!0===$e){var M,k="",S="",V="",O=0,U=Object(v.a)(bt());try{for(U.s();!(M=U.n()).done;){var D,j=M.value,L=Object(v.a)(j.children);try{for(L.s();!(D=L.n()).done;){var T=D.value;if(0===O){var A,K=Object(v.a)(T.children);try{for(K.s();!(A=K.n()).done;){A.value.text===_e.title&&(k=j.text,S="Vertices",V=_e.title,Ze="Root::"+k+"::"+S+"::"+V,O=1)}}catch(B){K.e(B)}finally{K.f()}}}}catch(B){L.e(B)}finally{L.f()}}}catch(B){U.e(B)}finally{U.f()}}return n}return Object(h.a)(a,[{key:"componentDidMount",value:function(){document.getElementById("LowerPanel").addEventListener("dragstart",this.dragStart)}},{key:"componentDidUpdate",value:function(){}},{key:"componentWillUnmount",value:function(){document.getElementById("LowerPanel").removeEventListener("dragstart",this.dragStart)}},{key:"dragStart",value:function(e){e.target.click();var t,a=0,n=Object(v.a)(bt());try{for(n.s();!(t=n.n()).done;){var r=t.value;ct()===r.renderKey&&(a=r)}}catch(l){n.e(l)}finally{n.f()}var i=a;console.log("drag starts..."),"treeVertex"===a.type?e.dataTransfer.setData("text/plain",i.semanticIdentity.UUID):console.log("This object has no drag/drop feature")}}]),Object(h.a)(a,[{key:"handleElementSelect",value:function(e,t){try{if(console.log(t.node),"Folder"===t.node.data.type||"treeVertex"===t.node.data.type)ot(t.node.data.renderKey);else if("Model"===t.node.data.type){Ea(t.node.data.modelKey),va(t.node.data.renderKey),ot(t.node.data.renderKey);var a,n=Object(v.a)(sa.flatten());try{for(n.s();!(a=n.n()).done;){var r=a.value;"Vertex"===r.typeName&&r.getModelKey()===xa()?r.setPresent():r.getModelKey()!==xa()&&"Vertex"===r.typeName&&r.setAway()}}catch(h){n.e(h)}finally{n.f()}}else if(1===t.selected.length&&null!==t.node.data&&void 0===t.node.data.type){var i,l=t.node.data.semanticIdentity.UUID,s=Object(v.a)(sa.flatten());try{for(s.s();!(i=s.n()).done;){var o=i.value;if(o.semanticIdentity.UUID===l){this.setState({selectedVertex:o}),va(o.vertexRenderKey),Ea(o.vertexModelKey),ot(o.vertexRenderKey);var c,d=Object(v.a)(sa.flatten());try{for(d.s();!(c=d.n()).done;){var u=c.value;"Vertex"===u.typeName&&u.getModelKey()===xa()?u.setPresent():u.getModelKey()!==xa()&&"Vertex"===u.typeName&&u.setAway()}}catch(h){d.e(h)}finally{d.f()}this.props.setLeftMenu(this.state.selectedVertex)}}}catch(h){s.e(h)}finally{s.f()}}else this.setState({selectedVertex:null});Ta()}catch(e){}try{!0===t.node.original.root&&ot(0)}catch(e){}}},{key:"handleContextMenu",value:function(){console.log("CM triggered for tree")}},{key:"render",value:function(){var e=this,t=this.state.data;return r.a.createElement("div",null,r.a.createElement(b.a,{treeData:t,onChange:function(t,a){return e.handleElementSelect(t,a)},className:"treeview",id:"treeview",draggable:"true"}))}}]),a}(r.a.Component),Ht=5,Yt=function(){function e(t){var a=t.title,n=void 0===a?"unnamed":a,r=t.content,i=t.colour,l=t.x,s=t.y,o=t.width,c=t.height,d=t.semanticIdentity,h=t.newConstructor,f=void 0===h?0:h,m=t.loadedVertex,y=void 0===m?0:m;Object(u.a)(this,e),1===f?(this.typeName=y.typeName,this.semanticIdentity=y.semanticIdentity,this.title=y.title,this.content=y.content,this.colour=y.colour,this.x=y.x,this.y=y.y,this.icons=y.icons,this.selected=!1,this.imageElements=y.imageElement,this.fontSize=12,this.orignalVertex=y.orignalVertex,this.originalUUID=y.originalUUID,this.Origin=y.Origin,this.width=y.width,this.height=y.height,this.realHeight=y.realHeight,this.isAbstract=y.isAbstract,this.vertexPath=y.vertexPath,this.vertexModelKey=y.vertexModelKey,this.vertexRenderKey=y.vertexRenderKey,this.renderedx=y.renderedx,this.renderedy=y.renderedy,this.awayx=y.awayx,this.awayy=y.awayy,this.status=y.status):(this.typeName="Vertex",this.semanticIdentity=void 0!==d?d:new w(n,"","","",void 0,[]),this.title=n,this.content=void 0===r?"":r,this.colour=i,this.x=l,this.y=s,this.icons=[[],[],[]],this.selected=!1,this.imageElements={},this.fontSize=12,this.orignalVertex=!0,this.isContainer=!1,this.Origin="",this.width=o,this.height=c,this.realHeight=c,this.width=Math.max(o,30),this.height=Math.max(c,30),this.isAbstract=!1,this.vertexPath="",this.vertexModelKey=xa(),this.vertexRenderKey=Tt(this.vertexModelKey),this.renderedx=l,this.renderedy=s,this.awayx=Math.floor(2e6*Math.random())+1e5,this.awayy=Math.floor(2e6*Math.random())+1e5,this.status="present")}return Object(h.a)(e,[{key:"setAway",value:function(){"present"===this.status&&(this.renderedx=this.x,this.renderedy=this.y,this.x=this.awayx,this.y=this.awayy,this.status="away")}},{key:"setPresent",value:function(){"away"===this.status&&(this.x=this.renderedx,this.y=this.renderedy,this.status="present")}},{key:"setModelKey",value:function(e){this.vertexModelKey=e}},{key:"getModelKey",value:function(){return this.vertexModelKey}},{key:"getSemantic",value:function(){return this.SemanticIdentity}},{key:"setSemantic",value:function(e){this.SemanticIdentity=e}},{key:"setRenderKey",value:function(e){this.vertexRenderKey=e}},{key:"getRenderKey",value:function(){return this.vertexRenderKey}},{key:"setPath",value:function(e){this.vertexPath=e}},{key:"getPath",value:function(){return this.vertexPath}},{key:"setSelected",value:function(e){this.selected=e}},{key:"getColour",value:function(){return this.colour}},{key:"setColour",value:function(e){this.colour=e}},{key:"setTitle",value:function(e){this.title=e,this.semanticIdentity.name=e}},{key:"setContent",value:function(e){this.content=e,this.semanticIdentity.description=e}},{key:"getAbstract",value:function(){return this.isAbstract}},{key:"toggleAbstract",value:function(){this.isAbstract=!this.isAbstract}},{key:"setOrigin",value:function(e){this.Origin=e}},{key:"getOrigin",value:function(){return this.Origin}},{key:"getContentAsString",value:function(){if(null!==this.content){for(var e="",t=0;t<this.content.length;t++)e=e.concat(this.content[t]),t<this.content.length-1&&(e=e.concat("\n"));return e}return""}},{key:"setIcon",value:function(e){var t=this.icons[0],a=this.icons[1],n=this.icons[2],r=t.indexOf(e);-1===r?(t.push(e),a.push(!0),n.push(!1)):a[r]=!a[r],!1===n[r]&&!1===a[r]&&(a.splice(r,1),n.splice(r,1),t.splice(r,1))}},{key:"setText",value:function(e){var t=this.icons[0],a=this.icons[1],n=this.icons[2],r=t.indexOf(e);-1===r?(t.push(e),a.push(!1),n.push(!0)):n[r]=!n[r],!1===n[r]&&!1===a[r]&&(a.splice(r,1),n.splice(r,1),t.splice(r,1))}},{key:"isIconSet",value:function(e){var t=this.icons[0].indexOf(e);return-1!==t&&this.icons[1][t]}},{key:"isTextSet",value:function(e){var t=this.icons[0].indexOf(e);return-1!==t&&this.icons[2][t]}},{key:"getBounds",value:function(){return[this.x,this.y,this.x+this.width,this.y+this.realHeight-Ht]}},{key:"expandSide",value:function(e,t,a,n){var r=0,i=0,l=this.hasContent()?4*Ht:2*Ht;switch(e){case"topLeft":i+=this.y+this.height,this.y=a,this.height=i-this.y,r+=this.x+this.width,this.x=t,this.width=r-this.x;break;case"topRight":i+=this.y+this.height,this.y=a,this.height=i-this.y,this.width=t-this.x;break;case"bottomLeft":this.height=a-this.y-this.iconAreaHeight-this.contentHeight-l,r+=this.x+this.width,this.x=t,this.width=r-this.x;break;case"bottomRight":this.height=a-this.y-this.iconAreaHeight-this.contentHeight-l,this.width=t-this.x;break;case"left":r+=this.x+this.width,this.x=t,this.width=r-this.x;break;case"right":this.width=t-this.x;break;case"top":i+=this.y+this.height,this.y=a,this.height=i-this.y;break;case"bottom":this.height=a-this.y-this.iconAreaHeight-this.contentHeight-l}this.height=Math.max(this.height,12+Ht),this.draw(n)}},{key:"increaseWidthIfNecessary",value:function(e,t){t>this.width&&(this.width=t)}},{key:"hasContent",value:function(){return!(""===this.content[0]&&1===this.content.length)}},{key:"draw",value:function(e){for(var t=this,a=this.icons[0].length,n=0;n<this.icons[0].length;n++)!0===this.icons[1][n]?!0===this.icons[2][n]&&this.increaseWidthIfNecessary(e,20+e.measureText("<< "+this.icons[0][n]+" >>").width):!0===this.icons[2][n]&&this.increaseWidthIfNecessary(e,e.measureText("<< "+this.icons[0][n]+" >>").width);this.increaseWidthIfNecessary(e,e.measureText(this.title+this.Origin).width);for(var r=0;r<this.content.length;r++)this.increaseWidthIfNecessary(e,e.measureText(this.content[r]).width+2*Ht);Ht=5,this.is&&(e.font=this.fontSize+"px Segoe UI"),e.fontSize=this.fontSize;var i=e.measureText(this.title+this.Origin).width,l=Math.max(i+2*Ht,this.width);this.contentHeight=0;for(var s=0;s<this.content.length;s++){var o=e.measureText(this.content[s]);l=Math.max(l,o.width,i),this.contentHeight+=this.fontSize+Ht}this.hasContent()||(this.contentHeight=0),l>this.width&&(this.width=l),e.shadowOffsetX=2,e.shadowOffsetY=2,this.iconAreaHeight=24*a,""!==this.content[0]?this.realHeight=4*Ht+this.height+this.iconAreaHeight+this.contentHeight:this.realHeight=2*Ht+this.height+this.iconAreaHeight,e.fillStyle=this.colour,e.fillRect(this.x,this.y,this.width,this.realHeight),e.strokeRect(this.x,this.y,this.width,this.realHeight),""!==this.content[0]&&e.strokeRect(this.x,this.y,this.width,this.height+this.iconAreaHeight+2*Ht),this.selected&&(e.fillStyle="#000000",cn(this.x,this.y),cn(this.x+this.width,this.y),cn(this.x,this.y+this.realHeight),cn(this.x+this.width,this.y+this.realHeight));var c=this.y+2,d=this.x+this.width+2;function u(t){var a=t.height,n=t.width,r=20/a;e.drawImage(t,d-4-n*r,c,n*r,a*r),c+=24}for(var h=function(a){if(!0===t.icons[1][a]){!0===t.icons[2][a]&&t.increaseWidthIfNecessary(e,20+e.measureText("<< "+t.icons[0][a]+" >>").width);var n=t.imageElements[t.icons[0][a]];if(void 0===n){var r=new Image;r.src=jn+"/icons/"+t.icons[0][a],r.crossOrigin="anonymous",r.onload=function(){u(r),t.imageElements[t.icons[0][a]]=r}}else u(n)}else c+=24},f=0;f<this.icons[0].length;f++)h(f);e.fillStyle="#000000";var m=Ht+this.fontSize;e.shadowOffsetX=0,e.shadowOffsetY=0;for(var y=this.x+2,v=this.y+20,g=0;g<this.icons[0].length;g++){if(!0===this.icons[2][g]){!0!==this.icons[1][g]&&this.increaseWidthIfNecessary(e,e.measureText("<< "+this.icons[0][g]+" >>").width);var p="<< "+this.icons[0][g].slice(0,-4)+" >>";"_n"===this.icons[0][g].slice(-6,-4)&&(p=""),e.fillText(p,y,v)}v+=24}this.increaseWidthIfNecessary(e,e.measureText(this.Origin+this.title).width),this.isAbstract?e.font="italic "+this.fontSize+"px Segoe UI":e.font=this.fontSize+"px Segoe UI",e.fillText(this.Origin+this.title,this.x+Ht,this.y+m+this.iconAreaHeight),m=2*Ht+this.height+this.contentHeight,e.font=this.fontSize+"px Segoe UI";for(var b=0;b<this.content.length;b++)this.increaseWidthIfNecessary(e,e.measureText(this.content[b]).width+2*Ht),e.fillText(this.content[b],this.x+Ht,this.y+m+this.iconAreaHeight),m+=this.fontSize+Ht;e.strokeStyle="black"}},{key:"intersects",value:function(e,t){return!(e<this.x)&&(!(t<this.y)&&(!(e>this.x+this.width)&&t<=this.y+this.realHeight))}},{key:"getNearestSideFrom",value:function(e,t){return this.getNearestSide(e,t)}},{key:"getNearestSide",value:function(e,t){var a=[];if(e>this.x&&e<this.x+this.width){var n=(e-this.x)/this.width;a.push([Math.abs(t-this.y),n,0]),a.push([Math.abs(t-(this.y+this.realHeight)),n,1])}else if(t>this.y&&t<this.y+this.realHeight){var r=(t-this.y)/this.realHeight;a.push([Math.abs(e-this.x),0,r]),a.push([Math.abs(e-(this.x+this.width)),1,r])}var i=!1;if(a.forEach((function(e){e[0]<Fa&&(i=!0)})),!1===i&&e>this.x&&e<this.x+this.width&&t>this.y&&t<this.y+this.realHeight){for(var l=(t-this.y)/this.realHeight,s=(e-this.x)/this.width,o=Math.abs(s-1)*this.width,c=l*this.realHeight,d=s*this.width,u=0,h=d,f=[d,o,c,l*this.realHeight],m=1;m<f.length-1;m++)f[m]<h&&(h=f[m],u=m);if(0===u)return[0,0,l];if(1===u)return[0,1,l];if(2===u)return[0,s,0];if(3===u)return[0,s,1]}if(0===a.length)return null;for(var y=a[0],v=1;v<a.length;v++)a[v][0]<y[0]&&(y=a[v]);return y}}]),e}(),Gt=!1,zt=!1,Xt=[],Wt=null,Jt=function(e){Object(m.a)(a,e);var t=Object(y.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).ocm=function(e){e.preventDefault()},n.mouseDown=function(e,t){var a=vn(e),r=a[0],i=a[1];if(n.setState({startX:r,startY:i}),e.shiftKey&&!zt&&(zt=!0),0===e.button&&!Gt){var l=un(r,i);Wt=l,null!==l&&t.tool===Fe.Select&&"Vertex"===l.typeName?(e.preventDefault(),n.props.setLeftMenu(un(r,i)),nn(t,r,i,null,zt)):(n.props.setLeftMenu(un(r,i)),Za(t,r,i),qa(t,r,i))}if(e.ctrlKey&&!Gt&&(Gt=!0),0===e.button&&Gt){var s=un(r,i);if(null===s&&(n.props.setLeftMenu(s,!1,Xt),Xt=[],Gt=!1),null!==s){for(var o=0;o<Xt.length-1;){for(var c=o+1;c<Xt.length;c++)Xt[o].x===Xt[c].x&&Xt[o].y===Xt[c].y&&Xt.splice(c);o++}console.log(Xt),Xt.push(un(r,i)),nn(t,r,i,Xt);for(var d=0;d<Xt.length;d++)n.props.setLeftMenu(Xt[d],Gt)}}1===e.button&&(e.preventDefault(),nn(t,r,i))},n.mouseUp=function(e,t){sn();var a=vn(e),n=a[0],r=a[1];0===e.button&&(t.tool===Fe.Select?Ta():function(e,t,a){if(Oa)return void(Oa=!1);if(!0===ka)return ka=!1,void(qt.onmousemove=null);if(qt.onmousemove=null,Xa())if(Pa(t,a).snapped&&!Va){var n=un(t,a),r=null;null!==Ia[0]&&null!==n&&null!==oa&&(r=yn(e,_t,$t,t,a)),Ia=[],Va=!0,null!==r&&Ga(r),Ta();var i=0;sa.flatten().forEach((function(e){"Arrow"===e.typeName&&(oa[i]=e.path,i++)})),null!==r&&e.props.setLeftMenu(r),e.props.setMode(Fe.Select),null!==Qt&&null!==n&&function(e){var t=[],a=[],n=[],r=[],i=[],l=[],s=[],o=[],c=(f=Qt,m=e,f.width*(f.height+10)<=m.width*(m.height+10)?[m,f]:[f,m]),d=Object(g.a)(c,2),u=d[0],h=d[1];var f,m;sa.flatten().forEach((function(e){if("Arrow"===e.typeName)if(u.y+u.height+10<h.y&&h.x>u.x&&h.x+h.width<u.x+u.width){var c=$a(n,r,u,e,0),d=Object(g.a)(c,2);n=d[0],r=d[1]}else if(u.y>h.y+h.height+10&&h.x>u.x&&h.x+h.width<u.x+u.width){var f=$a(t,a,u,e,1),m=Object(g.a)(f,2);t=m[0],a=m[1]}else if(u.x>h.x+h.width&&h.y>u.y&&h.y+h.height+10<u.y+u.height+10){console.log("left ran");var y=en(i,l,u,e,1),v=Object(g.a)(y,2);i=v[0],l=v[1]}else if(u.x+u.width<h.x&&h.y>u.y&&h.y+h.height+10<u.y+u.height+10){console.log("right ran");var p=en(s,o,u,e,0),b=Object(g.a)(p,2);s=b[0],o=b[1]}})),Qa(u,n,r,0),Qa(u,t,a,1),tn(u,i,l,1),tn(u,s,o,0)}(n),Qt=null}else Qt=un(t,a),Ia.push(Pa(t,a).coord),Ca=t,Ma=a,qt.onmousemove=function(t){an(t,e)},Va=!1;if(e.tool===Fe.Vertex){var l=yn(e,_t,$t,t,a);Ga(l),e.props.setLeftMenu(l),e.props.setMode(Fe.Select),qe()}if(e.tool===Fe.Artifact){var s=function(e,t,a){if(e.tool===Fe.Artifact){var n=gn(t,a,t+450,a+50),r=Ba(n[1],0),i=Ba(n[3],0);return new Yt({title:"",content:[""],x:n[0],y:Ba(a,1),width:n[2]-n[0],height:i-r})}return null}(e,_t,$t);Ga(s),e.props.setLeftMenu(s),e.props.setMode(Fe.Select)}if(e.tool===Fe.Container){var o=function(e,t,a){if(e.tool===Fe.Container){var n=gn(t,a,t+100,a+60),r=Ba(n[1],0),i=Ba(n[3],0),l=new Yt({title:"new Container",content:[""],x:n[0],y:Ba(a,1),width:n[2]-n[0],height:i-r});return l.setIsContainer(!0),l}return null}(e,_t,$t);o.setColour("#FFFFFF"),Ga(o),e.props.setLeftMenu(o),e.props.setMode(Fe.Select)}Ta()}(t,n,r)),e.button,e.shiftKey&&zt&&(zt=!1),1===e.button&&window.setTimeout((function(){sn()}),200),!0===ja&&function(e){var t=e,a=0;null!==sa.flatten()&&null!==t&&(sa.flatten().forEach((function(e){"Vertex"===e.typeName&&(t.x===e.x&&t.y===e.y||t.y>e.y+e.height+10||t.x>e.x+e.width||e.x>t.x+t.width||e.y>t.y+t.height+10||(t.x=Ua[0],t.y=Ua[1],t.width=Da[0],t.height=Da[1],a++))})),0===a&&(Ua=[t.x,t.y],Da=[t.width,t.height]),ja=!1,Ta())}(Wt)},n.canvasRef=r.a.createRef(),n.state={},n}return Object(h.a)(a,[{key:"componentDidMount",value:function(){this.zoom=this.props.mainState.zoomLevel,this.tool=this.props.mainState.drawMode,document.getElementById("Canvas").addEventListener("dragenter",this.dragEnter),document.getElementById("Canvas").addEventListener("dragover",this.dragOver),document.getElementById("Canvas").addEventListener("dragleave",this.dragLeave),document.getElementById("Canvas").addEventListener("drop",this.drop)}},{key:"componentWillUnmount",value:function(){document.getElementById("Canvas").removeEventListener("dragenter",this.dragEnter),document.getElementById("Canvas").removeEventListener("dragover",this.dragOver),document.getElementById("Canvas").removeEventListener("dragleave",this.dragLeave),document.getElementById("Canvas").removeEventListener("drop",this.drop)}},{key:"componentDidUpdate",value:function(){this.zoom=this.props.mainState.zoomLevel,this.tool=this.props.mainState.drawMode}},{key:"dragEnter",value:function(e){e.preventDefault()}},{key:"dragOver",value:function(e){e.preventDefault()}},{key:"dragLeave",value:function(e){return 0}},{key:"drop",value:function(e){if(xa()<=0)console.log("attempted to drag and drop vertex while there are no available models to draw on"),window.alert("You need to create and select a graph first before you can start drawing!");else{console.log("dropped"),console.log(xa());var t,a=e.dataTransfer.getData("text/plain"),n=0,r=Object(v.a)(yt());try{for(r.s();!(t=r.n()).done;){var i=t.value;i.semanticIdentity.UUID===a&&(n=i)}}catch(w){r.e(w)}finally{r.f()}var l,s=vn(e),o=n.text.replace(" \ud83d\udfe7","");o=o.replace(" \ud83d\udcc2","");var c=!1;n.parentRenderKey!==ya()?(l="#FFFFFF",c=!0):l=n.colour;var d=(f=s[0],m=s[1],y=n.width,g=n.height,p=o,b=n.content,x=l,n.icons,n.imageElements,n.fontSize,E=n.semanticIdentity,new Yt({title:p,content:b,colour:x,x:f,y:Ba(m,1),width:y,height:g,semanticIdentity:E}));if(!0===c){var u=(h=n.parentRenderKey,bt().find((function(e){return e.renderKey===h})).text);u=(u=u.replace(" \ud83d\udfe7","")).replace(" \ud83d\udcc1",""),d.setOrigin(u+" :: ")}Ga(d),Ta(),qe()}var h,f,m,y,g,p,b,x,E}},{key:"mouseLeave",value:function(){qt.onmousemove={},Va=!0,Ta()}},{key:"render",value:function(){var e=this;return r.a.createElement("canvas",{ref:this.canvasRef,id:"drawCanvas",onContextMenu:function(t){return e.ocm(t)},onMouseDown:function(t){return e.mouseDown(t,e)},onMouseUp:function(t){return e.mouseUp(t,e)},onMouseLeave:function(t){return e.mouseLeave(t,e)}},r.a.createElement("p",null," HTML5 Canvas elements are not supported by your browser"))}}]),a}(r.a.Component);window.addEventListener("resize",La);var qt,Zt,_t,$t,Qt,ea,ta,aa,na,ra=!1,ia=70,la=200,sa=new C,oa=[],ca=0,da=0,ua=0,ha=0;function fa(e){da=e}function ma(e){ha=e}function ya(){return ca}function va(e){ca=e}function ga(){return da}function pa(){da=da+=1}function ba(){return sa}function xa(){return ua}function Ea(e){ua=e;try{document.getElementById("SelectedModel").value=Rt(e)}catch(t){}}function wa(){return ha}function Na(){ha=ha+=1}var Ia=[],Ca=0,Ma=0,ka=!1,Sa=0,Va=!0,Oa=!1,Ua=[],Da=[],ja=!1;function La(){try{var e=qt.getBoundingClientRect();ea=e.left,ta=e.top,function(){var e=document.getElementsByClassName("Canvas")[0],t=+getComputedStyle(e).getPropertyValue("height").slice(0,-2),a=+getComputedStyle(e).getPropertyValue("width").slice(0,-2);qt.setAttribute("height",t*pn()),qt.setAttribute("width",a*pn()),aa=qt.width,na=qt.height}(),bn()}catch(t){console.error("Failed to acquire canvas element")}Ta()}function Ta(){ln(),bn(),Zt.resetTransform(),Zt.scale(pn(),pn()),sa.flatten().forEach((function(e){null!==e&&e.getModelKey()===ua&&e.draw(Zt)}))}function Aa(e){null!==e?sa.remove(e)||console.error("Failed to delete object with UUID %s",e.semanticIdentity.UUID):console.error("Attempted to delete a null element"),Ta()}function Ka(e){console.log("vDeleteE occurs");var t=sa.ArrowUUIDSource(e),a=sa.ArrowUUIDDest(e);t.forEach((function(e){return sa.remove(e.arrow)})),a.forEach((function(e){return sa.remove(e.arrow)})),null!==e?(console.log("vdl if staement pass"),sa.remove(e)||console.error("Failed to delete object with UUID %s",e.semanticIdentity.UUID)):console.error("Attempted to delete a null element"),Ta()}function Ba(e,t){var a=na/ia*la/100*200/la;return a*Math.floor(e/a)+a/2*+t}function Ra(e,t){for(var a=sa.flatten(),n=0;n<a.length;n++){var r=a[n];if("Vertex"===r.typeName){var i=r.getBounds(),l=i[0],s=i[1],o=i[2],c=i[3],d=Math.abs(s-t)<10,u=Math.abs(c-t)<10,h=Math.abs(l-e)<10,f=Math.abs(o-e)<10,m=t>s&&t<c,y=e>l&&e<o;if(f&&m)return[r,"right"];if(d&&h)return[r,"topLeft"];if(d&&f)return[r,"topRight"];if(u&&h)return[r,"bottomLeft"];if(u&&f)return[r,"bottomRight"];if(h&&m)return[r,"left"];if(f&&m)return[r,"right"];if(d&&y)return[r,"top"];if(u&&y)return[r,"bottom"]}}return[null,null]}var Fa=15;function Pa(e,t){var a=null,n=0;sa.flatten().forEach((function(r){if(null!==r&&"Vertex"===r.typeName){var i=r.getNearestSideFrom(e,t,Ca,Ma);null!==i&&i[0]<Fa&&(null===a||i[0]<n)&&(a=[0,r.semanticIdentity.UUID,i[1],i[2]],n=i[0])}}));var r=a;if(null===a&&(r=[1,e,t]),Ia.length<1||0===r[0])return{coord:r,snapped:null!==a,nearest:a};var i=Ia[Ia.length-1][1],l=Ia[Ia.length-1][2],s=r[1]-i,o=r[2]-l,c=Math.atan2(o,s)*(180/Math.PI),d=(c=(c+360)%360)%90;if(d>82||d<8){for(var u=dn(0,0,s,o),h=[0,90,180,270,360],f=h[0],m=1;m<h.length;m++)Math.abs(h[m]-c)<Math.abs(f-c)&&(f=h[m]);var y=f*(Math.PI/180),v=u*Math.cos(y),g=u*Math.sin(y);r=[r[0],i+v,l+g]}return{coord:r,snapped:null!==a,nearest:a}}function Ha(e){return e.props.mainState.selectedObject}function Ya(e,t){var a=vn(e);t[0].expandSide(t[1],a[0],a[1],Zt),function(){var e=0;sa.flatten().forEach((function(t){"Arrow"===t.typeName&&(e=Pa(t.path[1][0],t.path[1][1]),t.pathData[1]=e.nearest,Ja(e,t,0))}))}()}function Ga(e){null!==e&&void 0!==e&&sa.add(e)}function za(e){sa=e,Ta()}function Xa(){return Sa===Fe.Visibility||Sa===Fe.Edge||Sa===Fe.Specialisation}function Wa(e){var t;return sa.flatten().forEach((function(a){a.semanticIdentity.UUID===e&&(t=a)})),t}function Ja(e,t,a){if(!1===e.snapped){var n=e.coord;t.path[a]=[n[1],n[2]]}else{void 0!==Wa(e.nearest[1])&&(t.path[a]=t.rebuildPath())}}function qa(e,t,a){var n=Ra(t,a);if(e.tool===Fe.Vertex||e.tool===Fe.Select){if(null!==n[0]&&n[0]===Ha(e))return Za(e,t,a),ka=!0,void(qt.onmousemove=function(e){Ya(e,n)});var r=un(t,a);if(e.tool===Fe.Vertex&&null!==r)return e.props.setLeftMenu(r),e.props.setMode(Fe.Select),void(Oa=!0)}if(e.tool===Fe.Select){var i,l,s=function(e,t){var a,n=-1,r=30,i=null;return sa.flatten().forEach((function(l){"Arrow"===l.typeName&&l.path.forEach((function(s){a=Math.hypot(e-s[0],t-s[1]),console.log(a),a<r&&(r=a,n=l.path.indexOf(s),i=l)}))})),[n,i]}(t,a),o=Object(g.a)(s,2);if(i=o[0],(l=o[1])===Ha(e)&&-1!==i){ka=!0;var c=function(e){!function(e,t,a){var n=vn(e),r=Object(g.a)(n,2),i=Pa(r[0],r[1]);a.pathData[t]=i.nearest,Ja(i,a,t)}(e,i,l)};qt.addEventListener("mousemove",c),qt.addEventListener("mouseup",(function(){qt.removeEventListener("mousemove",c),console.log("removed")}))}}_t=t,$t=a,qt.onmousemove=function(t){an(t,e)}}function Za(e,t,a){Ha(e),null===Ha(e)&&un(t,a),null!==Wt&&(ja=!0,Ua=[Wt.x,Wt.y],Da=[Wt.width,Wt.height])}function _a(e){var t,a,n=[],r=[],i=[],l=[];return t=e.semanticIdentity.UUID,console.log(e),sa.flatten().forEach((function(s){"Arrow"===s.typeName&&(t===s.destVertexUUID?(((a=Wa(s.sourceVertexUUID)).height+10)*a.width<(e.height+10)*e.width&&i.push(a),s.path[0][1]<e.y||s.path[0][1]>e.y+e.height+10?n.push(s):(s.path[0][0]<e.x||s.path[0][0]>e.x+e.width)&&r.push(s)):t===s.sourceVertexUUID&&(((a=Wa(s.destVertexUUID)).height+10)*a.width<(e.height+10)*e.width&&i.push(a),s.path[1][1]<e.y||s.path[1][1]>e.y+e.height+10?n.push(s):(s.path[1][0]<e.x||s.path[1][0]>e.x+e.width)&&r.push(s)),l.push(s))})),[i,n,r,l]}function $a(e,t,a,n,r){if(a.semanticIdentity.UUID===n.destVertexUUID){var i=Wa(n.sourceVertexUUID);a.y*r+i.y*(1-r)>(i.y+i.height+10)*r+(a.y+a.height+10)*(1-r)&&(e.push(i),t.push(n))}else if(a.semanticIdentity.UUID===n.sourceVertexUUID){var l=Wa(n.destVertexUUID);a.y*r+l.y*(1-r)>(l.y+l.height+10)*r+(a.y+a.height+10)*(1-r)&&(e.push(l),t.push(n))}return[e,t]}function Qa(e,t,a,n){if(t.length>=2){for(var r=0,i=e.x,l=e.y+(e.height+30)*(1-n);r<t.length;r++)t[r].x=i,t[r].y=l-(t[r].height+30)*n,i=i+t[r].width+20,t[r].x+t[r].width>e.x+e.width&&(e.width=e.width+t[r].width);for(r=0;r<t.length;r++){console.log(a[r]);var s=Pa(t[r].x+t[r].width/2,e.y+(e.height+10)*(1-n));a[r].pathData[1]=s.nearest,Ja(s,a[r],1)}}}function en(e,t,a,n,r){if(a.semanticIdentity.UUID===n.destVertexUUID){var i=Wa(n.sourceVertexUUID);a.x*r+i.x*(1-r)>(i.x+i.width)*r+(a.x+a.width)*(1-r)&&(e.push(i),t.push(n))}else if(a.semanticIdentity.UUID===n.sourceVertexUUID){var l=Wa(n.destVertexUUID);a.x*r+l.x*(1-r)>(l.x+l.width)*r+(a.x+a.width)*(1-r)&&(e.push(l),t.push(n))}return[e,t]}function tn(e,t,a,n){if(t.length>=2){for(var r=0,i=e.x+(e.width+30)*(1-n),l=e.y;r<t.length;r++)t[r].x=i-(t[r].width+30)*n,t[r].y=l,l=l+t[r].height+20,t[r].y+t[r].height+10>e.y+e.height+10&&(e.height=e.height+t[r].height);for(r=0;r<t.length;r++){console.log(a[r]);var s=Pa(e.x+e.width*(1-n),t[r].y+(t[r].height+10)/2);a[r].pathData[1]=s.nearest,Ja(s,a[r],1)}}}function an(e,t){ra=!0;var a=vn(e);Ta();var n=yn(t,_t,$t,a[0],a[1]);Zt.globalAlpha=.75,null!==n&&n.draw(Zt),Zt.globalAlpha=1,ra=!1}function nn(e,t,a){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,r=arguments.length>4&&void 0!==arguments[4]&&arguments[4],i=un(t,a),l=_a(i),s=Object(g.a)(l,4),o=s[0],c=s[1],d=s[2],u=s[3];if(null!==o||o.length>=1){for(var h=o,f=[],m=0;m<h.length;m++){var y=_a(h[m]),v=Object(g.a)(y,1),p=v[0];if(null!==p){for(var b=0;b<p.length;b++){console.log(h.length);for(var x=0;x<h.length;x++)p[b].semanticIdentity.UUID===h[x].semanticIdentity.UUID&&p.splice(b,1)}if(p.length>=1)for(var E=0;E<p.length;E++)f.push(p[E]),o.push(p[E])}}h=f}var w=[];if(null!==o)for(var N=0;N<o.length;N++)w.push([t-o[N].x,a-o[N].y]);var I=[];if(null!==n)for(var C=0;C<n.length;C++)I.push([t-n[C].x,a-n[C].y]);if(null!==i){Za(e,t,a);var M=t-i.x,k=a-i.y;qt.onmousemove=function(e){rn(e,i,o,w,n,I,M,k,c,d,u,r)}}}function rn(e,t,a,n){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,i=arguments.length>5?arguments[5]:void 0,l=arguments.length>6?arguments[6]:void 0,s=arguments.length>7?arguments[7]:void 0,o=arguments.length>8?arguments[8]:void 0,c=arguments.length>9?arguments[9]:void 0,d=arguments.length>11?arguments[11]:void 0;if(null!=t)if("Vertex"===t.typeName){var u=vn(e),h=u[0]-l,f=u[1]-s;if(d&&null!==a)for(var m=0;m<a.length;m++)a[m].x=u[0]-n[m][0],a[m].y=u[1]-n[m][1];if(null!==r)for(var y=0;y<r.length;y++)r[y].x=u[0]-i[y][0],r[y].y=u[1]-i[y][1];if(null!==o)for(var v=0;v<o.length;v++)o[v].path[1][0]=o[v].path[0][0],Ja(Pa(o[v].path[1][0],o[v].path[1][1]),o[v],0);else if(null!==c)for(var g=0;g<c.length;g++)c[g].path[1][1]=c[g].path[0][1],Ja(Pa(c[g].path[1][0],c[g].path[1][1]),c[g],0);t.x=h,t.y=f,ln()}else if("Arrow"===t.typeName)return}function ln(){sa.flatten().forEach((function(e){null!==e&&"Arrow"===e.typeName&&e.rebuildPath()}))}function sn(){qt.onmousemove=null}function on(e){la=e,La(),Ta()}function cn(e,t){var a=Zt.lineWidth;Zt.lineWidth=.5;var n=Zt.strokeStyle;Zt.strokeStyle="#007ACC";var r=Zt.fillStyle;Zt.fillStyle="#007ACC55",Zt.globalAlpha=1,Zt.beginPath(),Zt.arc(e,t,2,0,2*Math.PI,!1),Zt.fill(),Zt.stroke(),Zt.closePath(),Zt.lineWidth=a,Zt.strokeStyle=n,Zt.fillStyle=r}function dn(e,t,a,n){return Math.sqrt(Math.pow(a-e,2)+Math.pow(n-t,2))}function un(e,t){var a=null;return sa.flatten().forEach((function(n){null!==n&&n.intersects(e,t)&&(a=n)})),a}function hn(e,t){var a=null;console.log(sa.rootVertices);var n,r=Object(v.a)(sa.rootVertices);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i.vertex.semanticIdentity.UUID===e){a=i;break}}}catch(u){r.e(u)}finally{r.f()}var l,s=Object(v.a)(sa.rootVertices);try{for(s.s();!(l=s.n()).done;){var o=l.value;if(o.vertex.semanticIdentity.UUID===t){o.vertex.semanticIdentity=a.vertex.semanticIdentity;break}}}catch(u){s.e(u)}finally{s.f()}var c,d=Object(v.a)(sa.rootVertices);try{for(d.s();!(c=d.n()).done;){c.value.vertex.semanticIdentity.UUID===e&&fn(a.vertex)}}catch(u){d.e(u)}finally{d.f()}console.log(sa.rootVertices)}function fn(e){var t,a=Object(v.a)(sa.rootVertices);try{for(a.s();!(t=a.n()).done;){var n=t.value;e.semanticIdentity.UUID===n.vertex.semanticIdentity.UUID&&(n.vertex.title=e.title,n.vertex.content=e.content,n.vertex.icons=e.icons,n.vertex.colour=e.colour,n.vertex.imageElements=e.imageElements,n.vertex.fontSize=e.fontSize)}}catch(r){a.e(r)}finally{a.f()}Ta()}function mn(e){var t;"treeVertex"!==e.type?((t=function(e){var t,a=Object(v.a)(tt);try{for(a.s();!(t=a.n()).done;){var n=t.value;if(n.semanticIdentity.UUID===e.originalUUID)return n}}catch(r){a.e(r)}finally{a.f()}}(e)).text=e.title+" \ud83d\udfe7",t.content=e.content,t.width=e.width,t.height=e.height,t.parentRenderKey===e.vertexRenderKey&&(console.log(t),console.log(e))):t=e;var a,n=Object(v.a)(sa.flatten());try{for(n.s();!(a=n.n()).done;){var r=a.value;t.semanticIdentity.UUID===r.originalUUID&&r!==e&&(t.parentRenderKey===r.vertexRenderKey?(r.title=t.text.replace(" \ud83d\udfe7",""),r.colour=t.colour,r.content=t.content):(r.title=t.text.replace(" \ud83d\udfe7",""),r.colour="#FFFFFF",r.content=t.content))}}catch(i){n.e(i)}finally{n.f()}}function yn(e,t,a,n,r){var i,l=sa.flatten();if("Vertex"===e.tool&&!1===ra){var s=gn(t,a,n+10,r),o=Ba(s[1],0),c=Ba(s[3],0);console.log("draw vertex");var d=Ot("Drawn Vertex",ya());return console.log(d.semanticIdentity.UUID),new Yt({title:"Drawn Vertex",content:d,colour:d.colour,x:s[0],y:Ba(a,1),width:s[2]-s[0],height:c-o,semanticIdentity:d.semanticIdentity})}if(Xa()){if(0!==(i=Ia.concat([Pa(n,r).coord]))[0][0])return null;var u=new He(l,i,Sa);return u.rebuildPath(l),u}return null}function vn(e){return La(),[(e.clientX-ea)/pn(),(e.clientY-ta)/pn()]}function gn(e,t,a,n){return[Math.min(e,a),Math.min(t,n),Math.max(e,a),Math.max(t,n)]}function pn(){return la/100}function bn(){Zt.fillStyle="#ffffff",Zt.fillRect(0,0,aa,na)}var xn,En,wn=a(201),Nn="Default",In=0,Cn="Default",Mn=function(e){Object(m.a)(a,e);var t=Object(y.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={xPos:"0px",yPos:"0px",showMenu:!1},e.handleClick=function(t){if(e.state.showMenu)if("MoveModel"===t.target.id)Cn="MoveModel",e.setState({showMenu:!0});else if("MoveModel"===Cn&&t.target.id.includes("Folder")){var a=t.target.id.replace("Folder","");At(In,parseInt(a)),console.log("model ",In," moved to folder id ",a),e.setState({showMenu:!1}),e.props.setLeftMenuToTree()}else if("Rename"===t.target.id)Cn="Rename",e.setState({showMenu:!0});else if("RenameVertex"===t.target.id)Cn="RenameVertex",e.setState({showMenu:!0});else if("RenameModel"===t.target.id)Cn="RenameModel",e.setState({showMenu:!0});else if("AddVertex"===t.target.id)Cn="AddVertex",e.setState({showMenu:!0});else if("AddGraph"===t.target.id)Cn="AddGraph",e.setState({showMenu:!0});else if("AddPackage"===t.target.id)Cn="AddPackage",e.setState({showMenu:!0});else if("DeletePackage"===t.target.id)Cn="DeletePackage",e.setState({showMenu:!0});else if("DeleteVertex"===t.target.id)Cn="DeleteVertex",e.setState({showMenu:!0});else if("DeleteModel"===t.target.id)Cn="DeleteModel",e.setState({showMenu:!0});else if("DeleteVertexConfirmed"===t.target.id){var n,r=Object(v.a)(yt());try{for(r.s();!(n=r.n()).done;){var i=n.value;i.renderKey===In&&Dt(i.semanticIdentity.UUID)}}catch(y){r.e(y)}finally{r.f()}e.setState({showMenu:!1}),e.props.setLeftMenuToTree(),qe()}else if("DeletePackageConfirmed"===t.target.id){var l,s=Object(v.a)(ut());try{for(s.s();!(l=s.n()).done;){l.value.renderKey===In&&Mt(In)}}catch(y){s.e(y)}finally{s.f()}e.setState({showMenu:!1}),e.props.setLeftMenuToTree(),qe()}else if("DeleteModelConfirmed"===t.target.id){var o,c=Object(v.a)(lt);try{for(c.s();!(o=c.n()).done;){o.value.modelKey===In&&jt(In)}}catch(y){c.e(y)}finally{c.f()}e.setState({showMenu:!1}),e.props.setLeftMenuToTree(),qe()}else if("RenameBox"===t.target.id||"CMSelected"===t.target.id);else if("RenameVertexBox"===t.target.id||"CMSelected"===t.target.id);else if("RenameModelBox"===t.target.id||"CMSelected"===t.target.id);else if("VertexNameBox"===t.target.id||"CMSelected"===t.target.id);else if("GraphNameBox"===t.target.id||"CMSelected"===t.target.id);else if("PackageNameBox"===t.target.id||"CMSelected"===t.target.id);else if("Create-Graph"===t.target.id)Cn="AddContainerModel",e.setState({showMenu:!0});else if("AddContainerModel"===Cn&&t.target.id.includes("Folder")){console.log(xn);var d=t.target.id.replace("Folder","");Ut(xn.title,parseInt(d),xn.semanticIdentity),e.props.setLeftMenuToTree(),e.setState({showMenu:!1})}else if("LinkContainer"===t.target.id)Cn="LinkContainer",e.setState({showMenu:!0}),console.log(ba().rootVertices);else if("LinkContainer"===Cn&&t.target.id.includes("Vertex")){console.log("linking semantic"),hn(t.target.id.replace("Vertex",""),xn.semanticIdentity.UUID),e.props.setLeftMenuToTree(),e.setState({showMenu:!1})}else if("Bi-Nav"===t.target.id)Cn="Bi-Nav",e.setState({showMenu:!0});else if("Bi-Nav"===Cn&&t.target.id.includes("Nav")){console.log("navigating");var u=t.target.id.replace("Nav","");console.log(u),Ea(parseInt(u[0])),va(u[1]),ot(u[1]);var h,f=Object(v.a)(sa.flatten());try{for(f.s();!(h=f.n()).done;){var m=h.value;"Vertex"===m.typeName&&m.getModelKey()===xa()?m.setPresent():m.getModelKey()!==xa()&&"Vertex"===m.typeName&&m.setAway()}}catch(y){f.e(y)}finally{f.f()}Ta(),console.log(xa(),ya()),e.props.setLeftMenuToTree(),e.setState({showMenu:!1})}else e.setState({showMenu:!1})},e.handleKey=function(t){if("Enter"===t.key)if("Rename"===Cn){Vt(document.getElementById("RenameBox").value,In),console.log("menu change");try{e.props.setLeftMenuToTree()}catch(t){console.log(t)}console.log("menu change fin"),e.setState({showMenu:!1}),qe()}else if("RenameModel"===Cn){Lt(document.getElementById("RenameModelBox").value,In),console.log("menu change");try{e.props.setLeftMenuToTree()}catch(t){console.log(t)}console.log("menu change fin"),e.setState({showMenu:!1}),qe()}else if("RenameVertex"===Cn){var a=document.getElementById("RenameVertexBox").value;xn.text=a,xn.data.text=a,console.log("menu change");try{e.props.setLeftMenuToTree()}catch(t){console.log(t)}console.log("rightClickedObject"),console.log(xn),mn(xn),console.log("menu change fin"),e.setState({showMenu:!1}),Ta(),qe()}else if("AddVertex"===Cn){Ot(document.getElementById("VertexNameBox").value,ct());try{e.props.setLeftMenuToTree()}catch(t){console.log(t)}e.setState({showMenu:!1}),qe()}else if("AddGraph"===Cn){Ut(document.getElementById("GraphNameBox").value,ct());try{e.props.setLeftMenuToTree()}catch(t){console.log(t)}e.setState({showMenu:!1}),qe()}else if("AddPackage"===Cn){Ct(document.getElementById("PackageNameBox").value,ct());try{e.props.setLeftMenuToTree()}catch(t){console.log(t)}e.setState({showMenu:!1}),qe()}},e.handleContextMenu=function(t){if(t.preventDefault(),t.target.click(),Cn="Default",Nn="Default",In=0,xn=null,"jstree-anchor jstree-hovered jstree-clicked"===t.target.className){if(t.target.text.includes("\ud83d\udcc1")){var a,n=Object(v.a)(ut());try{for(n.s();!(a=n.n()).done;){var r=a.value;t.target.text===r.text&&(Cn="Folder",Nn=t.target.text,In=ct())}}catch(b){n.e(b)}finally{n.f()}}if(t.target.text.includes("\ud83d\udcc8")){var i,l=Object(v.a)(xt());try{for(l.s();!(i=l.n()).done;){var s=i.value;t.target.text===s.text&&(Cn="Model",Nn=t.target.text,In=xa())}}catch(b){l.e(b)}finally{l.f()}}if(console.log("e.target"),console.log(t.target),t.target.text.includes("\ud83d\udfe7")||t.target.text.includes("\ud83d\udcc2")){console.log("e.target"),console.log(t.target);var o,c=Object(v.a)(yt());try{for(c.s();!(o=c.n()).done;){var d=o.value;t.target.text===d.text&&(Cn="Vertex",xn=d,Nn=t.target.text,In=ct())}}catch(b){c.e(b)}finally{c.f()}}"Root"===t.target.text&&(Cn="Root",Nn=t.target.text,In=ct())}if("drawCanvas"===t.target.id){var u=vn(t),h=u[0],f=u[1];if(null!==(xn=un(h,f)))if("Vertex"===xn.typeName)Nn=xn.title,Cn=!0===xn.isContainer?"Container":"CanvasVertex";else if("Arrow"===xn.typeName){var m=Wa(xn.sourceVertexUUID),y=Wa(xn.destVertexUUID),g=m.title,p=y.title;Nn="Arrow from "+g+" to "+p,Cn="Arrow"}}e.setState({xPos:"".concat(t.pageX,"px"),yPos:"".concat(t.pageY,"px"),showMenu:!0})},e}return Object(h.a)(a,[{key:"componentDidMount",value:function(){document.addEventListener("click",this.handleClick),document.addEventListener("contextmenu",this.handleContextMenu),document.addEventListener("keypress",this.handleKey)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("click",this.handleClick),document.removeEventListener("contextmenu",this.handleContextMenu),document.removeEventListener("keypress",this.handleKey)}},{key:"render",value:function(){var e=this.state,t=e.showMenu,a=e.yPos,n=e.xPos;if(!t)return null;if("Default"===Cn)return r.a.createElement("div",{className:"ContextMenu",style:{top:a,left:n}},r.a.createElement("div",{className:"CMSelected",id:"CMSelected"},"Default"));if("Folder"===Cn)return r.a.createElement("div",{className:"ContextMenu",style:{top:a,left:n}},r.a.createElement("div",{className:"CMSelected",id:"CMSelected"},r.a.createElement("b",null,Nn)),r.a.createElement("div",{className:"CMitem",id:"Rename"}," Rename"),r.a.createElement("div",{className:"CMitem",id:"AddVertex"}," Add Vertex"),r.a.createElement("div",{className:"CMitem",id:"AddGraph"}," Add Graph"),r.a.createElement("div",{className:"CMitem",id:"AddPackage"}," Add Package"),r.a.createElement("div",{className:"CMitem",id:"DeletePackage"}," Delete Package"));if("Root"===Cn)return r.a.createElement("div",{className:"ContextMenu",style:{top:a,left:n}},r.a.createElement("div",{className:"CMSelected",id:"CMSelected"},r.a.createElement("b",null,Nn)),r.a.createElement("div",{className:"CMitem",id:"AddPackage"}," Add Package"));if("DeletePackage"===Cn)return r.a.createElement("div",{className:"ContextMenu",style:{top:a,left:n}},r.a.createElement("div",{className:"CMSelected",id:"CMSelected"},r.a.createElement("b",null,"Are you sure you wish to delete: ",Nn)),r.a.createElement("div",{className:"CMitem",id:"DeletePackageConfirmed"}," Yes, Delete this package"),r.a.createElement("div",{className:"CMitem",id:"DeletePackageCancel"}," No"));if("DeleteModel"===Cn)return r.a.createElement("div",{className:"ContextMenu",style:{top:a,left:n}},r.a.createElement("div",{className:"CMSelected",id:"CMSelected"},r.a.createElement("b",null,"Are you sure you wish to delete: ",Nn)),r.a.createElement("div",{className:"CMitem",id:"DeleteModelConfirmed"}," Yes, Delete this graph"),r.a.createElement("div",{className:"CMitem",id:"DeleteModelCancel"}," No"));if("DeleteVertex"===Cn)return r.a.createElement("div",{className:"ContextMenu",style:{top:a,left:n}},r.a.createElement("div",{className:"CMSelected",id:"CMSelected"},r.a.createElement("b",null,"Are you sure you wish to delete: ",Nn)),r.a.createElement("div",{className:"CMitem",id:"DeleteVertexConfirmed"}," Yes, Delete this vertex"),r.a.createElement("div",{className:"CMitem",id:"DeleteVertexCancel"}," No"));if("Model"===Cn)return r.a.createElement("div",{className:"ContextMenu",style:{top:a,left:n}},r.a.createElement("div",{className:"CMSelected",id:"CMSelected"}," ",r.a.createElement("b",null,Nn)," "),r.a.createElement("div",{className:"CMitem",id:"RenameModel"}," Rename "),r.a.createElement("div",{className:"CMitem",id:"MoveModel"}," Move To "),r.a.createElement("div",{className:"CMitem",id:"DeleteModel"}," Delete Graph "));if("MoveModel"===Cn){var i=ut().map((function(e){return r.a.createElement("div",{className:"CMitem",id:"Folder"+e.renderKey,key:e.text}," ",e.text," ")}));return r.a.createElement("div",{className:"ContextMenu",style:{top:a,left:n}},r.a.createElement("div",{className:"CMSelected",id:"CMSelected"},' Move "',r.a.createElement("b",null,Nn),'" To:'),r.a.createElement("div",null,i))}if("Rename"===Cn)return r.a.createElement("div",{className:"ContextMenu",style:{top:a,left:n}},r.a.createElement("div",{className:"CMSelected",id:"CMSelected"}," ",r.a.createElement("b",null,Nn)," "),r.a.createElement("input",{className:"CMText",id:"RenameBox",type:"text",name:"renameItem",placeholder:"New Name"}));if("RenameModel"===Cn)return r.a.createElement("div",{className:"ContextMenu",style:{top:a,left:n}},r.a.createElement("div",{className:"CMSelected",id:"CMSelected"}," ",r.a.createElement("b",null,Nn)," "),r.a.createElement("input",{className:"CMText",id:"RenameModelBox",type:"text",name:"renameItem",placeholder:"New Name"}));if("RenameVertex"===Cn)return r.a.createElement("div",{className:"ContextMenu",style:{top:a,left:n}},r.a.createElement("div",{className:"CMSelected",id:"CMSelected"}," ",r.a.createElement("b",null,Nn)," "),r.a.createElement("input",{className:"CMText",id:"RenameVertexBox",type:"text",name:"renameItem",placeholder:"New Name"}));if("AddVertex"===Cn)return r.a.createElement("div",{className:"ContextMenu",style:{top:a,left:n}},r.a.createElement("div",{className:"CMSelected",id:"CMSelected"}," ",r.a.createElement("b",null,Nn)," "),r.a.createElement("input",{className:"CMText",id:"VertexNameBox",type:"text",name:"nameVertex",placeholder:"Vertex Name"}));if("AddPackage"===Cn)return r.a.createElement("div",{className:"ContextMenu",style:{top:a,left:n}},r.a.createElement("div",{className:"CMSelected",id:"CMSelected"}," ",r.a.createElement("b",null,Nn)," "),r.a.createElement("input",{className:"CMText",id:"PackageNameBox",type:"text",name:"namePackage",placeholder:"Package Name"}));if("AddGraph"===Cn)return r.a.createElement("div",{className:"ContextMenu",style:{top:a,left:n}},r.a.createElement("div",{className:"CMSelected",id:"CMSelected"}," ",r.a.createElement("b",null,Nn)," "),r.a.createElement("input",{className:"CMText",id:"GraphNameBox",type:"text",name:"nameGraph",placeholder:"Graph Name"}));if("Vertex"===Cn)return r.a.createElement("div",{className:"ContextMenu",style:{top:a,left:n}},r.a.createElement("div",{className:"CMSelected",id:"CMSelected"}," ",r.a.createElement("b",null,Nn)," "),r.a.createElement("div",{className:"CMitem",id:"Bi-Nav"}," Naviagte "),r.a.createElement("div",{className:"CMitem",id:"RenameVertex"}," Rename"),r.a.createElement("div",{className:"CMitem",id:"AddVertex"}," Add Vertex"),r.a.createElement("div",{className:"CMitem",id:"AddGraph"}," Add Graph"),r.a.createElement("div",{className:"CMitem",id:"AddPackage"}," Add Package"),r.a.createElement("div",{className:"CMitem",id:"DeleteVertex"}," Delete Vertex "));if("Arrow"===Cn)return r.a.createElement("div",{className:"ContextMenu",style:{top:a,left:n}},r.a.createElement("div",{className:"CMSelected",id:"CMSelected"}," ",r.a.createElement("b",null,Nn)," "),r.a.createElement("div",{className:"CMitem",id:"Auto-Layout"}," Auto-Layout option (not implemented) "));if("CanvasVertex"===Cn)return r.a.createElement("div",{className:"ContextMenu",style:{top:a,left:n}},r.a.createElement("div",{className:"CMSelected",id:"CMSelected"}," ",r.a.createElement("b",null,Nn)," "),r.a.createElement("div",{className:"CMitem",id:"Auto-Layout"}," Auto-Layout option (not implemented) "),r.a.createElement("div",{className:"CMitem",id:"Bi-Nav"}," Naviagte "));if("Container"===Cn)return r.a.createElement("div",{className:"ContextMenu",style:{top:a,left:n}},r.a.createElement("div",{className:"CMSelected",id:"CMSelected"}," ",r.a.createElement("b",null,Nn)," "),r.a.createElement("div",{className:"CMitem",id:"Create-Graph"}," Create Graph "),r.a.createElement("div",{className:"CMitem",id:"LinkContainer"}," Link Container From "),r.a.createElement("div",{className:"CMitem",id:"Bi-Nav"}," Goto other occurences "),r.a.createElement("div",{className:"CMitem",id:"Auto-Layout"}," Auto-Layout option (not implemented) "));if("LinkContainer"===Cn){console.log(ba().rootVertices);var l=Array.from(ba().rootVertices);for(var s in console.log(l),l)!1===l[s].vertex.isContainer&&l.splice(s,1);console.log(l);var o=l.map((function(e){return r.a.createElement("div",{className:"CMitem",id:"Vertex"+e.vertex.semanticIdentity.UUID,key:"Vertex"+e.vertex.semanticIdentity.UUID+" "+e.vertex.awayx}," ",Rt(e.vertex.vertexModelKey)," / ",e.vertex.title," ")}));return console.log(o),r.a.createElement("div",{className:"ContextMenu",style:{top:a,left:n}},r.a.createElement("div",{className:"CMSelected",id:"CMSelected"}," Link ",r.a.createElement("b",null,Nn)," from: "),r.a.createElement("div",null,o))}if("AddContainerModel"===Cn){var c=ut().map((function(e){return r.a.createElement("div",{className:"CMitem",id:"Folder"+e.renderKey,key:e.text}," ",e.text," ")}));return r.a.createElement("div",{className:"ContextMenu",style:{top:a,left:n}},r.a.createElement("div",{className:"CMSelected",id:"CMSelected"}," Create Model of ",r.a.createElement("b",null,Nn)," in:"),r.a.createElement("div",null,c))}if("Bi-Nav"===Cn){console.log(ba().rootVertices);var d=[],u=[],h=0;void 0===(h=xn.originalUUID)&&(h=xn.semanticIdentity.UUID),console.log("UUID stuff"),console.log(h),console.log(xn.semanticIdentity.UUID);var f,m=Object(v.a)(ba().rootVertices);try{for(m.s();!(f=m.n()).done;){var y=f.value;y.vertex.originalUUID===h&&d.push(y)}}catch(w){m.e(w)}finally{m.f()}var g,p=Object(v.a)(xt());try{for(p.s();!(g=p.n()).done;){var b=g.value;b.semanticIdentity.UUID===h&&u.push(b)}}catch(w){p.e(w)}finally{p.f()}console.log(d);var x=d.map((function(e){return r.a.createElement("div",{className:"CMitem",id:"Nav"+e.vertex.vertexModelKey+" "+e.vertex.vertexRenderKey,key:"Nav"+e.vertex.semanticIdentity.UUID+" "+e.vertex.awayx}," ",Rt(e.vertex.vertexModelKey)," / ",e.vertex.title," ")})),E=u.map((function(e){return r.a.createElement("div",{className:"CMitem",id:"Nav"+e.modelKey+" "+e.renderKey,key:"Nav"+e.semanticIdentity.UUID}," ",e.text)}));return r.a.createElement("div",{className:"ContextMenu",style:{top:a,left:n}},r.a.createElement("div",{className:"CMSelected",id:"CMSelected"}," ",r.a.createElement("b",null,Nn)," also appears at:"),r.a.createElement("div",null,x),r.a.createElement("div",null,E))}}}]),a}(r.a.Component),kn=a(197),Sn=a.n(kn),Vn=a(198),On=a.n(Vn),Un=a(199),Dn=a.n(Un),jn="http://localhost:8080",Ln="Unnamed Folder",Tn=function(e){Object(m.a)(a,e);var t=Object(y.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).updateFolderName=function(){Ln=document.getElementById("FolderName").value},n.addFolder=function(){Object(d.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ct(Ln,ct());case 2:n.setLeftMenuToTree();case 3:case"end":return e.stop()}}),e)})))()},n.deleteFolder=function(){Object(d.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Mt(ct());case 2:n.setLeftMenuToTree();case 3:case"end":return e.stop()}}),e)})))()},n.editFolderName=function(){Object(d.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Vt(Ln,ct());case 2:n.setLeftMenuToTree();case 3:case"end":return e.stop()}}),e)})))()},n.addVertex=function(){Object(d.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ot(Ln,ct());case 2:n.setLeftMenuToTree();case 3:case"end":return e.stop()}}),e)})))()},n.addModel=function(){Object(d.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ut(Ln);case 2:n.setLeftMenuToTree();case 3:case"end":return e.stop()}}),e)})))()},n.deleteModel=function(){Object(d.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,jt(xa());case 2:n.setLeftMenuToTree();case 3:case"end":return e.stop()}}),e)})))()},n.editModelName=function(){Object(d.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Lt(Ln,xa());case 2:n.setLeftMenuToTree();case 3:case"end":return e.stop()}}),e)})))()},n.zoom=function(e){var t=n.state.zoomLevel;"+"===e?n.state.zoomLevel<500&&(n.setState({zoomLevel:t+=25}),on(t)):"-"===e?n.state.zoomLevel>100&&(n.setState({zoomLevel:t-=25}),on(t)):console.log("Invalid Zoom Type")},n.setModelName=function(){n.setState({modelName:document.getElementById("ModelName").value})},n.showFile=function(){var e=n.setLeftMenuToTree;if(window.File&&window.FileReader&&window.FileList&&window.Blob)try{var t=document.querySelector("input[type=file]").files[0],a=new FileReader;a.readAsText(t),console.log(a.result),a.onload=function(){Ge(a.result),e()}}catch(r){alert(r+" did you select a file?")}else alert("Your browser is too old to support HTML5 File API");return 0},n.importFile=function(){var e=n.setLeftMenuToTree;if(window.File&&window.FileReader&&window.FileList&&window.Blob)try{var t=document.getElementById("File-Select-Import").files[0],a=new FileReader;a.readAsText(t),a.onload=function(){ze(a.result),e()}}catch(r){alert(r+" did you select a file?")}else alert("Your browser is too old to support HTML5 File API");return 0},n.toggleSemanticDomainState=function(){n.semanticTableEnabled?(n.semanticTableEnabled=!1,Ta(),n.setState(n.state),console.log("Semantic Domain disabled")):(n.semanticTableEnabled=!0,function(){for(var e=[],t=sa.flatten(),a=0;a<tt.length;a++)e.push(ie(tt[a]));for(var n=0;n<t.length;n++)"Arrow"===t[n].typeName&&(e.push(ie(t[n].sourceEdgeEnd)),e.push(ie(t[n].destEdgeEnd)));null!==X?X(e):console.error("Cannot set rows")}(),n.setState(n.state),console.log("Semantic Domain enabled"))},n.state={zoomLevel:200,drawMode:Fe.Vertex,menu:Ke.TreeView,selectedObject:null},n.setMode=n.setMode.bind(Object(f.a)(n)),n.setLeftMenu=n.setLeftMenu.bind(Object(f.a)(n)),n.setLeftMenuToTree=n.setLeftMenuToTree.bind(Object(f.a)(n)),n.semanticTableEnabled=!1,n}return Object(h.a)(a,[{key:"componentDidMount",value:function(){this.setMode(Fe.Select),console.log("Mounted")}},{key:"componentDidUpdate",value:function(e,t,a){var n,r=document.getElementById(t.SelectedTool);null!==r&&(r.style.backgroundColor="#FFFFFF"),(r=document.getElementById(this.state.SelectedTool)).style.backgroundColor="#CFFFFF",null!==this.state.selectedObject&&"Vertex"===this.state.selectedObject.typeName&&(n=this.state.selectedObject,sa.flatten().length>0&&(_e=n,!1===$e?$e=!0:!0===$e&&($e=!1)),this.state.selectedObject.setPath(Ze))}},{key:"setMode",value:function(e){e===Fe.Visibility||e===Fe.Edge||e===Fe.Specialisation?this.setState({drawMode:"Arrow"}):e===Fe.Vertex?this.setState({drawMode:"Vertex"}):e===Fe.Select?this.setState({drawMode:"Select"}):e===Fe.Artifact?this.setState({drawMode:"Artifact"}):e===Fe.Container&&this.setState({drawMode:"Container"}),this.setState({SelectedTool:Fe[e]}),Sa=e}},{key:"setLeftMenu",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(null!==a)for(var n=0;n<a.length;n++)a[n].setSelected(!1);null!==this.state.selectedObject&&!1===t&&this.state.selectedObject.setSelected(!1),null===e?this.setState({menu:Ke.TreeView,selectedObject:null}):null!==Re[e.typeName]?(this.setState({menu:e.typeName,selectedObject:e}),e.setSelected(!0)):(null!==this.state.selectedObject&&Ta(),this.setState({menu:Ke.TreeView,selectedObject:null}))}},{key:"setLeftMenuToTree",value:function(){null!==this.state.selectedObject&&Ta(),this.setState({menu:Ke.None}),this.setState({menu:Ke.TreeView,selectedObject:null}),console.log("set left menu To Tree enacted")}},{key:"mainUndo",value:function(){var e=Object(d.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Je<9&&void 0!==We[Je+1]&&0!==We.length&&(Je++,Xe(We[Je])),void console.log(Je);case 2:this.setLeftMenuToTree();case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"mainRedo",value:function(){var e=Object(d.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Je>0&&0!==We.length&&(Je--,Xe(We[Je])),void console.log(Je);case 2:this.setLeftMenuToTree();case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement(Mn,{setLeftMenuToTree:this.setLeftMenuToTree}),r.a.createElement("div",{className:"Program"},r.a.createElement("div",{className:this.semanticTableEnabled?"SemanticDomain":"hidden"},r.a.createElement(ne,null)),r.a.createElement("div",{className:"TopMenus"},r.a.createElement(Ae.a,{variant:"Primary",id:"File-Menu",title:"File",size:"lg"},r.a.createElement(wn.a.Item,null,r.a.createElement("div",{className:"TopBar"},r.a.createElement("button",{id:"file",onClick:function(){return!0===window.confirm("Are you sure, this will clear the current canvas!")?(console.log("Clearing canvas"),window.location.reload()):console.log("User opted to not clear the canvas"),void Ta()}},"New File"))),r.a.createElement(wn.a.Item,null,r.a.createElement("div",{className:"TopBar"},r.a.createElement("button",{id:"downloader",onClick:function(){return function(){var e=document.createElement("a");e.href=qt.toDataURL("image/png").replace(/^data:image\/[^;]/,"data:application/octet-stream"),e.download="Graph.png",document.body.appendChild(e),e.click()}()},download:"image.png"},"Export as .png"))),r.a.createElement("div",{className:"TopBar"},r.a.createElement("label",null,"Load"),r.a.createElement("input",{type:"file",id:"File-Select",onChange:this.showFile})),r.a.createElement("div",{className:"TopBar"},r.a.createElement("label",null,"Import"),r.a.createElement("input",{type:"file",id:"File-Select-Import",onChange:this.importFile})),r.a.createElement(wn.a.Item,null,r.a.createElement("div",{className:"TopBar"},r.a.createElement("button",{id:"json-downloader",onClick:function(){return function(){var e=Ye(),t=JSON.stringify(e),a=new Blob([t],{type:"text/json"}),n=prompt("Please name your file","s23m Model"),r=document.createElement("a");r.href=URL.createObjectURL(a),r.download=n+".json",document.body.appendChild(r),r.click(),document.body.removeChild(r)}()}},"Save (as Json)")))),r.a.createElement("div",{className:"TopBar",onClick:function(){return e.toggleSemanticDomainState()}},"Semantic Editor"),r.a.createElement("input",{className:"SelectedModel",id:"SelectedModel",type:"text",name:"selectedModel",readOnly:"readonly"}),r.a.createElement("div",{className:"TopBarSpace"},"\xa0"),r.a.createElement("div",{className:"TopBarSpace"},"\xa0"),r.a.createElement("div",{className:"TopBarIcon",onClick:function(){return e.zoom("-")}}," - "),r.a.createElement("div",{className:"TopBarIcon",onClick:function(){return e.zoom("+")}}," + "),r.a.createElement("div",{className:"TopBarSpace"},"\xa0"),r.a.createElement("div",{className:"TopBarSpace"},"\xa0"),r.a.createElement("div",{className:"TopBarIcon",onClick:function(){return e.mainUndo()}},r.a.createElement("img",{src:On.a,alt:"Delete Container"})),r.a.createElement("div",{className:"TopBarIcon",onClick:function(){return e.mainRedo()}},r.a.createElement("img",{src:Sn.a,alt:"Add Container"})),r.a.createElement("div",{className:"TopBarSpace"},"\xa0"),r.a.createElement("div",{className:"TopBarSpace"},"\xa0"),r.a.createElement("div",{className:"TopBarSpace"},"\xa0"),r.a.createElement("div",{className:"TopBarSpace"},"\xa0"),r.a.createElement("div",{className:"TopBarSpace"},"\xa0"),r.a.createElement("div",{className:"TopBarSpace"},"\xa0"),r.a.createElement("div",{className:"TopBarIcon"},r.a.createElement("a",{href:"UserManual.pdf"},r.a.createElement("img",{src:Dn.a,alt:"Help"})))),r.a.createElement("div",{className:"LowerPanel",id:"LowerPanel"},r.a.createElement(Pe,{setMode:this.setMode,setLeftMenu:this.setLeftMenu,mainState:this.state,className:"LeftMenus"}),r.a.createElement("div",{className:"Canvas",id:"Canvas"},r.a.createElement(Jt,{setLeftMenu:this.setLeftMenu,setMode:this.setMode,mainState:this.state})))))}}]),a}(r.a.Component);l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(s,null)),document.getElementById("root")),l.a.render(r.a.createElement(Tn,null),document.getElementById("program")),En="drawCanvas",qt=document.getElementById(En),Zt=qt.getContext("2d"),La(),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[221,1,2]]]);
//# sourceMappingURL=main.df8642eb.chunk.js.map